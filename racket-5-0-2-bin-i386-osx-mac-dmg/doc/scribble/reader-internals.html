<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>7.2&nbsp;@ Reader Internals</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">Scribble</span>:<span class="mywbr"> </span> Racket Documentation Tool</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="getting-started.html" class="tocviewlink" pltdoc="x">Getting Started</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="reader.html" class="tocviewlink" pltdoc="x">@ Syntax</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="generic-prose.html" class="tocviewlink" pltdoc="x">High-<wbr></wbr>Level Scribble API</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="plt-manuals.html" class="tocviewlink" pltdoc="x">Scribbling Documentation</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="lp.html" class="tocviewlink" pltdoc="x">Literate Programming</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="preprocessor.html" class="tocviewlink" pltdoc="x">Text Preprocessing</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="internals.html" class="tocviewselflink" pltdoc="x">Low-<wbr></wbr>Level Scribble API</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>7&nbsp;</td><td><a href="internals.html" class="tocviewlink" pltdoc="x">Low-<wbr></wbr>Level Scribble API</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">7.1&nbsp;</td><td><a href="layers.html" class="tocviewlink" pltdoc="x">Scribble Layers</a></td></tr><tr><td align="right">7.2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">@ Reader Internals</a></td></tr><tr><td align="right">7.3&nbsp;</td><td><a href="core.html" class="tocviewlink" pltdoc="x">Structures And Processing</a></td></tr><tr><td align="right">7.4&nbsp;</td><td><a href="renderer.html" class="tocviewlink" pltdoc="x">Renderer</a></td></tr><tr><td align="right">7.5&nbsp;</td><td><a href="decode.html" class="tocviewlink" pltdoc="x">Decoding Text</a></td></tr><tr><td align="right">7.6&nbsp;</td><td><a href="doclang.html" class="tocviewlink" pltdoc="x">Document Language</a></td></tr><tr><td align="right">7.7&nbsp;</td><td><a href="docreader.html" class="tocviewlink" pltdoc="x">Document Reader</a></td></tr><tr><td align="right">7.8&nbsp;</td><td><a href="xref.html" class="tocviewlink" pltdoc="x">Cross-<wbr></wbr>Reference Utilities</a></td></tr><tr><td align="right">7.9&nbsp;</td><td><a href="config.html" class="tocviewlink" pltdoc="x">Extending and Configuring Scribble Output</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>7.2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">@ Reader Internals</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">7.2.1&nbsp;</td><td><a href="#(part._.Using_the___.Reader)" class="tocviewlink" pltdoc="x">Using the @ Reader</a></td></tr><tr><td align="right">7.2.2&nbsp;</td><td><a href="#(part._.Syntax_.Properties)" class="tocviewlink" pltdoc="x">Syntax Properties</a></td></tr><tr><td align="right">7.2.3&nbsp;</td><td><a href="#(part._at-exp-lang)" class="tocviewlink" pltdoc="x">Adding @-<wbr></wbr>expressions to a Language</a></td></tr><tr><td align="right">7.2.4&nbsp;</td><td><a href="#(part._.Interface)" class="tocviewlink" pltdoc="x">Interface</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">7.2.1<tt>&nbsp;</tt></span><a href="#(part._.Using_the___.Reader)" class="tocsubseclink" pltdoc="x">Using the @ Reader</a></td></tr><tr><td><span class="tocsublinknumber">7.2.2<tt>&nbsp;</tt></span><a href="#(part._.Syntax_.Properties)" class="tocsubseclink" pltdoc="x">Syntax Properties</a></td></tr><tr><td><span class="tocsublinknumber">7.2.3<tt>&nbsp;</tt></span><a href="#(part._at-exp-lang)" class="tocsubseclink" pltdoc="x">Adding @-<wbr></wbr>expressions to a Language</a></td></tr><tr><td><span class="tocsublinknumber">7.2.4<tt>&nbsp;</tt></span><a href="#(part._.Interface)" class="tocsubseclink" pltdoc="x">Interface</a></td></tr><tr><td><a href="#(def._((lib._scribble/reader..rkt)._read))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: scribble/reader"><span class="RktSym"><span class="RktValLink">read</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._scribble/reader..rkt)._read-syntax))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: scribble/reader"><span class="RktSym"><span class="RktValLink">read-<wbr></wbr>syntax</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._scribble/reader..rkt)._read-inside))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: scribble/reader"><span class="RktSym"><span class="RktValLink">read-<wbr></wbr>inside</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._scribble/reader..rkt)._read-syntax-inside))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: scribble/reader"><span class="RktSym"><span class="RktValLink">read-<wbr></wbr>syntax-<wbr></wbr>inside</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._scribble/reader..rkt)._make-at-readtable))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: scribble/reader"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>at-<wbr></wbr>readtable</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._scribble/reader..rkt)._make-at-reader))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: scribble/reader"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>at-<wbr></wbr>reader</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._scribble/reader..rkt)._use-at-readtable))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: scribble/reader"><span class="RktSym"><span class="RktValLink">use-<wbr></wbr>at-<wbr></wbr>readtable</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="layers.html" title="backward to &quot;7.1 Scribble Layers&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="internals.html" title="up to &quot;7 Low-Level Scribble API&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="core.html" title="forward to &quot;7.3 Structures And Processing&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>7.2<tt>&nbsp;</tt><a name="(part._reader-internals)"></a>@ Reader Internals</h4><h5>7.2.1<tt>&nbsp;</tt><a name="(part._.Using_the___.Reader)"></a>Using the @ Reader</h5><p>You can use the reader via Racket&rsquo;s <span class="stt">#reader</span> form:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#reader scribble/reader @foo{This is free-form text!}</span></p><p>or use the <span class="RktSym">at-exp</span> meta-language as described in
<a href="#(part._at-exp-lang)" pltdoc="x">Adding @-expressions to a Language</a>.</p><p>Note that the Scribble reader reads @-forms as S-expressions.  This
means that it is up to you to give meanings for these expressions in
the usual way: use Racket functions, define your functions, or require
functions.  For example, typing the above into <span class="stt">racket</span> is likely
going to produce a &ldquo;reference to undefined identifier&rdquo; error, unless
<span class="RktSym">foo</span> is defined. You can use <span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string-append))" class="RktValLink" pltdoc="x">string-append</a></span> instead,
or you can define <span class="RktSym">foo</span> as a function (with variable arity).</p><p>A common use of the Scribble @-reader is when using Scribble as a
documentation system for producing manuals.  In this case, the manual
text is likely to start with</p><p><span class="hspace">&nbsp;&nbsp;</span><a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="docreader.html" class="RktModLink" pltdoc="x"><span class="RktSym">scribble/doc</span></a></p><p>which installs the @ reader starting in &ldquo;text mode,&rdquo; wraps the
file content afterward into a Racket module where many useful Racket
and documentation related functions are available, and parses the body
into a document using <a href="decode.html" class="RktModLink" pltdoc="x"><span class="RktSym">scribble/decode</span></a>.  See
<a href="docreader.html" pltdoc="x">Document Reader</a> for more information.</p><p>Another way to use the reader is to use the <span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._use-at-readtable))" class="RktValLink" pltdoc="x">use-at-readtable</a></span>
function to switch the current readtable to a readtable that parses
@-forms.  You can do this in a single command line:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">racket -ile scribble/reader "(use-at-readtable)"</span></p><h5>7.2.2<tt>&nbsp;</tt><a name="(part._.Syntax_.Properties)"></a>Syntax Properties</h5><p>The Scribble reader attaches properties to syntax objects.  These
properties might be useful in some rare situations.</p><p>Forms that Scribble reads are marked with a <span class="RktVal">'</span><span class="RktVal">scribble</span>
property, and a value of a list of three elements: the first is
<span class="RktVal">'</span><span class="RktVal">form</span>, the second is the number of items that were read from
the datum part, and the third is the number of items in the body part
(strings, sub-forms, and escapes).  In both cases, a <span class="RktVal">0</span> means
an empty datum/body part, and <span class="RktVal">#f</span> means that the corresponding
part was omitted.  If the form has neither parts, the property is not
attached to the result.  This property can be used to give different
meanings to expressions from the datum and the body parts, for
example, implicitly quoted keywords:</p><p><table cellspacing="0"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define-syntax))" class="RktStxLink" pltdoc="x">define-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">foo</span><span class="hspace">&nbsp;</span><span class="RktSym">stx</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" class="RktStxLink" pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stxprops.html#(def._((quote._~23~25kernel)._syntax-property))" class="RktValLink" pltdoc="x">syntax-property</a></span><span class="hspace">&nbsp;</span><span class="RktSym">stx</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">scribble</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="RktValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"&gt;&gt;&gt; ~s\n"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax-~3edatum))" class="RktValLink" pltdoc="x">syntax-&gt;datum</a></span><span class="hspace">&nbsp;</span><span class="RktSym">stx</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._syntax-case))" class="RktStxLink" pltdoc="x">syntax-case</a></span><span class="hspace">&nbsp;</span><span class="RktSym">stx</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt).__))" class="RktStxLink" pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._and))" class="RktStxLink" pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._pair~3f))" class="RktValLink" pltdoc="x">pair?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._car))" class="RktValLink" pltdoc="x">car</a></span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">form</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._even~3f))" class="RktValLink" pltdoc="x">even?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._cadr))" class="RktValLink" pltdoc="x">cadr</a></span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" class="RktStxLink" pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktSym">loop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._/))" class="RktValLink" pltdoc="x">/</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._cadr))" class="RktValLink" pltdoc="x">cadr</a></span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">as</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">xs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax-~3elist))" class="RktValLink" pltdoc="x">syntax-&gt;list</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._zero~3f))" class="RktValLink" pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._with-syntax))" class="RktStxLink" pltdoc="x">with-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">attrs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._reverse))" class="RktValLink" pltdoc="x">reverse</a></span><span class="hspace">&nbsp;</span><span class="RktSym">as</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._list))" class="RktValLink" pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">attrs</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._sub1))" class="RktValLink" pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._with-syntax))" class="RktStxLink" pltdoc="x">with-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">key</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._car))" class="RktValLink" pltdoc="x">car</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._cadr))" class="RktValLink" pltdoc="x">cadr</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym">key</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">as</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._cddr))" class="RktValLink" pltdoc="x">cddr</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p>&nbsp;</p></td></tr><tr><td><table cellspacing="0"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="stt">@foo[x 1 y (* 2 3)]{blah}</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&gt;&gt;&gt; (foo x 1 y (* 2 3) "blah")</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">'(foo<span class="stt"> </span>((x<span class="stt"> </span>1)<span class="stt"> </span>(y<span class="stt"> </span>6))<span class="stt"> </span>"blah")</span></p></td></tr></table></td></tr></table></p><p>In addition, the Scribble parser uses syntax properties to mark syntax
items that are not physically in the original source  &ndash;  indentation
spaces and newlines.  Both of these will have a <span class="RktVal">'</span><span class="RktVal">scribble</span>
property; an indentation string of spaces will have
<span class="RktVal">'</span><span class="RktVal">indentation</span> as the value of the property, and a newline will
have a <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">newline</span><span class="stt"> </span><span class="RktVal">S</span><span class="RktVal">)</span> value where <span class="RktSym">S</span> is the original
newline string including spaces that precede and follow it (which
includes the indentation for the following item).  This can be used to
implement a verbatim environment: drop indentation strings, and use
the original source strings instead of the single-newline string.  Here
is an example of this.</p><p><table cellspacing="0"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define-syntax))" class="RktStxLink" pltdoc="x">define-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">verb</span><span class="hspace">&nbsp;</span><span class="RktSym">stx</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._syntax-case))" class="RktStxLink" pltdoc="x">syntax-case</a></span><span class="hspace">&nbsp;</span><span class="RktSym">stx</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt).__))" class="RktStxLink" pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">cmd</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="base.html#(def._((lib._scribble/base..rkt)._item))" class="RktValLink" pltdoc="x">item</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">#`</span><span class="RktPn">(</span><span class="RktSym">cmd</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">#,@</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" class="RktStxLink" pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktSym">loop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">items</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax-~3elist))" class="RktValLink" pltdoc="x">syntax-&gt;list</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym"><a href="base.html#(def._((lib._scribble/base..rkt)._item))" class="RktValLink" pltdoc="x">item</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._null~3f))" class="RktValLink" pltdoc="x">null?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">items</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let*))" class="RktStxLink" pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">fst</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._car))" class="RktValLink" pltdoc="x">car</a></span><span class="hspace">&nbsp;</span><span class="RktSym">items</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">prop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stxprops.html#(def._((quote._~23~25kernel)._syntax-property))" class="RktValLink" pltdoc="x">syntax-property</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fst</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">scribble</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">rst</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._cdr))" class="RktValLink" pltdoc="x">cdr</a></span><span class="hspace">&nbsp;</span><span class="RktSym">items</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prop</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">indentation</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">rst</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._not))" class="RktValLink" pltdoc="x">not</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._and))" class="RktStxLink" pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._pair~3f))" class="RktValLink" pltdoc="x">pair?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prop</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._car))" class="RktValLink" pltdoc="x">car</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">newline</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fst</span><span class="hspace">&nbsp;</span><span class="RktSym">rst</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">datum-&gt;syntax-object</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">fst</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._cadr))" class="RktValLink" pltdoc="x">cadr</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">fst</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">rst</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p>&nbsp;</p></td></tr><tr><td><table cellspacing="0"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="stt">@verb[string-append]{</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">foo</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">bar</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="stt">}</span></td></tr></table></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"foo\n<span class="hspace">&nbsp;&nbsp;</span>bar"</span></p></td></tr></table></td></tr></table></p><h5>7.2.3<tt>&nbsp;</tt><a name="(part._at-exp-lang)"></a><a name="(mod-path._at-exp)"></a>Adding @-expressions to a Language</h5><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="#(mod-path._at-exp)" class="RktModLink" pltdoc="x"><span class="RktSym">at-exp</span></a></td></tr></table></div><div class="SIntrapara">The <a href="#(mod-path._at-exp)" class="RktModLink" pltdoc="x"><span class="RktSym">at-exp</span></a> language installs
@-reader support in the readtable, and then chains to the reader of
another language that is specified immediately after
<a href="#(mod-path._at-exp)" class="RktModLink" pltdoc="x"><span class="RktSym">at-exp</span></a>.</div></p><p>For example, <a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="stt"> </span><span class="RktSym">at-exp</span><span class="stt"> </span><span class="RktSym">racket/base</span> adds @-reader
support to <span class="RktSym">racket/base</span>, so that</p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="#(mod-path._at-exp)" class="RktModLink" pltdoc="x"><span class="RktSym">at-exp</span></a><span class="hspace">&nbsp;</span><span class="RktSym">racket/base</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">greet</span><span class="hspace">&nbsp;</span><span class="RktSym">who</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="stt">@</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string-append))" class="RktValLink" pltdoc="x">string-append</a></span><span class="RktPn">{</span><span class="RktVal">Hello, </span><span class="stt">@|</span><span class="RktSym">who</span><span class="stt">|</span><span class="RktVal">.</span><span class="RktPn">}</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">greet</span><span class="hspace">&nbsp;</span><span class="RktVal">"friend"</span><span class="RktPn">)</span></td></tr></table></p><p>reports <span class="RktVal">"Hello, friend."</span>.</p><h5>7.2.4<tt>&nbsp;</tt><a name="(part._.Interface)"></a><a name="(mod-path._scribble/reader)"></a>Interface</h5><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._scribble/reader)" class="RktModLink" pltdoc="x"><span class="RktSym">scribble/reader</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">The <a href="#(mod-path._scribble/reader)" class="RktModLink" pltdoc="x"><span class="RktSym">scribble/reader</span></a> module
provides direct Scribble reader functionality for advanced needs.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._scribble/reader..rkt)._read))"></a><a name="(def._((lib._scribble/reader..rkt)._read))"></a><span title="Provided from: scribble/reader"><span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._read))" class="RktValLink" pltdoc="x">read</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">in</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">in</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._current-input-port))" class="RktValLink" pltdoc="x">current-input-port</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._scribble/reader..rkt)._read-syntax))"></a><a name="(def._((lib._scribble/reader..rkt)._read-syntax))"></a><span title="Provided from: scribble/reader"><span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._read-syntax))" class="RktValLink" pltdoc="x">read-syntax</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">source-name</span><span class="hspace">&nbsp;</span><span class="RktVar">in</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._eof-object~3f))" class="RktValLink" pltdoc="x">eof-object?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">source-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/inspectors.html#(def._((quote._~23~25kernel)._object-name))" class="RktValLink" pltdoc="x">object-name</a></span><span class="hspace">&nbsp;</span><span class="RktVar">in</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">in</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._current-input-port))" class="RktValLink" pltdoc="x">current-input-port</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">These procedures implement the Scribble reader.  They do so by
constructing a reader table based on the current one, and using that
for reading.</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._scribble/reader..rkt)._read-inside))"></a><a name="(def._((lib._scribble/reader..rkt)._read-inside))"></a><span title="Provided from: scribble/reader"><span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._read-inside))" class="RktValLink" pltdoc="x">read-inside</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">in</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">in</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._current-input-port))" class="RktValLink" pltdoc="x">current-input-port</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._scribble/reader..rkt)._read-syntax-inside))"></a><a name="(def._((lib._scribble/reader..rkt)._read-syntax-inside))"></a><span title="Provided from: scribble/reader"><span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._read-syntax-inside))" class="RktValLink" pltdoc="x">read-syntax-inside</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">source-name</span><span class="hspace">&nbsp;</span><span class="RktVar">in</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._eof-object~3f))" class="RktValLink" pltdoc="x">eof-object?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">source-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/inspectors.html#(def._((quote._~23~25kernel)._object-name))" class="RktValLink" pltdoc="x">object-name</a></span><span class="hspace">&nbsp;</span><span class="RktVar">in</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">in</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._current-input-port))" class="RktValLink" pltdoc="x">current-input-port</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">These <span class="RktSym">-inside</span> variants parse as if starting inside a
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">@{</span><span class="hspace"></span></span>...<span class="RktInBG"><span class="hspace"></span><span class="RktIn">}</span><span class="hspace"></span></span>, and they return a (syntactic) list.
Useful for implementing languages that are textual by default (see
<span class="stt">"docreader.ss"</span> for example).</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._scribble/reader..rkt)._make-at-readtable))"></a><a name="(def._((lib._scribble/reader..rkt)._make-at-readtable))"></a><span title="Provided from: scribble/reader"><span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._make-at-readtable))" class="RktValLink" pltdoc="x">make-at-readtable</a></span></span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:readtable</span><span class="hspace">&nbsp;</span><span class="RktVar">readtable</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:command-char</span><span class="hspace">&nbsp;</span><span class="RktVar">command-char</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:datum-readtable</span><span class="hspace">&nbsp;</span><span class="RktVar">datum-readtable</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:syntax-post-processor</span><span class="hspace">&nbsp;</span><span class="RktVar">syntax-post-proc</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/readtables.html#(def._((quote._~23~25kernel)._readtable~3f))" class="RktValLink" pltdoc="x">readtable?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">readtable</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/readtables.html#(def._((quote._~23~25kernel)._readtable~3f))" class="RktValLink" pltdoc="x">readtable?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._current-readtable))" class="RktValLink" pltdoc="x">current-readtable</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">command-char</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">character?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#\@</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">datum-readtable</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/readtables.html#(def._((quote._~23~25kernel)._readtable~3f))" class="RktValLink" pltdoc="x">readtable?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/readtables.html#(def._((quote._~23~25kernel)._readtable~3f))" class="RktValLink" pltdoc="x">readtable?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/readtables.html#(def._((quote._~23~25kernel)._readtable~3f))" class="RktValLink" pltdoc="x">readtable?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVal">#t</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">syntax-post-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span></td></tr></table></div><div class="SIntrapara">Constructs an @-readtable.  The keyword arguments can customize the
resulting reader in several ways:</div></p><p><div class="SIntrapara"><ul><li><p><span class="RktVar">readtable</span>  &ndash;  a readtable to base the @-readtable
on.</p></li><li><p><span class="RktVar">command-char</span>  &ndash;  the character used for @-forms.</p></li><li><p><span class="RktVar">datum-readtable</span>  &ndash;  determines the readtable used for
reading the datum part.  A <span class="RktVal">#t</span> values uses the
@-readtable, otherwise it can be a readtable, or a
readtable-to-readtable function that will construct one from the
@-readtable.  The idea is that you may want to have completely
different uses for the datum part, for example, introducing a
convenient <span class="RktInBG"><span class="hspace"></span><span class="RktIn">key=val</span><span class="hspace"></span></span> syntax for attributes.</p></li><li><p><span class="RktVar">syntax-post-proc</span>  &ndash;  function that is applied on
each resulting syntax value after it has been parsed (but before it
is wrapped quoting punctuations).  You can use this to further
control uses of @-forms, for example, making the command be the
head of a list:</p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._use-at-readtable))" class="RktValLink" pltdoc="x">use-at-readtable</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:syntax-post-processor</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">stx</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._syntax-case))" class="RktStxLink" pltdoc="x">syntax-case</a></span><span class="hspace">&nbsp;</span><span class="RktSym">stx</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">cmd</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/pairs.html#(def._((lib._racket/list..rkt)._rest))" class="RktValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._list))" class="RktValLink" pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">cmd</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/pairs.html#(def._((lib._racket/list..rkt)._rest))" class="RktValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/exns.html#(def._((quote._~23~25kernel)._error))" class="RktValLink" pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"@ forms must have a body"</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></li></ul></div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._scribble/reader..rkt)._make-at-reader))"></a><a name="(def._((lib._scribble/reader..rkt)._make-at-reader))"></a><span title="Provided from: scribble/reader"><span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._make-at-reader))" class="RktValLink" pltdoc="x">make-at-reader</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:syntax?</span><span class="hspace">&nbsp;</span><span class="RktVar">syntax?</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:inside?</span><span class="hspace">&nbsp;</span><span class="RktVar">inside?</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">syntax?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">inside?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></div><div class="SIntrapara">Constructs a variant of a @-readtable.  The arguments are the same
as in <span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._make-at-readtable))" class="RktValLink" pltdoc="x">make-at-readtable</a></span>, with two more that determine the
kind of reader function that will be created: <span class="RktVar">syntax?</span> chooses
between a <span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._read))" class="RktValLink" pltdoc="x">read</a></span>- or <span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._read-syntax))" class="RktValLink" pltdoc="x">read-syntax</a></span>-like function, and
<span class="RktVar">inside?</span> chooses a plain reader or an <span class="RktSym">-inside</span>
variant.</div></p><p>The resulting function has a different contract and action based on
these inputs.  The expected inputs are as in <span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._read))" class="RktValLink" pltdoc="x">read</a></span> or
<span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._read-syntax))" class="RktValLink" pltdoc="x">read-syntax</a></span> depending on <span class="RktVar">syntax?</span>; the function will
read a single expression or, if <span class="RktVar">inside?</span> is true, the whole
input; it will return a syntactic list of expressions rather than a
single one in this case.</p><p>Note that <span class="RktVar">syntax?</span> defaults to <span class="RktVal">#t</span>, as this is the
more expected common case when you&rsquo;re dealing with concrete-syntax
reading.</p><p><div class="SIntrapara">Note that if <span class="RktVar">syntax?</span> is true, the <span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._read))" class="RktValLink" pltdoc="x">read</a></span>-like function
is constructed by simply converting a syntax result back into a datum.</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._scribble/reader..rkt)._use-at-readtable))"></a><a name="(def._((lib._scribble/reader..rkt)._use-at-readtable))"></a><span title="Provided from: scribble/reader"><span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._use-at-readtable))" class="RktValLink" pltdoc="x">use-at-readtable</a></span></span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr></table></div><div class="SIntrapara">Passes all arguments to <span class="RktSym"><a href="#(def._((lib._scribble/reader..rkt)._make-at-readtable))" class="RktValLink" pltdoc="x">make-at-readtable</a></span>, and installs the
resulting readtable using <span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._current-readtable))" class="RktValLink" pltdoc="x">current-readtable</a></span>. It also enables
line counting for the current input-port via <span class="RktSym"><a href="../reference/linecol.html#(def._((quote._~23~25kernel)._port-count-lines!))" class="RktValLink" pltdoc="x">port-count-lines!</a></span>.</div></p><p>This is mostly useful for playing with the Scribble syntax on the REPL.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="layers.html" title="backward to &quot;7.1 Scribble Layers&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="internals.html" title="up to &quot;7 Low-Level Scribble API&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="core.html" title="forward to &quot;7.3 Structures And Processing&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>