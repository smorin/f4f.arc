<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>2&nbsp;Module-Processing Helpers</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">Syntax</span>:<span class="mywbr"> </span> Meta-<wbr></wbr>Programming Helpers</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="syntax-helpers.html" class="tocviewlink" pltdoc="x">Syntax Object Helpers</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Module-<wbr></wbr>Processing Helpers</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="transformer-helpers.html" class="tocviewlink" pltdoc="x">Macro Transformer Helpers</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="reader-helpers.html" class="tocviewlink" pltdoc="x">Reader Helpers</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="toplevel.html" class="tocviewlink" pltdoc="x">Non-<wbr></wbr>Module Compilation And Expansion</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="trusted-xforms.html" class="tocviewlink" pltdoc="x">Trusting Standard Recertifying Transformers</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="docprovide.html" class="tocviewlink" pltdoc="x">Attaching Documentation to Exports</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="stxparse.html" class="tocviewlink" pltdoc="x">Parsing and specifying syntax</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Module-<wbr></wbr>Processing Helpers</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#(part._modread)" class="tocviewlink" pltdoc="x">Reading Module Source Code</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="#(part._modcode)" class="tocviewlink" pltdoc="x">Getting Module Compiled Code</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="#(part._.Resolving_.Module_.Paths_to_.File_.Paths)" class="tocviewlink" pltdoc="x">Resolving Module Paths to File Paths</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="#(part._modcollapse)" class="tocviewlink" pltdoc="x">Simplifying Module Paths</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="#(part._moddep)" class="tocviewlink" pltdoc="x">Inspecting Modules and Module Dependencies</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#(part._modread)" class="tocsubseclink" pltdoc="x">Reading Module Source Code</a></td></tr><tr><td><a href="#(def._((lib._syntax/modread..rkt)._with-module-reading-parameterization))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: syntax/modread"><span class="RktSym"><span class="RktValLink">with-<wbr></wbr>module-<wbr></wbr>reading-<wbr></wbr>parameterization</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._syntax/modread..rkt)._check-module-form))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: syntax/modread"><span class="RktSym"><span class="RktValLink">check-<wbr></wbr>module-<wbr></wbr>form</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#(part._modcode)" class="tocsubseclink" pltdoc="x">Getting Module Compiled Code</a></td></tr><tr><td><a href="#(def._((lib._syntax/modcode..rkt)._get-module-code))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: syntax/modcode"><span class="RktSym"><span class="RktValLink">get-<wbr></wbr>module-<wbr></wbr>code</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._syntax/modcode..rkt)._moddep-current-open-input-file))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: syntax/modcode"><span class="RktSym"><span class="RktValLink">moddep-<wbr></wbr>current-<wbr></wbr>open-<wbr></wbr>input-<wbr></wbr>file</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._syntax/modcode..rkt)._exn~3aget-module-code))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: syntax/modcode"><span class="RktSym"><span class="RktValLink">exn:<span class="mywbr"> </span>get-<wbr></wbr>module-<wbr></wbr>code</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#(part._.Resolving_.Module_.Paths_to_.File_.Paths)" class="tocsubseclink" pltdoc="x">Resolving Module Paths to File Paths</a></td></tr><tr><td><a href="#(def._((lib._syntax/modresolve..rkt)._resolve-module-path))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: syntax/modresolve"><span class="RktSym"><span class="RktValLink">resolve-<wbr></wbr>module-<wbr></wbr>path</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._syntax/modresolve..rkt)._resolve-module-path-index))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: syntax/modresolve"><span class="RktSym"><span class="RktValLink">resolve-<wbr></wbr>module-<wbr></wbr>path-<wbr></wbr>index</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.4<tt>&nbsp;</tt></span><a href="#(part._modcollapse)" class="tocsubseclink" pltdoc="x">Simplifying Module Paths</a></td></tr><tr><td><a href="#(def._((lib._syntax/modcollapse..rkt)._collapse-module-path))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: syntax/modcollapse"><span class="RktSym"><span class="RktValLink">collapse-<wbr></wbr>module-<wbr></wbr>path</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._syntax/modcollapse..rkt)._collapse-module-path-index))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: syntax/modcollapse"><span class="RktSym"><span class="RktValLink">collapse-<wbr></wbr>module-<wbr></wbr>path-<wbr></wbr>index</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.5<tt>&nbsp;</tt></span><a href="#(part._moddep)" class="tocsubseclink" pltdoc="x">Inspecting Modules and Module Dependencies</a></td></tr><tr><td><a href="#(def._((lib._syntax/moddep..rkt)._show-import-tree))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: syntax/moddep"><span class="RktSym"><span class="RktValLink">show-<wbr></wbr>import-<wbr></wbr>tree</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="syntax-helpers.html" title="backward to &quot;1 Syntax Object Helpers&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Syntax: Meta-Programming Helpers&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="transformer-helpers.html" title="forward to &quot;3 Macro Transformer Helpers&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>2<tt>&nbsp;</tt><a name="(part._module-helpers)"></a>Module-Processing Helpers</h3><h4>2.1<tt>&nbsp;</tt><a name="(part._modread)"></a><a name="(mod-path._syntax/modread)"></a>Reading Module Source Code</h4><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._syntax/modread)" class="RktModLink" pltdoc="x"><span class="RktSym">syntax/modread</span></a><span class="RktPn">)</span></td></tr></table></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._syntax/modread..rkt)._with-module-reading-parameterization))"></a><a name="(def._((lib._syntax/modread..rkt)._with-module-reading-parameterization))"></a><span title="Provided from: syntax/modread"><span class="RktSym"><a href="#(def._((lib._syntax/modread..rkt)._with-module-reading-parameterization))" class="RktValLink" pltdoc="x">with-module-reading-parameterization</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thunk</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Calls <span class="RktVar">thunk</span> with all reader parameters reset to their default
values.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._syntax/modread..rkt)._check-module-form))"></a><a name="(def._((lib._syntax/modread..rkt)._check-module-form))"></a><span title="Provided from: syntax/modread"><span class="RktSym"><a href="#(def._((lib._syntax/modread..rkt)._check-module-form))" class="RktValLink" pltdoc="x">check-module-form</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stx</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">expected-module-sym</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">source-v</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._false/c))" class="RktValLink" pltdoc="x">false/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._eof-object~3f))" class="RktValLink" pltdoc="x">eof-object?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">expected-module-sym</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">source-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._false/c))" class="RktValLink" pltdoc="x">false/c</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Inspects <span class="RktVar">stx</span> to check whether evaluating it will declare a
module &ndash; at least if <span class="RktSym"><a href="../reference/module.html#(form._((quote._~23~25kernel)._module))" class="RktStxLink" pltdoc="x">module</a></span> is bound in the top-level to
Racket&rsquo;s <span class="RktSym"><a href="../reference/module.html#(form._((quote._~23~25kernel)._module))" class="RktStxLink" pltdoc="x">module</a></span>. The syntax object <span class="RktVar">stx</span> can contain a
compiled expression. Also, <span class="RktVar">stx</span> can be an end-of-file, on the
grounds that <span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="RktValLink" pltdoc="x">read-syntax</a></span> can produce an end-of-file.</div></p><p>The <span class="RktVar">expected-module-sym</span> argument is currently ignored. In
previous versions, the module form <span class="RktVar">stx</span> was obliged to declare
a module who name matched <span class="RktVar">expected-module-sym</span>.</p><p>If <span class="RktVar">stx</span> can declare a module in an appropriate top-level, then
the <span class="RktSym"><a href="#(def._((lib._syntax/modread..rkt)._check-module-form))" class="RktValLink" pltdoc="x">check-module-form</a></span> procedure returns a syntax object that
certainly will declare a module (adding explicit context to the
leading <span class="RktSym"><a href="../reference/module.html#(form._((quote._~23~25kernel)._module))" class="RktStxLink" pltdoc="x">module</a></span> if necessary) in any top-level. Otherwise, if
<span class="RktVar">source-v</span> is not <span class="RktVal">#f</span>, a suitable exception is raised
using the <span class="RktSym"><a href="../reference/Writing.html#(def._((quote._~23~25kernel)._write))" class="RktValLink" pltdoc="x">write</a></span> form of the source in the message; if
<span class="RktVar">source-v</span> is <span class="RktVal">#f</span>, <span class="RktVal">#f</span> is returned.</p><p>If <span class="RktVar">stx</span> is eof or eof wrapped as a syntax object, then an
error is raised or <span class="RktVal">#f</span> is returned.</p><h4>2.2<tt>&nbsp;</tt><a name="(part._modcode)"></a><a name="(mod-path._syntax/modcode)"></a>Getting Module Compiled Code</h4><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._syntax/modcode)" class="RktModLink" pltdoc="x"><span class="RktSym">syntax/modcode</span></a><span class="RktPn">)</span></td></tr></table></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._syntax/modcode..rkt)._get-module-code))"></a><a name="(def._((lib._syntax/modcode..rkt)._get-module-code))"></a><span title="Provided from: syntax/modcode"><span class="RktSym"><a href="#(def._((lib._syntax/modcode..rkt)._get-module-code))" class="RktValLink" pltdoc="x">get-module-code</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">module-path-v</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:sub-path</span><span class="hspace">&nbsp;</span><span class="RktVar">compiled-subdir0</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">compiled-subdir</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:compile</span><span class="hspace">&nbsp;</span><span class="RktVar">compile-proc0</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">compile-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:extension-handler</span><span class="hspace">&nbsp;</span><span class="RktVar">ext-proc0</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">ext-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:choose</span><span class="hspace">&nbsp;</span><span class="RktVar">choose-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:notify</span><span class="hspace">&nbsp;</span><span class="RktVar">notify-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:source-reader</span><span class="hspace">&nbsp;</span><span class="RktVar">read-syntax-proc</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module-path-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">compiled-subdir0</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._relative-path~3f))" class="RktValLink" pltdoc="x">relative-path?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVal">"compiled"</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">compiled-subdir</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._relative-path~3f))" class="RktValLink" pltdoc="x">relative-path?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">compiled-subdir0</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">compile-proc0</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._compile))" class="RktValLink" pltdoc="x">compile</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">compile-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVar">compile-proc0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ext-proc0</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._false/c))" class="RktValLink" pltdoc="x">false/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">ext-proc</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._false/c))" class="RktValLink" pltdoc="x">false/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">ext-proc0</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">choose-proc</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._symbols))" class="RktValLink" pltdoc="x">symbols</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">src</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">zo</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">so</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._false/c))" class="RktValLink" pltdoc="x">false/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">src</span><span class="hspace">&nbsp;</span><span class="RktSym">zo</span><span class="hspace">&nbsp;</span><span class="RktSym">so</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">notify-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void))" class="RktValLink" pltdoc="x">void</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">read-syntax-proc</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="RktValLink" pltdoc="x">read-syntax</a></span></td></tr></table></td></tr></table></div><div class="SIntrapara">Returns a compiled expression for the declaration of the module
specified by <span class="RktVar">module-path-v</span>.</div></p><p>The <span class="RktVar">compiled-subdir</span> argument defaults to <span class="RktVal">"compiled"</span>;
it specifies the sub-directory to search for a compiled version of the
module.</p><p>The <span class="RktVar">compile-proc</span> argument defaults to <span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._compile))" class="RktValLink" pltdoc="x">compile</a></span>. This
procedure is used to compile module source if an already-compiled
version is not available.</p><p>The <span class="RktVar">ext-proc</span> argument defaults to <span class="RktVal">#f</span>. If it is not
<span class="RktVal">#f</span>, it must be a procedure of two arguments that is called
when a native-code version of <span class="RktSym">path</span> is should be used. In that
case, the arguments to <span class="RktVar">ext-proc</span> are the path for the
extension, and a boolean indicating whether the extension is a <span class="stt">_loader</span>
file (<span class="RktVal">#t</span>) or not (<span class="RktVal">#f</span>).</p><p>The <span class="RktVar">choose-proc</span> argument is a procedure that takes three
paths: a source path, a <span class="stt">".zo"</span> file path, and an extension path
(for a non-<span class="stt">_loader</span> extension). Some of the paths may not
exist. The result should be either <span class="RktVal">'</span><span class="RktVal">src</span>, <span class="RktVal">'</span><span class="RktVal">zo</span>,
<span class="RktVal">'</span><span class="RktVal">so</span>, or <span class="RktVal">#f</span>, indicating which variant should be used
or (in the case of <span class="RktVal">#f</span>) that the default choice should be
used.</p><p>The default choice is computed as follows: if a <span class="stt">".zo"</span> version
of <span class="RktSym">path</span> is available and newer than <span class="RktSym">path</span> itself (in
one of the directories specified by <span class="RktVar">compiled-subdir</span>), then it
is used instead of the source. Native-code versions of <span class="RktSym">path</span>
are ignored, unless only a native-code non-<span class="stt">_loader</span> version exists
(i.e., <span class="RktSym">path</span> itself does not exist). A <span class="stt">_loader</span> extension
is selected a last resort.</p><p>If an extension is prefered or is the only file that exists, it is
supplied to <span class="RktVar">ext-proc</span> when <span class="RktVar">ext-proc</span> is <span class="RktVal">#f</span>,
or an exception is raised (to report that an extension file cannot be
used) when <span class="RktVar">ext-proc</span> is <span class="RktVal">#f</span>.</p><p>If <span class="RktVar">notify-proc</span> is supplied, it is called for the file
(source, <span class="stt">".zo"</span> or extension) that is chosen.</p><p>If <span class="RktVar">read-syntax-proc</span> is provided, it is used to read the
module from a source file (but not from a bytecode file).</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._syntax/modcode..rkt)._moddep-current-open-input-file))"></a><a name="(def._((lib._syntax/modcode..rkt)._moddep-current-open-input-file))"></a><span title="Provided from: syntax/modcode"><span class="RktSym"><a href="#(def._((lib._syntax/modcode..rkt)._moddep-current-open-input-file))" class="RktValLink" pltdoc="x">moddep-current-open-input-file</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: syntax/modcode"><span class="RktSym"><a href="#(def._((lib._syntax/modcode..rkt)._moddep-current-open-input-file))" class="RktValLink" pltdoc="x">moddep-current-open-input-file</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">A parameter whose value is used like <span class="RktSym"><a href="../reference/file-ports.html#(def._((lib._racket/private/base..rkt)._open-input-file))" class="RktValLink" pltdoc="x">open-input-file</a></span> to read
a module source or <span class="stt">".zo"</span> file.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define-struct.html#(form._((lib._racket/private/base..rkt)._struct))" class="RktStxLink" pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(dep._((lib._syntax/modcode..rkt)._exn~3aget-module-code-path))"></a><a name="(def._((lib._syntax/modcode..rkt)._exn~3aget-module-code-path))"></a><a name="(dep._((lib._syntax/modcode..rkt)._make-exn~3aget-module-code))"></a><a name="(def._((lib._syntax/modcode..rkt)._make-exn~3aget-module-code))"></a><a name="(dep._((lib._syntax/modcode..rkt)._exn~3aget-module-code~3f))"></a><a name="(def._((lib._syntax/modcode..rkt)._exn~3aget-module-code~3f))"></a><a name="(dep._((lib._syntax/modcode..rkt)._struct~3aexn~3aget-module-code))"></a><a name="(def._((lib._syntax/modcode..rkt)._struct~3aexn~3aget-module-code))"></a><a name="(dep._((lib._syntax/modcode..rkt)._exn~3aget-module-code))"></a><a name="(def._((lib._syntax/modcode..rkt)._exn~3aget-module-code))"></a><span title="Provided from: syntax/modcode"><span class="RktSym"><a href="#(def._((lib._syntax/modcode..rkt)._exn~3aget-module-code))" class="RktValLink" pltdoc="x">exn:get-module-code</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/exns.html#(def._((lib._racket/private/base..rkt)._exn))" class="RktValLink" pltdoc="x">exn</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">path</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._syntax/modcode..rkt)._make-exn~3aget-module-code))" class="RktValLink" pltdoc="x">make-exn:get-module-code</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span></td></tr></table></div><div class="SIntrapara">An exception structure type for exceptions raised by
<span class="RktSym"><a href="#(def._((lib._syntax/modcode..rkt)._get-module-code))" class="RktValLink" pltdoc="x">get-module-code</a></span>.</div></p><h4>2.3<tt>&nbsp;</tt><a name="(part._.Resolving_.Module_.Paths_to_.File_.Paths)"></a><a name="(mod-path._syntax/modresolve)"></a>Resolving Module Paths to File Paths</h4><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._syntax/modresolve)" class="RktModLink" pltdoc="x"><span class="RktSym">syntax/modresolve</span></a><span class="RktPn">)</span></td></tr></table></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._syntax/modresolve..rkt)._resolve-module-path))"></a><a name="(def._((lib._syntax/modresolve..rkt)._resolve-module-path))"></a><span title="Provided from: syntax/modresolve"><span class="RktSym"><a href="#(def._((lib._syntax/modresolve..rkt)._resolve-module-path))" class="RktValLink" pltdoc="x">resolve-module-path</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">module-path-v</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">rel-to-path-v</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module-path-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rel-to-path-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._false/c))" class="RktValLink" pltdoc="x">false/c</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Resolves a module path to filename path. The module path is resolved
relative to <span class="RktVar">rel-to-path-v</span> if it is a path string (assumed to
be for a file), to the directory result of calling the thunk if it is
a thunk, or to the current directory otherwise.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._syntax/modresolve..rkt)._resolve-module-path-index))"></a><a name="(def._((lib._syntax/modresolve..rkt)._resolve-module-path-index))"></a><span title="Provided from: syntax/modresolve"><span class="RktSym"><a href="#(def._((lib._syntax/modresolve..rkt)._resolve-module-path-index))" class="RktValLink" pltdoc="x">resolve-module-path-index</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">module-path-index</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">rel-to-path-v</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module-path-index</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path-index~3f))" class="RktValLink" pltdoc="x">module-path-index?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rel-to-path-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._false/c))" class="RktValLink" pltdoc="x">false/c</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((lib._syntax/modresolve..rkt)._resolve-module-path))" class="RktValLink" pltdoc="x">resolve-module-path</a></span> but the input is a <a href="../reference/Module_Names_and_Loading.html#(tech._module._path._index)" pltdoc="x">module path index</a>; in this case, the <span class="RktVar">rel-to-path-v</span>
base is used where the module path index contains the &ldquo;self&rdquo; index.
If <span class="RktVar">module-path-index</span> depends on the &ldquo;self&rdquo; module path
index, then an exception is raised unless <span class="RktVar">rel-to-path-v</span> is a
path string.</div></p><h4>2.4<tt>&nbsp;</tt><a name="(part._modcollapse)"></a><a name="(mod-path._syntax/modcollapse)"></a>Simplifying Module Paths</h4><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._syntax/modcollapse)" class="RktModLink" pltdoc="x"><span class="RktSym">syntax/modcollapse</span></a><span class="RktPn">)</span></td></tr></table></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._syntax/modcollapse..rkt)._collapse-module-path))"></a><a name="(def._((lib._syntax/modcollapse..rkt)._collapse-module-path))"></a><span title="Provided from: syntax/modcollapse"><span class="RktSym"><a href="#(def._((lib._syntax/modcollapse..rkt)._collapse-module-path))" class="RktValLink" pltdoc="x">collapse-module-path</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">module-path-v</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">rel-to-module-path-v</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module-path-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rel-to-module-path-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></div><div class="SIntrapara">Returns a &ldquo;simplified&rdquo; module path by combining
<span class="RktVar">module-path-v</span> with <span class="RktVar">rel-to-module-path-v</span>, where the
latter must have the form <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">lib</span><span class="stt"> </span><span class="RktVal">....</span><span class="RktVal">)</span> or a symbol,
<span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">file</span><span class="stt"> </span><span class="RktVal">&lt;string&gt;</span><span class="RktVal">)</span>, <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">planet</span><span class="stt"> </span><span class="RktVal">....</span><span class="RktVal">)</span>, a <a href="../reference/pathutils.html#(tech._path)" pltdoc="x">path</a>, or a thunk to generate one of those.</div></p><p>The result can be a path if <span class="RktVar">module-path-v</span> contains a path
element that is needed for the result, or if
<span class="RktVar">rel-to-module-path-v</span> is a non-string path that is needed for
the result; otherwise, the result is a module path in the sense of
<span class="RktSym"><a href="../reference/Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span>.</p><p>When the result is a <span class="RktVal">'</span><span class="RktVal">lib</span> or <span class="RktVal">'</span><span class="RktVal">planet</span> module path, it
is normalized so that equivalent module paths are represented by
<span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span> results.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._syntax/modcollapse..rkt)._collapse-module-path-index))"></a><a name="(def._((lib._syntax/modcollapse..rkt)._collapse-module-path-index))"></a><span title="Provided from: syntax/modcollapse"><span class="RktSym"><a href="#(def._((lib._syntax/modcollapse..rkt)._collapse-module-path-index))" class="RktValLink" pltdoc="x">collapse-module-path-index</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">module-path-index</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">rel-to-module-path-v</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module-path-index</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path-index~3f))" class="RktValLink" pltdoc="x">module-path-index?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rel-to-module-path-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((lib._syntax/modcollapse..rkt)._collapse-module-path))" class="RktValLink" pltdoc="x">collapse-module-path</a></span>, but the input is a <a href="../reference/Module_Names_and_Loading.html#(tech._module._path._index)" pltdoc="x">module path index</a>; in this case, the
<span class="RktVar">rel-to-module-path-v</span> base is used where the module path index
contains the &ldquo;self&rdquo; index.</div></p><h4>2.5<tt>&nbsp;</tt><a name="(part._moddep)"></a><a name="(mod-path._syntax/moddep)"></a>Inspecting Modules and Module Dependencies</h4><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._syntax/moddep)" class="RktModLink" pltdoc="x"><span class="RktSym">syntax/moddep</span></a><span class="RktPn">)</span></td></tr></table></p><p>Re-exports <a href="#(mod-path._syntax/modread)" class="RktModLink" pltdoc="x"><span class="RktSym">syntax/modread</span></a>,
<a href="#(mod-path._syntax/modcode)" class="RktModLink" pltdoc="x"><span class="RktSym">syntax/modcode</span></a>, <a href="#(mod-path._syntax/modcollapse)" class="RktModLink" pltdoc="x"><span class="RktSym">syntax/modcollapse</span></a>,
and <a href="#(mod-path._syntax/modresolve)" class="RktModLink" pltdoc="x"><span class="RktSym">syntax/modresolve</span></a>, in addition to the following:</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._syntax/moddep..rkt)._show-import-tree))"></a><a name="(def._((lib._syntax/moddep..rkt)._show-import-tree))"></a><span title="Provided from: syntax/moddep"><span class="RktSym"><a href="#(def._((lib._syntax/moddep..rkt)._show-import-tree))" class="RktValLink" pltdoc="x">show-import-tree</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">module-path-v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module-path-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span></td></tr></table></div><div class="SIntrapara">A debugging aid that prints the import hierarchy starting from a given
module path.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="syntax-helpers.html" title="backward to &quot;1 Syntax Object Helpers&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Syntax: Meta-Programming Helpers&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="transformer-helpers.html" title="forward to &quot;3 Macro Transformer Helpers&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>