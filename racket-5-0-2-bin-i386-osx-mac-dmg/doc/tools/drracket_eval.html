<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>17&nbsp;drracket:eval</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">Plugins</span>:<span class="mywbr"> </span> Extending Dr<span class="mywbr"> </span>Racket</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="implementing-tools.html" class="tocviewlink" pltdoc="x">Implementing Dr<span class="mywbr"> </span>Racket Tools</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="adding-languages.html" class="tocviewlink" pltdoc="x">Adding Languages to Dr<span class="mywbr"> </span>Racket</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Creating_New_Kinds_of_DrRacket_Frames.html" class="tocviewlink" pltdoc="x">Creating New Kinds of Dr<span class="mywbr"> </span>Racket Frames</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Extending_the_Existing_DrRacket_Classes.html" class="tocviewlink" pltdoc="x">Extending the Existing Dr<span class="mywbr"> </span>Racket Classes</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Expanding_and_Breaking.html" class="tocviewlink" pltdoc="x">Expanding the User&rsquo;s Program Text and Breaking</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Editor_Modes.html" class="tocviewlink" pltdoc="x">Editor Modes</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Language-specific_capabilities.html" class="tocviewlink" pltdoc="x">Language-<wbr></wbr>specific capabilities</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Check_Syntax.html" class="tocviewlink" pltdoc="x">Check Syntax</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="drracket_get_extend.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>get/<span class="mywbr"> </span>extend</span></a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="drracket_unit.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>unit</span></a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="drracket_language.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>language</span></a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="drracket_language-configuration.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>language-<wbr></wbr>configuration</span></a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="drracket_debug.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>debug</span></a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="drracket_rep.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>rep</span></a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="drracket_frame.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>frame</span></a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="drracket_help-desk.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>help-<wbr></wbr>desk</span></a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>eval</span></a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="drracket_modes.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>modes</span></a></td></tr><tr><td align="right">19&nbsp;</td><td><a href="drracket_module-language-tools.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>module-<wbr></wbr>language-<wbr></wbr>tools</span></a></td></tr><tr><td align="right">20&nbsp;</td><td><a href="drracket_module-language.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>module-<wbr></wbr>language</span></a></td></tr><tr><td align="right">21&nbsp;</td><td><a href="Backwards_compatibility.html" class="tocviewlink" pltdoc="x">Backwards compatibility</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aset-basic-parameters))" class="tocsublink" pltdoc="x"><span title="Provided from: drracket/tool-lib, drscheme/tool-lib"><span class="RktSym"><span class="RktValLink">drracket:<span class="mywbr"> </span>eval:<span class="mywbr"> </span>set-<wbr></wbr>basic-<wbr></wbr>parameters</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aget-snip-classes))" class="tocsublink" pltdoc="x"><span title="Provided from: drracket/tool-lib, drscheme/tool-lib"><span class="RktSym"><span class="RktValLink">drracket:<span class="mywbr"> </span>eval:<span class="mywbr"> </span>get-<wbr></wbr>snip-<wbr></wbr>classes</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aexpand-program))" class="tocsublink" pltdoc="x"><span title="Provided from: drracket/tool-lib, drscheme/tool-lib"><span class="RktSym"><span class="RktValLink">drracket:<span class="mywbr"> </span>eval:<span class="mywbr"> </span>expand-<wbr></wbr>program</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3atraverse-program/multiple))" class="tocsublink" pltdoc="x"><span title="Provided from: drracket/tool-lib, drscheme/tool-lib"><span class="RktSym"><span class="RktValLink">drracket:<span class="mywbr"> </span>eval:<span class="mywbr"> </span>traverse-<wbr></wbr>program/<span class="mywbr"> </span>multiple</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aexpand-program/multiple))" class="tocsublink" pltdoc="x"><span title="Provided from: drracket/tool-lib, drscheme/tool-lib"><span class="RktSym"><span class="RktValLink">drracket:<span class="mywbr"> </span>eval:<span class="mywbr"> </span>expand-<wbr></wbr>program/<span class="mywbr"> </span>multiple</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3abuild-user-eventspace/custodian))" class="tocsublink" pltdoc="x"><span title="Provided from: drracket/tool-lib, drscheme/tool-lib"><span class="RktSym"><span class="RktValLink">drracket:<span class="mywbr"> </span>eval:<span class="mywbr"> </span>build-<wbr></wbr>user-<wbr></wbr>eventspace/<span class="mywbr"> </span>custodian</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="drracket_help-desk.html" title="backward to &quot;16 drracket:help-desk&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Plugins: Extending DrRacket&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="drracket_modes.html" title="forward to &quot;18 drracket:modes&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>17<tt>&nbsp;</tt><a name="(part._drracket_eval)"></a><span class="stt">drracket:eval</span></h3><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aset-basic-parameters))"></a><a name="(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aset-basic-parameters))"></a><span title="Provided from: drracket/tool-lib, drscheme/tool-lib"><span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aset-basic-parameters))" class="RktValLink" pltdoc="x">drracket:eval:set-basic-parameters</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">snipclasses</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">snipclasses</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Object_and_Class_Contracts.html#(def._((lib._racket/class..rkt)._is-a~3f/c))" class="RktValLink" pltdoc="x">is-a?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../gui/snip-class_.html" class="RktValLink" pltdoc="x">snip-class%</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">sets the parameters that are shared between the repl&rsquo;s
initialization and <span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3abuild-user-eventspace/custodian))" class="RktValLink" pltdoc="x">drracket:eval:build-user-eventspace/custodian</a></span></div></p><p><div class="SIntrapara">Specifically, it sets these parameters:
</div><div class="SIntrapara"><ul><li><p><div class="SIntrapara"><span class="RktSym"><a href="../reference/Namespaces.html#(def._((quote._~23~25kernel)._current-namespace))" class="RktValLink" pltdoc="x">current-namespace</a></span> has been set to a newly
 created empty namespace. This namespace has the following modules
 copied (with <span class="RktSym"><a href="../reference/Namespaces.html#(def._((quote._~23~25kernel)._namespace-attach-module))" class="RktValLink" pltdoc="x">namespace-attach-module</a></span>)
 from DrRacket&rsquo;s original namespace:
 </div><div class="SIntrapara"><ul><li><p><span class="RktVal">'</span><span class="RktVal">mzscheme</span></p></li><li><p><span class="RktVal">'</span><span class="RktVal">mred</span></p></li></ul></div></p></li><li><p><span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read-curly-brace-as-paren))" class="RktValLink" pltdoc="x">read-curly-brace-as-paren</a></span>
 is <span class="RktVal">#t</span>; </p></li><li><p><span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read-square-bracket-as-paren))" class="RktValLink" pltdoc="x">read-square-bracket-as-paren</a></span>
 is <span class="RktVal">#t</span>;</p></li><li><p><span class="RktSym"><a href="../reference/exns.html#(def._((quote._~23~25kernel)._error-print-width))" class="RktValLink" pltdoc="x">error-print-width</a></span> is set to 250;</p></li><li><p><span class="RktSym"><a href="../gui/Drawing_Functions.html#(def._((lib._mred/main..rkt)._current-ps-setup))" class="RktValLink" pltdoc="x">current-ps-setup</a></span>
 is set to a newly created
 <span class="RktSym"><a href="../gui/ps-setup_.html" class="RktValLink" pltdoc="x">ps-setup%</a></span>
 object;</p></li><li><p>the <span class="RktSym"><a href="../reference/Exiting.html#(def._((quote._~23~25kernel)._exit-handler))" class="RktValLink" pltdoc="x">exit-handler</a></span> is set to
    a parameter that kills the user&rsquo;s custodian; and</p></li><li><p>the snip-class-list, returned by
<span class="RktSym"><a href="../gui/Editor_Functions.html#(def._((lib._mred/main..rkt)._get-the-snip-class-list))" class="RktValLink" pltdoc="x">get-the-snip-class-list</a></span>
is initialized with all of the snipclasses in DrRacket&rsquo;s eventspace&rsquo;s snip-class-list.</p></li></ul></div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aget-snip-classes))"></a><a name="(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aget-snip-classes))"></a><span title="Provided from: drracket/tool-lib, drscheme/tool-lib"><span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aget-snip-classes))" class="RktValLink" pltdoc="x">drracket:eval:get-snip-classes</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Object_and_Class_Contracts.html#(def._((lib._racket/class..rkt)._is-a~3f/c))" class="RktValLink" pltdoc="x">is-a?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../gui/snip-class_.html" class="RktValLink" pltdoc="x">snip-class%</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Returns a list of all of the snipclasses in the current eventspace.</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aexpand-program))"></a><a name="(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aexpand-program))"></a><span title="Provided from: drracket/tool-lib, drscheme/tool-lib"><span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aexpand-program))" class="RktValLink" pltdoc="x">drracket:eval:expand-program</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">input</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">language-settings</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">eval-compile-time-part?</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">init</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">kill-termination</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">iter</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">input</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((lib._racket/private/misc..rkt)._port~3f))" class="RktValLink" pltdoc="x">port?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3atext/pos~3f))" class="RktValLink" pltdoc="x">drracket:language:text/pos?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">language-settings</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="drracket_language-configuration.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage-configuration~3alanguage-settings~3f))" class="RktValLink" pltdoc="x">drracket:language-configuration:language-settings?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">eval-compile-time-part?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">init</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">kill-termination</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">iter</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._eof-object~3f))" class="RktValLink" pltdoc="x">eof-object?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._cons/c))" class="RktValLink" pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></div><div class="SIntrapara">Use this function to expand the contents of the definitions
window for use with external program processing tools.</div></p><p>This function uses
<span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3abuild-user-eventspace/custodian))" class="RktValLink" pltdoc="x">drracket:eval:build-user-eventspace/custodian</a></span>
to build the user&rsquo;s environment.
The arguments <span class="RktVar">language-settings</span>, <span class="RktVar">init</span>, and
<span class="RktVar">kill-termination</span> are passed to
<span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3abuild-user-eventspace/custodian))" class="RktValLink" pltdoc="x">drracket:eval:build-user-eventspace/custodian</a></span>.</p><p>The <span class="RktVar">input</span> argument specifies the source of the program.</p><p>The <span class="RktVar">eval-compile-time-part?</span> argument indicates if
<span class="RktSym"><a href="../reference/Expanding_Top-Level_Forms.html#(def._((quote._~23~25kernel)._expand))" class="RktValLink" pltdoc="x">expand</a></span>
is called or if
<span class="RktSym">expand-top-level-with-compile-time-evals</span>
is called when the program is expanded.
Roughly speaking, if your tool will evaluate each expression
itself by calling
<span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._eval))" class="RktValLink" pltdoc="x">eval</a></span>
then pass <span class="RktVal">#f</span>. Otherwise, if your tool
just processes the expanded program, be sure to pass
<span class="RktVal">#t</span>.</p><p>This function calls
<span class="RktSym"><a href="drracket_language.html#(meth._(((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3alanguage~3c~25~3e)._front-end/complete-program))" class="RktValLink" pltdoc="x">front-end/complete-program</a></span>
to expand the program. Unlike when the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Run</span> is clicked,
however, it does not call
<span class="RktSym"><a href="drracket_language.html#(meth._(((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3alanguage~3c~25~3e)._front-end/finished-complete-program))" class="RktValLink" pltdoc="x">front-end/finished-complete-program</a></span>.</p><p>The first argument to <span class="RktVar">iter</span> is the expanded program
(represented as syntax) or eof.
The <span class="RktVar">iter</span> argument is called for each expression in the
expanded program and once more with eof, unless an error is
raised during expansion.
It is called from the user&rsquo;s thread.
If an exception is raised during expansion of the
user&rsquo;s program, <span class="RktVar">iter</span> is not called.
Consider setting the exception-handler during <span class="RktVar">init</span> to
handle this situation.</p><p>The second argument to <span class="RktVar">iter</span> is a thunk that
continues expanding the rest of the contents of the
definitions window. If the first argument to <span class="RktVar">iter</span> was
eof, this argument is just the primitive
<span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void))" class="RktValLink" pltdoc="x">void</a></span>.</p><p><div class="SIntrapara">See also
<span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aexpand-program/multiple))" class="RktValLink" pltdoc="x">drracket:eval:expand-program/multiple</a></span>.</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3atraverse-program/multiple))"></a><a name="(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3atraverse-program/multiple))"></a><span title="Provided from: drracket/tool-lib, drscheme/tool-lib"><span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3atraverse-program/multiple))" class="RktValLink" pltdoc="x">drracket:eval:traverse-program/multiple</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">language-settings</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">init</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">kill-termination</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((lib._racket/private/misc..rkt)._port~3f))" class="RktValLink" pltdoc="x">port?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3atext/pos~3f))" class="RktValLink" pltdoc="x">drracket:language:text/pos?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._eof-object~3f))" class="RktValLink" pltdoc="x">eof-object?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._cons/c))" class="RktValLink" pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">language-settings</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="drracket_language-configuration.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage-configuration~3alanguage-settings~3f))" class="RktValLink" pltdoc="x">drracket:language-configuration:language-settings?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">init</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">kill-termination</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">This function is similar to
<span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aexpand-program/multiple))" class="RktValLink" pltdoc="x">drracket:eval:expand-program/multiple</a></span>
The only difference is that it does not
expand the program in the editor; instead
the processing function can decide how to
expand the program.</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td colspan="3"><span class="RktPn">(</span><a name="(dep._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aexpand-program/multiple))"></a><a name="(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aexpand-program/multiple))"></a><span title="Provided from: drracket/tool-lib, drscheme/tool-lib"><span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aexpand-program/multiple))" class="RktValLink" pltdoc="x">drracket:eval:expand-program/multiple</a></span></span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">language-settings</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">eval-compile-time-part?</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">init</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">kill-termination</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((lib._racket/private/misc..rkt)._port~3f))" class="RktValLink" pltdoc="x">port?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3atext/pos~3f))" class="RktValLink" pltdoc="x">drracket:language:text/pos?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._eof-object~3f))" class="RktValLink" pltdoc="x">eof-object?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._cons/c))" class="RktValLink" pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">language-settings</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="drracket_language-configuration.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage-configuration~3alanguage-settings~3f))" class="RktValLink" pltdoc="x">drracket:language-configuration:language-settings?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">eval-compile-time-part?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">init</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">kill-termination</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">This function is just like
<span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aexpand-program))" class="RktValLink" pltdoc="x">drracket:eval:expand-program</a></span>
except that it is curried and the second application
can be used multiple times.
Use this function if you want to initialize the user&rsquo;s
thread (and namespace, etc) once but have program text
that comes from multiple sources.</div></p><p><div class="SIntrapara">The extra boolean argument to the result function
determines if
<span class="RktSym">drracket:language:language</span><span class="stt"> </span><span class="RktSym">front-end/complete-program&lt;%&gt;</span>
or
<span class="RktSym">drracket:language:language</span><span class="stt"> </span><span class="RktSym">front-end/interaction&lt;%&gt;</span>
is called.</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td colspan="3"><span class="RktPn">(</span><a name="(dep._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3abuild-user-eventspace/custodian))"></a><a name="(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3abuild-user-eventspace/custodian))"></a><span title="Provided from: drracket/tool-lib, drscheme/tool-lib"><span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3abuild-user-eventspace/custodian))" class="RktValLink" pltdoc="x">drracket:eval:build-user-eventspace/custodian</a></span></span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">language-settings</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">init</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">kill-termination</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0"><tr><td><span class="RktSym"><a href="../gui/Windowing_Functions.html#(def._((lib._mred/main..rkt)._eventspace~3f))" class="RktValLink" pltdoc="x">eventspace?</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/custodians.html#(def._((quote._~23~25kernel)._custodian~3f))" class="RktValLink" pltdoc="x">custodian?</a></span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">language-settings</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="drracket_language-configuration.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage-configuration~3alanguage-settings~3f))" class="RktValLink" pltdoc="x">drracket:language-configuration:language-settings?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">init</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">kill-termination</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">This function creates a custodian and an eventspace (on the
new custodian) to expand the user&rsquo;s program. It does not
kill this custodian, but it can safely be shutdown (with
<span class="RktSym"><a href="../reference/custodians.html#(def._((quote._~23~25kernel)._custodian-shutdown-all))" class="RktValLink" pltdoc="x">custodian-shutdown-all</a></span>) after the
expansion is finished.</div></p><p><div class="SIntrapara">It initializes the
user&rsquo;s eventspace&rsquo;s main thread with several parameters:
</div><div class="SIntrapara"><ul><li><p><span class="RktSym"><a href="../reference/custodians.html#(def._((quote._~23~25kernel)._current-custodian))" class="RktValLink" pltdoc="x">current-custodian</a></span> is set to a new custodian.</p></li><li><p>In addition, it calls
<span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3aset-basic-parameters))" class="RktValLink" pltdoc="x">drracket:eval:set-basic-parameters</a></span>.</p></li></ul></div></p><p>The <span class="RktVar">language-settings</span> argument is the current
language and its settings. See
<span class="RktSym"><a href="drracket_language-configuration.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage-configuration~3alanguage-settings))" class="RktValLink" pltdoc="x">drracket:language-configuration:language-settings</a></span>
for details on that structure.</p><p>If the program is associated with a DrRacket
frame, get the frame&rsquo;s language settings from the
<span class="RktSym"><a href="drracket_unit.html#(meth._(((lib._drracket/tool-lib..rkt)._drracket~3aunit~3adefinitions-text~3c~25~3e)._get-next-settings))" class="RktValLink" pltdoc="x">get-next-settings</a></span>
method of
<span class="RktSym"><a href="drracket_unit.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3aunit~3adefinitions-text~3c~25~3e))" class="RktValLink" pltdoc="x">drracket:unit:definitions-text&lt;%&gt;</a></span>.  Also, the most recently chosen language in
the language dialog is saved via the framework&rsquo;s
preferences. Apply
<span class="RktSym"><a href="../framework/Preferences__Textual.html#(def._((lib._framework/preferences..rkt)._preferences~3aget))" class="RktValLink" pltdoc="x">preferences:get</a></span>
to
<span class="RktSym"><a href="drracket_language-configuration.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage-configuration~3aget-settings-preferences-symbol))" class="RktValLink" pltdoc="x">drracket:language-configuration:get-settings-preferences-symbol</a></span>
for that <span class="RktVar">language-settings</span>.</p><p>The <span class="RktVar">init</span> argument is called after the user&rsquo;s parameters
are all set, but before the program is run. It is called on
the user&rsquo;s thread. The
<span class="RktSym"><a href="../reference/Filesystem.html#(def._((quote._~23~25kernel)._current-directory))" class="RktValLink" pltdoc="x">current-directory</a></span> and
<span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._current-load-relative-directory))" class="RktValLink" pltdoc="x">current-load-relative-directory</a></span>
parameters are not set, so if there are appropriate directories,
the <span class="RktVar">init</span> argument is a good place to set them.</p><p>The <span class="RktVar">kill-termination</span> argument is called when the main thread of
the eventspace terminates, no matter if the custodian was
shutdown, or the thread was killed. This procedure is also
called when the thread terminates normally. This procedure is
called from a new, dedicated thread (<span style="font-style: italic">i. e.</span>, not the thread
created to do the expansion, nor the thread that
<span class="RktSym"><a href="#(def._((lib._drracket/tool-lib..rkt)._drracket~3aeval~3abuild-user-eventspace/custodian))" class="RktValLink" pltdoc="x">drracket:eval:build-user-eventspace/custodian</a></span> was called from.)</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="drracket_help-desk.html" title="backward to &quot;16 drracket:help-desk&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Plugins: Extending DrRacket&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="drracket_modes.html" title="forward to &quot;18 drracket:modes&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>