<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>12.1.5&nbsp;File Ports</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="extras.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">Reference</span>:<span class="mywbr"> </span> Racket</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="model.html" class="tocviewlink" pltdoc="x">Language Model</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="syntax.html" class="tocviewlink" pltdoc="x">Syntactic Forms</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="data.html" class="tocviewlink" pltdoc="x">Datatypes</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="structures.html" class="tocviewlink" pltdoc="x">Structures</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="mzlib_class.html" class="tocviewlink" pltdoc="x">Classes and Objects</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="mzlib_unit.html" class="tocviewlink" pltdoc="x">Units</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="contracts.html" class="tocviewlink" pltdoc="x">Contracts</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="match.html" class="tocviewlink" pltdoc="x">Pattern Matching</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="control.html" class="tocviewlink" pltdoc="x">Control Flow</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="concurrency.html" class="tocviewlink" pltdoc="x">Concurrency</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Macros.html" class="tocviewlink" pltdoc="x">Macros</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="input-and-output.html" class="tocviewselflink" pltdoc="x">Input and Output</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="security.html" class="tocviewlink" pltdoc="x">Reflection and Security</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="os.html" class="tocviewlink" pltdoc="x">Operating System</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="memory.html" class="tocviewlink" pltdoc="x">Memory Management</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="unsafe.html" class="tocviewlink" pltdoc="x">Unsafe Operations</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="running.html" class="tocviewlink" pltdoc="x">Running Racket</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" pltdoc="x">Bibliography</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>12&nbsp;</td><td><a href="input-and-output.html" class="tocviewlink" pltdoc="x">Input and Output</a></td></tr></table><div class="tocviewsublist" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">12.1&nbsp;</td><td><a href="ports.html" class="tocviewselflink" pltdoc="x">Ports</a></td></tr><tr><td align="right">12.2&nbsp;</td><td><a href="Byte_and_String_Input.html" class="tocviewlink" pltdoc="x">Byte and String Input</a></td></tr><tr><td align="right">12.3&nbsp;</td><td><a href="Byte_and_String_Output.html" class="tocviewlink" pltdoc="x">Byte and String Output</a></td></tr><tr><td align="right">12.4&nbsp;</td><td><a href="Reading.html" class="tocviewlink" pltdoc="x">Reading</a></td></tr><tr><td align="right">12.5&nbsp;</td><td><a href="Writing.html" class="tocviewlink" pltdoc="x">Writing</a></td></tr><tr><td align="right">12.6&nbsp;</td><td><a href="reader.html" class="tocviewlink" pltdoc="x">The Reader</a></td></tr><tr><td align="right">12.7&nbsp;</td><td><a href="printing.html" class="tocviewlink" pltdoc="x">The Printer</a></td></tr><tr><td align="right">12.8&nbsp;</td><td><a href="pretty-print.html" class="tocviewlink" pltdoc="x">Pretty Printing</a></td></tr><tr><td align="right">12.9&nbsp;</td><td><a href="Reader_Extension.html" class="tocviewlink" pltdoc="x">Reader Extension</a></td></tr><tr><td align="right">12.10&nbsp;</td><td><a href="Printer_Extension.html" class="tocviewlink" pltdoc="x">Printer Extension</a></td></tr><tr><td align="right">12.11&nbsp;</td><td><a href="serialization.html" class="tocviewlink" pltdoc="x">Serialization</a></td></tr><tr><td align="right">12.12&nbsp;</td><td><a href="fasl.html" class="tocviewlink" pltdoc="x">Fast-<wbr></wbr>Load Serialization</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9660;</a></td><td>12.1&nbsp;</td><td><a href="ports.html" class="tocviewlink" pltdoc="x">Ports</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">12.1.1&nbsp;</td><td><a href="encodings.html" class="tocviewlink" pltdoc="x">Encodings and Locales</a></td></tr><tr><td align="right">12.1.2&nbsp;</td><td><a href="port-ops.html" class="tocviewlink" pltdoc="x">Managing Ports</a></td></tr><tr><td align="right">12.1.3&nbsp;</td><td><a href="port-buffers.html" class="tocviewlink" pltdoc="x">Port Buffers and Positions</a></td></tr><tr><td align="right">12.1.4&nbsp;</td><td><a href="linecol.html" class="tocviewlink" pltdoc="x">Counting Positions, Lines, and Columns</a></td></tr><tr><td align="right">12.1.5&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">File Ports</a></td></tr><tr><td align="right">12.1.6&nbsp;</td><td><a href="stringport.html" class="tocviewlink" pltdoc="x">String Ports</a></td></tr><tr><td align="right">12.1.7&nbsp;</td><td><a href="pipeports.html" class="tocviewlink" pltdoc="x">Pipes</a></td></tr><tr><td align="right">12.1.8&nbsp;</td><td><a href="portstructs.html" class="tocviewlink" pltdoc="x">Structures as Ports</a></td></tr><tr><td align="right">12.1.9&nbsp;</td><td><a href="customport.html" class="tocviewlink" pltdoc="x">Custom Ports</a></td></tr><tr><td align="right">12.1.10&nbsp;</td><td><a href="port-lib.html" class="tocviewlink" pltdoc="x">More Port Constructors, Procedures, and Events</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#(def._((lib._racket/private/base..rkt)._open-input-file))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">open-<wbr></wbr>input-<wbr></wbr>file</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/private/base..rkt)._open-output-file))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">open-<wbr></wbr>output-<wbr></wbr>file</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/private/base..rkt)._open-input-output-file))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">open-<wbr></wbr>input-<wbr></wbr>output-<wbr></wbr>file</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/private/base..rkt)._call-with-input-file))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">call-<wbr></wbr>with-<wbr></wbr>input-<wbr></wbr>file</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/private/base..rkt)._call-with-output-file))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">call-<wbr></wbr>with-<wbr></wbr>output-<wbr></wbr>file</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/private/base..rkt)._call-with-input-file*))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">call-<wbr></wbr>with-<wbr></wbr>input-<wbr></wbr>file*</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/private/base..rkt)._call-with-output-file*))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">call-<wbr></wbr>with-<wbr></wbr>output-<wbr></wbr>file*</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/private/base..rkt)._with-input-from-file))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">with-<wbr></wbr>input-<wbr></wbr>from-<wbr></wbr>file</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/private/base..rkt)._with-output-to-file))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">with-<wbr></wbr>output-<wbr></wbr>to-<wbr></wbr>file</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._port-file-identity))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">port-<wbr></wbr>file-<wbr></wbr>identity</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="linecol.html" title="backward to &quot;12.1.4 Counting Positions, Lines, and Columns&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="ports.html" title="up to &quot;12.1 Ports&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="stringport.html" title="forward to &quot;12.1.6 String Ports&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h5>12.1.5<tt>&nbsp;</tt><a name="(part._file-ports)"></a>File Ports</h5><p>A port created by <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-input-file))" class="RktValLink" pltdoc="x">open-input-file</a></span>, <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-output-file))" class="RktValLink" pltdoc="x">open-output-file</a></span>,
<span class="RktSym"><a href="subprocess.html#(def._((quote._~23~25kernel)._subprocess))" class="RktValLink" pltdoc="x">subprocess</a></span>, and related functions is a <a name="(tech._file._stream._port)"></a><span style="font-style: italic">file-stream
port</span>.  The initial input, output, and error ports in <span class="stt">racket</span>
are also file-stream ports. The <span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._file-stream-port~3f))" class="RktValLink" pltdoc="x">file-stream-port?</a></span>  predicate
recognizes file-stream ports.</p><p>When an input or output file-stream port is created, it is placed into
the management of the current custodian (see
<a href="custodians.html" pltdoc="x">Custodians</a>).</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._racket/private/base..rkt)._open-input-file))"></a><a name="(def._((lib._racket/private/base..rkt)._open-input-file))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-input-file))" class="RktValLink" pltdoc="x">open-input-file</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>[<span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVar">mode-flag</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mode-flag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">text</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span></td></tr></table></div><div class="SIntrapara">Opens the file specified by <span class="RktVar">path</span> for input. The
<span class="RktVar">mode-flag</span> argument specifies how the file&rsquo;s bytes are
translated on input:</div></p><ul><li><p><a name="(idx._(gentag._112._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">binary</span>  &ndash;  bytes are returned from the port
exactly as they are read from the file.</p></li><li><p><a name="(idx._(gentag._113._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">text</span>  &ndash;  return and linefeed bytes (10 and
13) as read from the file are filtered by the port in a platform
specific manner:</p><ul><li><p>Unix and Mac OS X: no filtering occurs.</p></li><li><p>Windows: a return-linefeed combination from a file is returned
by the port as a single linefeed; no filtering occurs for
return bytes that are not followed by a linefeed, or for a
linefeed that is not preceded by a return.</p></li></ul></li></ul><p>Under Windows, <span class="RktVal">'</span><span class="RktVal">text</span> mode works only with regular files;
attempting to use <span class="RktVal">'</span><span class="RktVal">text</span> with other kinds of files triggers an
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3afilesystem))" class="RktValLink" pltdoc="x">exn:fail:filesystem</a></span> exception.</p><p>Otherwise, the file specified by <span class="RktVar">path</span> need not be a regular
file. It might a device that is connected through the filesystem, such
as <span class="stt">"aux"</span> under Windows or <span class="stt">"/dev/null"</span> under Unix. In all
cases, the port is buffered by default.</p><p>The port produced by <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-input-file))" class="RktValLink" pltdoc="x">open-input-file</a></span> should be explicitly
closed, either though <span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._close-input-port))" class="RktValLink" pltdoc="x">close-input-port</a></span> or indirectly via
<span class="RktSym"><a href="custodians.html#(def._((quote._~23~25kernel)._custodian-shutdown-all))" class="RktValLink" pltdoc="x">custodian-shutdown-all</a></span>, to release the OS-level file
handle. The input port will not be closed automatically if it is
otherwise available for garbage collection (see
<a href="eval-model.html#(part._gc-model)" pltdoc="x">Garbage Collection</a>); a <a href="willexecutor.html#(tech._will)" class="techoutside" pltdoc="x"><span class="techinside">will</span></a> could be associated input port
to close it more automatically (see <a href="willexecutor.html" pltdoc="x">Wills and Executors</a>).</p><p>A <a href="pathutils.html#(tech._path)" class="techoutside" pltdoc="x"><span class="techinside">path</span></a> value that is the <a href="pathutils.html#(tech._cleanse)" class="techoutside" pltdoc="x"><span class="techinside">cleanse</span></a>d version of
<span class="RktVar">path</span> is used as the name of the opened port.</p><p><table cellspacing="0"><tr><td><p>Examples:</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._with-output-to-file))" class="RktValLink" pltdoc="x">with-output-to-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-file</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Writing.html#(def._((quote._~23~25kernel)._printf))" class="RktValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"hello world"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-input-file))" class="RktValLink" pltdoc="x">open-input-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-file</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td> </td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Byte_and_String_Input.html#(def._((quote._~23~25kernel)._read-string))" class="RktValLink" pltdoc="x">read-string</a></span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"hello world"</span></p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._close-input-port))" class="RktValLink" pltdoc="x">close-input-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="RktPn">)</span></td></tr></table></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._racket/private/base..rkt)._open-output-file))"></a><a name="(def._((lib._racket/private/base..rkt)._open-output-file))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-output-file))" class="RktValLink" pltdoc="x">open-output-file</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">path</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVar">mode-flag</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:exists</span><span class="hspace">&nbsp;</span><span class="RktVar">exists-flag</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._output-port~3f))" class="RktValLink" pltdoc="x">output-port?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mode-flag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">text</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">exists-flag</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">append</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">update</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">can-update</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">replace</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">truncate</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">must-truncate</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">truncate/replace</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVal">'</span><span class="RktVal">error</span></td></tr></table></td></tr></table></div><div class="SIntrapara">Opens the file specified by <span class="RktVar">path</span> for output. The
<span class="RktVar">mode-flag</span> argument specifies how bytes written to the port
are translated when written to the file:</div></p><ul><li><p><span class="RktVal">'</span><span class="RktVal">binary</span>  &ndash;  bytes are written to the file exactly
as written to the port.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">text</span>  &ndash;  under Windows, a linefeed byte (10) written
to the port is translated to a return-linefeed combination in the
file; no filtering occurs for returns.</p></li></ul><p>Under Windows, <span class="RktVal">'</span><span class="RktVal">text</span> mode works only with regular files;
attempting to use <span class="RktVal">'</span><span class="RktVal">text</span> with other kinds of files triggers an
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3afilesystem))" class="RktValLink" pltdoc="x">exn:fail:filesystem</a></span> exception.</p><p>The <span class="RktVar">exists-flag</span> argument specifies how to handle/require
files that already exist:</p><ul><li><p><a name="(idx._(gentag._114._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">error</span>  &ndash;  raise <span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3afilesystem))" class="RktValLink" pltdoc="x">exn:fail:filesystem</a></span>
if the file exists.</p></li><li><p><a name="(idx._(gentag._115._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">replace</span>  &ndash;  remove the old file, if it
exists, and write a new one.</p></li><li><p><a name="(idx._(gentag._116._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">truncate</span>  &ndash;  remove all old data, if the file
exists.</p></li><li><p><a name="(idx._(gentag._117._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">must-truncate</span>  &ndash;  remove all old data in an
existing file; if the file does not exist, the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3afilesystem))" class="RktValLink" pltdoc="x">exn:fail:filesystem</a></span> exception is raised.</p></li><li><p><a name="(idx._(gentag._118._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">truncate/replace</span>  &ndash;  try <span class="RktVal">'</span><span class="RktVal">truncate</span>;
if it fails (perhaps due to file permissions), try
<span class="RktVal">'</span><span class="RktVal">replace</span>.</p></li><li><p><a name="(idx._(gentag._119._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">update</span>  &ndash;  open an existing file without
truncating it; if the file does not exist, the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3afilesystem))" class="RktValLink" pltdoc="x">exn:fail:filesystem</a></span> exception is raised. Use <span class="RktSym"><a href="port-buffers.html#(def._((quote._~23~25kernel)._file-position))" class="RktValLink" pltdoc="x">file-position</a></span>
to change the current read/write position.</p></li><li><p><a name="(idx._(gentag._120._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">can-update</span>  &ndash;  open an existing file without
truncating it, or create the file if it does not exist.</p></li><li><p><a name="(idx._(gentag._121._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">append</span>  &ndash;  append to the end of the file,
whether it already exists or not; under Windows,
<span class="RktVal">'</span><span class="RktVal">append</span> is equivalent to <span class="RktVal">'</span><span class="RktVal">update</span>, except that
the file is not required to exist, and the file position is
immediately set to the end of the file after opening it.</p></li></ul><p>The file specified by <span class="RktVar">path</span> need not be a regular file. It
might a device that is connected through the filesystem, such as
<span class="stt">"aux"</span> under Windows or <span class="stt">"/dev/null"</span> under Unix. The output
port is block-buffered by default, unless the file corresponds to a
terminal, in which case is it line buffered bu default.</p><p>The port produced by <span class="RktSym">open-output-port</span> should be explicitly
closed, either though <span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._close-output-port))" class="RktValLink" pltdoc="x">close-output-port</a></span> or indirectly via
<span class="RktSym"><a href="custodians.html#(def._((quote._~23~25kernel)._custodian-shutdown-all))" class="RktValLink" pltdoc="x">custodian-shutdown-all</a></span>, to release the OS-level file
handle. The output port will not be closed automatically if it is
otherwise available for garbage collection (see
<a href="eval-model.html#(part._gc-model)" pltdoc="x">Garbage Collection</a>); a <a href="willexecutor.html#(tech._will)" class="techoutside" pltdoc="x"><span class="techinside">will</span></a> could be associated input port
to close it more automatically (see <a href="willexecutor.html" pltdoc="x">Wills and Executors</a>).</p><p>A <a href="pathutils.html#(tech._path)" class="techoutside" pltdoc="x"><span class="techinside">path</span></a> value that is the <a href="pathutils.html#(tech._cleanse)" class="techoutside" pltdoc="x"><span class="techinside">cleanse</span></a>d version of
<span class="RktVar">path</span> is used as the name of the opened port.</p><p><table cellspacing="0"><tr><td><p>Examples:</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-output-file))" class="RktValLink" pltdoc="x">open-output-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-file</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td> </td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Writing.html#(def._((quote._~23~25kernel)._write))" class="RktValLink" pltdoc="x">write</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"hello world"</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._close-output-port))" class="RktValLink" pltdoc="x">close-output-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr></table></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._racket/private/base..rkt)._open-input-output-file))"></a><a name="(def._((lib._racket/private/base..rkt)._open-input-output-file))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-input-output-file))" class="RktValLink" pltdoc="x">open-input-output-file</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">path</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVar">mode-flag</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:exists</span><span class="hspace">&nbsp;</span><span class="RktVar">exists-flag</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0"><tr><td><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._output-port~3f))" class="RktValLink" pltdoc="x">output-port?</a></span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mode-flag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">text</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">exists-flag</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">append</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">update</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">replace</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">truncate</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">truncate/replace</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVal">'</span><span class="RktVal">error</span></td></tr></table></td></tr></table></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-output-file))" class="RktValLink" pltdoc="x">open-output-file</a></span>, but producing two values: an input
port and an output port. The two ports are connected in that they
share the underlying file device. This procedure is intended for use
with special devices that can be opened by only one process, such as
<span class="stt">"COM1"</span> in Windows. For regular files, sharing the device can be
confusing. For example, using one port does not automatically flush
the other port&rsquo;s buffer, and reading or writing in one port moves the
file position (if any) for the other port. For regular files, use
separate <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-input-file))" class="RktValLink" pltdoc="x">open-input-file</a></span> and <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-output-file))" class="RktValLink" pltdoc="x">open-output-file</a></span> calls
to avoid confusion.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._racket/private/base..rkt)._call-with-input-file))"></a><a name="(def._((lib._racket/private/base..rkt)._call-with-input-file))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-input-file))" class="RktValLink" pltdoc="x">call-with-input-file</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">path</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVar">mode-flag</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mode-flag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">text</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span></td></tr></table></div><div class="SIntrapara">Calls <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-input-file))" class="RktValLink" pltdoc="x">open-input-file</a></span> with the <span class="RktVar">path</span> and
<span class="RktVar">mode-flag</span> arguments, and passes the resulting port
to <span class="RktVar">proc</span>. The result of <span class="RktVar">proc</span> is the result of the
<span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-input-file))" class="RktValLink" pltdoc="x">call-with-input-file</a></span> call, but the newly opened port is closed
when <span class="RktSym">thunk</span> return.</div></p><p><table cellspacing="0"><tr><td><p>Examples:</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._with-output-to-file))" class="RktValLink" pltdoc="x">with-output-to-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-file</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Writing.html#(def._((quote._~23~25kernel)._printf))" class="RktValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"text in a file"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-input-file))" class="RktValLink" pltdoc="x">call-with-input-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-file</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Byte_and_String_Input.html#(def._((quote._~23~25kernel)._read-string))" class="RktValLink" pltdoc="x">read-string</a></span><span class="hspace">&nbsp;</span><span class="RktVal">15</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"text in a file"</span></p></td></tr></table></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._racket/private/base..rkt)._call-with-output-file))"></a><a name="(def._((lib._racket/private/base..rkt)._call-with-output-file))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-output-file))" class="RktValLink" pltdoc="x">call-with-output-file</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">path</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVar">mode-flag</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:exists</span><span class="hspace">&nbsp;</span><span class="RktVar">exists-flag</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._output-port~3f))" class="RktValLink" pltdoc="x">output-port?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mode-flag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">text</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">exists-flag</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">append</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">update</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">replace</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">truncate</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">truncate/replace</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVal">'</span><span class="RktVal">error</span></td></tr></table></td></tr></table></div><div class="SIntrapara">Analogous to <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-input-file))" class="RktValLink" pltdoc="x">call-with-input-file</a></span>, but passing <span class="RktVar">path</span>,
<span class="RktVar">mode-flag</span> and <span class="RktVar">exists-flag</span> to
<span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-output-file))" class="RktValLink" pltdoc="x">open-output-file</a></span>.</div></p><p><table cellspacing="0"><tr><td><p>Examples:</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-output-file))" class="RktValLink" pltdoc="x">call-with-output-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-file</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Writing.html#(def._((quote._~23~25kernel)._write))" class="RktValLink" pltdoc="x">write</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">hello</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-input-file))" class="RktValLink" pltdoc="x">call-with-input-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-file</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Byte_and_String_Input.html#(def._((quote._~23~25kernel)._read-string))" class="RktValLink" pltdoc="x">read-string</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"hello"</span></p></td></tr></table></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._racket/private/base..rkt)._call-with-input-file*))"></a><a name="(def._((lib._racket/private/base..rkt)._call-with-input-file*))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-input-file*))" class="RktValLink" pltdoc="x">call-with-input-file*</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">path</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVar">mode-flag</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mode-flag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">text</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span></td></tr></table></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-input-file))" class="RktValLink" pltdoc="x">call-with-input-file</a></span>, but the newly opened port is
closed whenever control escapes the dynamic extent of the
<span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-input-file*))" class="RktValLink" pltdoc="x">call-with-input-file*</a></span> call, whether through <span class="RktVar">proc</span>&rsquo;s
return, a continuation application, or a prompt-based abort.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._racket/private/base..rkt)._call-with-output-file*))"></a><a name="(def._((lib._racket/private/base..rkt)._call-with-output-file*))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-output-file*))" class="RktValLink" pltdoc="x">call-with-output-file*</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">path</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVar">mode-flag</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:exists</span><span class="hspace">&nbsp;</span><span class="RktVar">exists-flag</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._output-port~3f))" class="RktValLink" pltdoc="x">output-port?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mode-flag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">text</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">exists-flag</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">append</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">update</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">replace</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">truncate</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">truncate/replace</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVal">'</span><span class="RktVal">error</span></td></tr></table></td></tr></table></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-output-file))" class="RktValLink" pltdoc="x">call-with-output-file</a></span>, but the newly opened port is
closed whenever control escapes the dynamic extent of the
<span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-output-file*))" class="RktValLink" pltdoc="x">call-with-output-file*</a></span> call, whether through <span class="RktVar">proc</span>&rsquo;s
return, a continuation application, or a prompt-based abort.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._racket/private/base..rkt)._with-input-from-file))"></a><a name="(def._((lib._racket/private/base..rkt)._with-input-from-file))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._with-input-from-file))" class="RktValLink" pltdoc="x">with-input-from-file</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">path</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">thunk</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVar">mode-flag</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mode-flag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">text</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span></td></tr></table></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-input-file*))" class="RktValLink" pltdoc="x">call-with-input-file*</a></span>, but instead of passing the newly
opened port to the given procedure argument, the port is installed as
the current input port (see <span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._current-input-port))" class="RktValLink" pltdoc="x">current-input-port</a></span>) using
<span class="RktSym"><a href="parameters.html#(form._((lib._racket/private/more-scheme..rkt)._parameterize))" class="RktStxLink" pltdoc="x">parameterize</a></span> around the call to <span class="RktVar">thunk</span>.</div></p><p><table cellspacing="0"><tr><td><p>Examples:</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._with-output-to-file))" class="RktValLink" pltdoc="x">with-output-to-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-file</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Writing.html#(def._((quote._~23~25kernel)._printf))" class="RktValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"hello"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._with-input-from-file))" class="RktValLink" pltdoc="x">with-input-from-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-file</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Byte_and_String_Input.html#(def._((quote._~23~25kernel)._read-string))" class="RktValLink" pltdoc="x">read-string</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"hello"</span></p></td></tr></table></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._racket/private/base..rkt)._with-output-to-file))"></a><a name="(def._((lib._racket/private/base..rkt)._with-output-to-file))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._with-output-to-file))" class="RktValLink" pltdoc="x">with-output-to-file</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">path</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">thunk</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVar">mode-flag</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:exists</span><span class="hspace">&nbsp;</span><span class="RktVar">exists-flag</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mode-flag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">text</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">binary</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">exists-flag</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">append</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">update</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">replace</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">truncate</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">truncate/replace</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVal">'</span><span class="RktVal">error</span></td></tr></table></td></tr></table></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._call-with-output-file*))" class="RktValLink" pltdoc="x">call-with-output-file*</a></span>, but instead of passing the newly
opened port to the given procedure argument, the port is installed as
the current output port (see <span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._current-output-port))" class="RktValLink" pltdoc="x">current-output-port</a></span>) using
<span class="RktSym"><a href="parameters.html#(form._((lib._racket/private/more-scheme..rkt)._parameterize))" class="RktStxLink" pltdoc="x">parameterize</a></span> around the call to <span class="RktVar">thunk</span>.</div></p><p><table cellspacing="0"><tr><td><p>Examples:</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._with-output-to-file))" class="RktValLink" pltdoc="x">with-output-to-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-file</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Writing.html#(def._((quote._~23~25kernel)._printf))" class="RktValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"hello"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._with-input-from-file))" class="RktValLink" pltdoc="x">with-input-from-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-file</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Byte_and_String_Input.html#(def._((quote._~23~25kernel)._read-string))" class="RktValLink" pltdoc="x">read-string</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"hello"</span></p></td></tr></table></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._port-file-identity))"></a><a name="(def._((quote._~23~25kernel)._port-file-identity))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._port-file-identity))" class="RktValLink" pltdoc="x">port-file-identity</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">port</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-positive-integer~3f))" class="RktValLink" pltdoc="x">exact-positive-integer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">port</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._file-stream-port~3f))" class="RktValLink" pltdoc="x">file-stream-port?</a></span></td></tr></table></div><div class="SIntrapara"><a name="(idx._(gentag._122._(lib._scribblings/reference/reference..scrbl)))"></a>Returns a number that represents
the identity of the device and file read or written by
<span class="RktVar">port</span>. For two ports whose open times overlap, the
result of <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._port-file-identity))" class="RktValLink" pltdoc="x">port-file-identity</a></span> is the same for both ports if
and only if the ports access the same device and file. For ports whose
open times do not overlap, no guarantee can be provided for the port
identities (even if the ports actually access the same file) &ndash; except
as can be inferred through relationships with other ports. If
<span class="RktVar">port</span> is closed, the <span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail))" class="RktValLink" pltdoc="x">exn:fail</a></span> exception is raised.  Under
Windows 95, 98, and Me, if <span class="RktVar">port</span> is connected to a
pipe instead of a file, the <span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3afilesystem))" class="RktValLink" pltdoc="x">exn:fail:filesystem</a></span> exception is raised.</div></p><p><table cellspacing="0"><tr><td><p>Examples:</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">file1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-output-file))" class="RktValLink" pltdoc="x">open-output-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-file</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td> </td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">file2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._open-output-file))" class="RktValLink" pltdoc="x">open-output-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">some-other-file</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td> </td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._port-file-identity))" class="RktValLink" pltdoc="x">port-file-identity</a></span><span class="hspace">&nbsp;</span><span class="RktSym">file1</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">10964307200</span></p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._port-file-identity))" class="RktValLink" pltdoc="x">port-file-identity</a></span><span class="hspace">&nbsp;</span><span class="RktSym">file2</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">10964403968</span></p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._close-output-port))" class="RktValLink" pltdoc="x">close-output-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">file1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._close-output-port))" class="RktValLink" pltdoc="x">close-output-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">file2</span><span class="RktPn">)</span></td></tr></table></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="linecol.html" title="backward to &quot;12.1.4 Counting Positions, Lines, and Columns&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="ports.html" title="up to &quot;12.1 Ports&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="stringport.html" title="forward to &quot;12.1.6 String Ports&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>