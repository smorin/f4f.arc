<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>2.4&nbsp;Porting World Programs to Universe</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Teachpacks</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="htdp.html" class="tocviewlink" pltdoc="x">Ht<span class="mywbr"> </span>DP Teachpacks</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="2htdp2htdp.html" class="tocviewselflink" pltdoc="x">Ht<span class="mywbr"> </span>DP/<span class="mywbr"> </span>2e Teachpacks</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>2&nbsp;</td><td><a href="2htdp2htdp.html" class="tocviewlink" pltdoc="x">Ht<span class="mywbr"> </span>DP/<span class="mywbr"> </span>2e Teachpacks</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="2htdpbatch-io.html" class="tocviewlink" pltdoc="x">Batch Input/<span class="mywbr"> </span>Output:<span class="mywbr"> </span> <span class="stt">"batch-<wbr></wbr>io.ss"</span><a name="(idx._(gentag._16._(lib._teachpack/teachpack..scrbl)._2htdp))"></a></a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="2htdpimage.html" class="tocviewlink" pltdoc="x">Images:<span class="mywbr"> </span> <span class="stt">"image.ss"</span><a name="(idx._(gentag._17._(lib._teachpack/teachpack..scrbl)._2htdp))"></a></a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="2htdpuniverse.html" class="tocviewlink" pltdoc="x">Worlds and the Universe:<span class="mywbr"> </span> <span class="stt">"universe.ss"</span><a name="(idx._(gentag._18._(lib._teachpack/teachpack..scrbl)._2htdp))"></a></a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Porting World Programs to Universe</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>2.4&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Porting World Programs to Universe</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.4.1&nbsp;</td><td><a href="#(part._.The_.World_is_.Not_.Enough)" class="tocviewlink" pltdoc="x">The World is Not Enough</a></td></tr><tr><td align="right">2.4.2&nbsp;</td><td><a href="#(part._.Porting_.World_.Programs)" class="tocviewlink" pltdoc="x">Porting World Programs</a></td></tr><tr><td align="right">2.4.3&nbsp;</td><td><a href="#(part._.Porting_.Image_.Programs)" class="tocviewlink" pltdoc="x">Porting Image Programs</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.4.1<tt>&nbsp;</tt></span><a href="#(part._.The_.World_is_.Not_.Enough)" class="tocsubseclink" pltdoc="x">The World is Not Enough</a></td></tr><tr><td><span class="tocsublinknumber">2.4.2<tt>&nbsp;</tt></span><a href="#(part._.Porting_.World_.Programs)" class="tocsubseclink" pltdoc="x">Porting World Programs</a></td></tr><tr><td><span class="tocsublinknumber">2.4.3<tt>&nbsp;</tt></span><a href="#(part._.Porting_.Image_.Programs)" class="tocsubseclink" pltdoc="x">Porting Image Programs</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="2htdpuniverse.html" title="backward to &quot;2.3 Worlds and the Universe: &quot;universe.ss&quot;&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="2htdp2htdp.html" title="up to &quot;2 HtDP/2e Teachpacks&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="htdp.html" title="forward to &quot;1 HtDP Teachpacks&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>2.4<tt>&nbsp;</tt><a name="(part._htdp-port)"></a>Porting World Programs to Universe</h4><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Matthias Felleisen, Robby Findler</p></span></div><h5>2.4.1<tt>&nbsp;</tt><a name="(part._.The_.World_is_.Not_.Enough)"></a>The World is Not Enough</h5><p>With the June 2009 release, we started deprecating the world teachpack; instead
 we recommended the use of the universe teachpack. With the January 2010 release,
 we are also introducing a new image teachpack and, in support of this second
 teachpack, we have separated out the image functionality from the
 functionality for world programs.</p><p><div class="SIntrapara">In this document, we explain how to port programs that assume the old world
 teachpack into this new setting, one step at a time. Most importantly,
 programs must now import <span style="font-style: italic">two</span> teachpacks insteead of one:
</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><p>World Style</p></td><td><p>Universe Style</p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="world.html" class="RktModLink" pltdoc="x"><span class="RktSym">htdp/world</span></a><span class="RktPn">)</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="2htdpuniverse.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/universe</span></a><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="image.html" class="RktModLink" pltdoc="x"><span class="RktSym">htdp/image</span></a><span class="RktPn">)</span></td></tr></table></td></tr></table></div><div class="SIntrapara">The table shows the old style on the left and the new style on the
 right. If your programs imported teachpacks via the drscheme teachpack
 menu, we recommend that you use the <span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span> form from now on;
 alternatively, you use the drscheme menu <span style="font-style: italic">twice</span> to import the
 functions from two teachpacks.</div></p><p>In the next section, we first explain how to port world programs so that
 they use the universe teachpack and the <span style="font-style: italic">old</span> image teachpack. In the
 section after that, we list suggestions for changing programs so that they
 no longer rely on the old image functionality but the new one.</p><p>In order to distinguish between the various pieces of functionality, we
 uniformly prefix old functionality with "htdp:" and new functionality with
 "2htdp:". There is no need to use these prefixes in your programs of
 course.</p><h5>2.4.2<tt>&nbsp;</tt><a name="(part._.Porting_.World_.Programs)"></a>Porting World Programs</h5><p><div class="SIntrapara">Here is the first program from the documentation for the world teachpack:
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="world.html" class="RktModLink" pltdoc="x"><span class="RktSym">htdp/world</span></a><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Number -&gt; Scene </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">create-UFO-scene</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._place-image))" class="RktValLink" pltdoc="x">htdp:place-image</a></span><span class="hspace">&nbsp;</span><span class="RktSym">UFO</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">50</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._empty-scene))" class="RktValLink" pltdoc="x">htdp:empty-scene</a></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Scene </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">UFO</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._overlay))" class="RktValLink" pltdoc="x">htdp:overlay</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._circle))" class="RktValLink" pltdoc="x">htdp:circle</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">solid</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">htdp:rectangle</a></span><span class="hspace">&nbsp;</span><span class="RktVal">40</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">solid</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> &ndash; </span><span class="RktCmt"> run program run </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="world.html#(def._((lib._htdp/world..rkt)._big-bang))" class="RktValLink" pltdoc="x">htdp:big-bang</a></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">/1</span><span class="hspace">&nbsp;</span><span class="RktVal">28</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="world.html#(def._((lib._htdp/world..rkt)._on-tick-event))" class="RktValLink" pltdoc="x">htdp:on-tick-event</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._add1))" class="RktValLink" pltdoc="x">add1</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="world.html#(def._((lib._htdp/world..rkt)._on-redraw))" class="RktValLink" pltdoc="x">htdp:on-redraw</a></span><span class="hspace">&nbsp;</span><span class="RktSym">create-UFO-scene</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">This program defines a function for placing a <span class="RktSym">UFO</span> into a 100 by
 100 scene, where <span class="RktSym">UFO</span> is a defined image. The world program itself
 consists of three lines:
</div><div class="SIntrapara"><ul><li><p>the first one creates the 100 by 100 scene, specifies a rate of 28
images per second, and <span class="RktVal">0</span> as the initial world description;</p></li><li><p>the second one says that for each clock tick, the world (a number) is
increased by <span class="RktVal">1</span>; and</p></li><li><p>the last line tells drscheme to use <span class="RktSym">create-UFO-scene</span> as the
function that renders the current world as a scene.</p></li></ul></div></p><p><div class="SIntrapara">Let us now convert this program into the universe setting, step by
 step, staring with the <span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span> specification, which is converted
 as above:
</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><p>World Style</p></td><td><p>Universe Style</p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="world.html" class="RktModLink" pltdoc="x"><span class="RktSym">htdp/world</span></a><span class="RktPn">)</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="2htdpuniverse.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/universe</span></a><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="image.html" class="RktModLink" pltdoc="x"><span class="RktSym">htdp/image</span></a><span class="RktPn">)</span></td></tr></table></td></tr></table></div></p><p><div class="SIntrapara">The function that renders the world as a scene remains the same:
</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><p>World Style</p></td><td><p>Universe Style</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Number -&gt; Scene </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">create-UFO-scene</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._place-image))" class="RktValLink" pltdoc="x">htdp:place-image</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">UFO</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">50</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._empty-scene))" class="RktValLink" pltdoc="x">htdp:empty-scene</a></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Number -&gt; Scene </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">create-UFO-scene</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._place-image))" class="RktValLink" pltdoc="x">htdp:place-image</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">UFO</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">50</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._empty-scene))" class="RktValLink" pltdoc="x">htdp:empty-scene</a></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></div></p><p><div class="SIntrapara">For the image constant we switch from symbols to strings:
</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><p>World Style</p></td><td><p>Universe Style</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Scene </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">UFO</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._overlay))" class="RktValLink" pltdoc="x">htdp:overlay</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._circle))" class="RktValLink" pltdoc="x">htdp:circle</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">solid</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">htdp:rectangle</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">40</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">solid</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Scene </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">UFO</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._overlay))" class="RktValLink" pltdoc="x">htdp:overlay</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._circle))" class="RktValLink" pltdoc="x">htdp:circle</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">htdp:rectangle</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">40</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></div><div class="SIntrapara">Strictly speaking, this isn&rsquo;t necessary, but we intend to replace symbols
 with strings whenever possible because strings are more common than
 symbols.</div></p><p><div class="SIntrapara">The most important change concerns the lines that launch the world program:
</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><p>World Style</p></td><td><p>Universe Style</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="world.html#(def._((lib._htdp/world..rkt)._big-bang))" class="RktValLink" pltdoc="x">htdp:big-bang</a></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">/1</span><span class="hspace">&nbsp;</span><span class="RktVal">28</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="world.html#(def._((lib._htdp/world..rkt)._on-tick-event))" class="RktValLink" pltdoc="x">htdp:on-tick-event</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._add1))" class="RktValLink" pltdoc="x">add1</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="world.html#(def._((lib._htdp/world..rkt)._on-redraw))" class="RktValLink" pltdoc="x">htdp:on-redraw</a></span><span class="hspace">&nbsp;</span><span class="RktSym">create-UFO-scene</span><span class="RktPn">)</span></td></tr></table></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="2htdpuniverse.html#(form._((lib._2htdp/universe..rkt)._big-bang))" class="RktStxLink" pltdoc="x">2htdp:big-bang</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="2htdpuniverse.html#(form._((lib._2htdp/universe..rkt)._on-tick))" class="RktStxLink" pltdoc="x">on-tick</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._add1))" class="RktValLink" pltdoc="x">add1</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="2htdpuniverse.html#(form._((lib._2htdp/universe..rkt)._on-draw))" class="RktStxLink" pltdoc="x">on-draw</a></span><span class="hspace">&nbsp;</span><span class="RktSym">create-UFO-scene</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></div><div class="SIntrapara">They are turned into a single expression that comes with as many clauses
 as there are lines in the old program. As you can see, the
 <span class="RktSym">big-bang</span> expression from the universe teachpack no longer
 requires the specification of the size of the scene or the rate at which
 the clock ticks (though it is possible to supply the clock rate if the default
 is not satisfactory).
 Furthermore, the names of the clauses are similar to
 the old names but shorter.</div></p><p>The other big change concerns key event handling and mouse event
 handling. The respective handlers no longer accept symbols and chars but
 strings only. Here is the first key event handler from the documentation
 of the world teachpack:</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><p>World Style</p></td><td><p>Universe Style</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">change</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">key=?</span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">left</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-go</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">-DELTA</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">key=?</span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">right</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-go</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">+DELTA</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/characters.html#(def._((quote._~23~25kernel)._char~3f))" class="RktValLink" pltdoc="x">char?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">w</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">key=?</span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">up</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-go</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">-DELTA</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">key=?</span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">down</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-go</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">+DELTA</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">w</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">change</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">key=?</span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="hspace">&nbsp;</span><span class="RktVal">"left"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-go</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">-DELTA</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">key=?</span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="hspace">&nbsp;</span><span class="RktVal">"right"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-go</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">+DELTA</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3d))" class="RktValLink" pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string-length))" class="RktValLink" pltdoc="x">string-length</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">w</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">key=?</span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="hspace">&nbsp;</span><span class="RktVal">"up"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-go</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">-DELTA</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">key=?</span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="hspace">&nbsp;</span><span class="RktVal">"down"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-go</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">+DELTA</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">w</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></div><div class="SIntrapara">Note how the <span class="RktSym"><a href="../reference/characters.html#(def._((quote._~23~25kernel)._char~3f))" class="RktValLink" pltdoc="x">char?</a></span> clause changed. Since all chars are now
 represented as strings containing one &ldquo;letter&rdquo;, the program on the right
 just checks the length of the string. Otherwise, we simply change all
 symbols into strings.</div></p><p>If you ever recorded your programs&rsquo; work via an animated gif, you can still
 do so. Instead of adding a fifth argument to <span class="RktSym">big-bang</span>, however,
 you will need to add a clause of the shape <span class="RktPn">(</span><span class="RktSym">record?</span><span class="stt"> </span><span class="RktSym">x</span><span class="RktPn">)</span>.</p><p>Finally, the universe teachpack implements a richer functionality than the
 world teachpack.</p><h5>2.4.3<tt>&nbsp;</tt><a name="(part._.Porting_.Image_.Programs)"></a>Porting Image Programs</h5><p>The universe library also comes with a new image library, <a href="2htdpimage.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/image</span></a>.
Using the old image
library still works fine with <a href="2htdpuniverse.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/universe</span></a>, but the
new image library provides a number of improvements, including faster
image comparison (especially useful in <span class="RktSym"><a href="../htdp-langs/Test_Cases.html#(form._((lib._lang/htdp-beginner..rkt)._check-expect))" class="RktStxLink" pltdoc="x">check-expect</a></span> expressions),
rotating images, scaling images, curves, a number of new polygon shapes,
and more control over line drawing.</p><p>To use the new image library in isloation:</p><p><table cellspacing="0" class="boxed"><tr><td><p>World Style</p></td><td><p>Universe Style</p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="image.html" class="RktModLink" pltdoc="x"><span class="RktSym">htdp/image</span></a><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="2htdpimage.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/image</span></a><span class="RktPn">)</span></td></tr></table></p><p>and to use the new image library with the universe teachpack:</p><p><table cellspacing="0" class="boxed"><tr><td><p>World Style</p></td><td><p>Universe Style</p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="world.html" class="RktModLink" pltdoc="x"><span class="RktSym">htdp/world</span></a><span class="RktPn">)</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="2htdpuniverse.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/universe</span></a><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="2htdpimage.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/image</span></a><span class="RktPn">)</span></td></tr></table></td></tr></table></p><p><span style="font-weight: bold">Overlay vs Underlay</span></p><p>The <span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._overlay))" class="RktValLink" pltdoc="x">htdp:overlay</a></span> function places its first argument
under its second (and subsequent) arguments and so in
<a href="2htdpimage.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/image</span></a>, we decided to call that
function <span class="RktSym"><a href="2htdpimage.html#(def._((lib._2htdp/image..rkt)._underlay))" class="RktValLink" pltdoc="x">2htdp:underlay</a></span>.</p><p><table cellspacing="0" class="boxed"><tr><td><p>World Style</p></td><td><p>Universe Style</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._overlay))" class="RktValLink" pltdoc="x">htdp:overlay</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">htdp:rectangle</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">htdp:rectangle</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"blue"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="2htdpimage.html#(def._((lib._2htdp/image..rkt)._underlay))" class="RktValLink" pltdoc="x">2htdp:underlay</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="2htdpimage.html#(def._((lib._2htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">2htdp:rectangle</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="2htdpimage.html#(def._((lib._2htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">2htdp:rectangle</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"blue"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></p><p><span style="font-weight: bold">No more pinholes</span></p><p>The concept of pinholes from <a href="image.html" class="RktModLink" pltdoc="x"><span class="RktSym">htdp/image</span></a>
has no correspondance in <a href="2htdpimage.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/image</span></a>
(we do expect to bring back pinholes in <a href="2htdpimage.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/image</span></a>
eventually, but they will not be as pervasive as they are
in <span class="RktSym">htdp/image</span>).</p><p>Instead of
a special position in the image that overlay operations
are sensitive to,
<a href="2htdpimage.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/image</span></a> has a family of overlay operations,
that overlay images based on their centers or their edges.</p><p>Since the default position of the pinhole is in the center
for most images and the default for overlaying and underlaying
images in <span class="RktSym">2htdp/image</span> is based on the center,
simple examples (like the one above) behave the same
in both libraries.</p><p>But, consider this expression that overlays two images on
their upper-left corners, written using both libraries.</p><p><table cellspacing="0" class="boxed"><tr><td><p>World Style</p></td><td><p>Universe Style</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._overlay))" class="RktValLink" pltdoc="x">htdp:overlay</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._put-pinhole))" class="RktValLink" pltdoc="x">htdp:put-pinhole</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">htdp:rectangle</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._put-pinhole))" class="RktValLink" pltdoc="x">htdp:put-pinhole</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">htdp:rectangle</a></span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"blue"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="2htdpimage.html#(def._((lib._2htdp/image..rkt)._underlay/align))" class="RktValLink" pltdoc="x">2htdp:underlay/align</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktVal">"left"</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktVal">"top"</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="2htdpimage.html#(def._((lib._2htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">2htdp:rectangle</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="2htdpimage.html#(def._((lib._2htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">2htdp:rectangle</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"blue"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></p><p>In the <a href="2htdpimage.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/image</span></a> version, the programmer
uses <span class="RktSym"><a href="2htdpimage.html#(def._((lib._2htdp/image..rkt)._underlay/align))" class="RktValLink" pltdoc="x">2htdp:underlay/align</a></span> to specify where
the images should be lined up, instead of using the pinhole.</p><p><span style="font-weight: bold">Outlines in different places</span></p><p>The outline style shapes are now shifted by one pixel for <a href="2htdpimage.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/image</span></a>
images as compared to <a href="image.html" class="RktModLink" pltdoc="x"><span class="RktSym">htdp/image</span></a>.
This means that these two rectangles draw the same sets of pixels.</p><p><table cellspacing="0" class="boxed"><tr><td><p>World Style</p></td><td><p>Universe Style</p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">htdp:rectangle</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;</span><span class="RktVal">"outline"</span><span class="hspace">&nbsp;</span><span class="RktVal">"black"</span><span class="RktPn">)</span></td></tr></table></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="2htdpimage.html#(def._((lib._2htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">2htdp:rectangle</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">"outline"</span><span class="hspace">&nbsp;</span><span class="RktVal">"black"</span><span class="RktPn">)</span></td></tr></table></td></tr></table></p><p>See also <a href="2htdpimage.html#(part._nitty-gritty)" pltdoc="x">The nitty gritty of pixels, pens, and lines</a>.</p><p><span style="font-weight: bold">Star changed</span></p><p>The <span class="RktSym"><a href="2htdpimage.html#(def._((lib._2htdp/image..rkt)._star))" class="RktValLink" pltdoc="x">2htdp:star</a></span> function is a completely different
function from <span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._star))" class="RktValLink" pltdoc="x">htdp:star</a></span>. Both produce stars based,
on polygons, but <span class="RktSym"><a href="2htdpimage.html#(def._((lib._2htdp/image..rkt)._star))" class="RktValLink" pltdoc="x">2htdp:star</a></span> always produces a five-pointed
star. See also <span class="RktSym"><a href="2htdpimage.html#(def._((lib._2htdp/image..rkt)._star-polygon))" class="RktValLink" pltdoc="x">2htdp:star-polygon</a></span> for more general star
shapes.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="2htdpuniverse.html" title="backward to &quot;2.3 Worlds and the Universe: &quot;universe.ss&quot;&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="2htdp2htdp.html" title="up to &quot;2 HtDP/2e Teachpacks&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="htdp.html" title="forward to &quot;1 HtDP Teachpacks&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>