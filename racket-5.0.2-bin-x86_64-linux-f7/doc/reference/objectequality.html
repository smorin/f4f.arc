<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>5.8&nbsp;Object Equality and Hashing</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="extras.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">Reference</span>:<span class="mywbr"> </span> Racket</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="model.html" class="tocviewlink" pltdoc="x">Language Model</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="syntax.html" class="tocviewlink" pltdoc="x">Syntactic Forms</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="data.html" class="tocviewlink" pltdoc="x">Datatypes</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="structures.html" class="tocviewlink" pltdoc="x">Structures</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="mzlib_class.html" class="tocviewselflink" pltdoc="x">Classes and Objects</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="mzlib_unit.html" class="tocviewlink" pltdoc="x">Units</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="contracts.html" class="tocviewlink" pltdoc="x">Contracts</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="match.html" class="tocviewlink" pltdoc="x">Pattern Matching</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="control.html" class="tocviewlink" pltdoc="x">Control Flow</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="concurrency.html" class="tocviewlink" pltdoc="x">Concurrency</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Macros.html" class="tocviewlink" pltdoc="x">Macros</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="input-and-output.html" class="tocviewlink" pltdoc="x">Input and Output</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="security.html" class="tocviewlink" pltdoc="x">Reflection and Security</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="os.html" class="tocviewlink" pltdoc="x">Operating System</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="memory.html" class="tocviewlink" pltdoc="x">Memory Management</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="unsafe.html" class="tocviewlink" pltdoc="x">Unsafe Operations</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="running.html" class="tocviewlink" pltdoc="x">Running Racket</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" pltdoc="x">Bibliography</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>5&nbsp;</td><td><a href="mzlib_class.html" class="tocviewlink" pltdoc="x">Classes and Objects</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.1&nbsp;</td><td><a href="createinterface.html" class="tocviewlink" pltdoc="x">Creating Interfaces</a></td></tr><tr><td align="right">5.2&nbsp;</td><td><a href="createclass.html" class="tocviewlink" pltdoc="x">Creating Classes</a></td></tr><tr><td align="right">5.3&nbsp;</td><td><a href="objcreation.html" class="tocviewlink" pltdoc="x">Creating Objects</a></td></tr><tr><td align="right">5.4&nbsp;</td><td><a href="ivaraccess.html" class="tocviewlink" pltdoc="x">Field and Method Access</a></td></tr><tr><td align="right">5.5&nbsp;</td><td><a href="mixins.html" class="tocviewlink" pltdoc="x">Mixins</a></td></tr><tr><td align="right">5.6&nbsp;</td><td><a href="trait.html" class="tocviewlink" pltdoc="x">Traits</a></td></tr><tr><td align="right">5.7&nbsp;</td><td><a href="Object_and_Class_Contracts.html" class="tocviewlink" pltdoc="x">Object and Class Contracts</a></td></tr><tr><td align="right">5.8&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Object Equality and Hashing</a></td></tr><tr><td align="right">5.9&nbsp;</td><td><a href="objectserialize.html" class="tocviewlink" pltdoc="x">Object Serialization</a></td></tr><tr><td align="right">5.10&nbsp;</td><td><a href="objectprinting.html" class="tocviewlink" pltdoc="x">Object Printing</a></td></tr><tr><td align="right">5.11&nbsp;</td><td><a href="objectutils.html" class="tocviewlink" pltdoc="x">Object, Class, and Interface Utilities</a></td></tr><tr><td align="right">5.12&nbsp;</td><td><a href="Surrogates.html" class="tocviewlink" pltdoc="x">Surrogates</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#(def._((lib._racket/private/class-internal..rkt)._equal~3c~25~3e))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/class, racket"><span class="RktSym"><span class="RktValLink">equal&lt;%&gt;</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="Object_and_Class_Contracts.html" title="backward to &quot;5.7 Object and Class Contracts&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="mzlib_class.html" title="up to &quot;5 Classes and Objects&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="objectserialize.html" title="forward to &quot;5.9 Object Serialization&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>5.8<tt>&nbsp;</tt><a name="(part._objectequality)"></a>Object Equality and Hashing</h4><p>But default, objects that are instances of different classes or that
are instances of a non-transparent class are <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span> only if
they are <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span>. Like transparent structures, two objects that
are instances of the same transparent class (i.e., every superclass of
the class has <span class="RktVal">#f</span> as its inspector) are <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span> when
their field values are <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span>.</p><p>To customize the way that a class instance is compared to other
instances by <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span>, implement the <span class="RktSym"><a href="#(def._((lib._racket/private/class-internal..rkt)._equal~3c~25~3e))" class="RktValLink" pltdoc="x">equal&lt;%&gt;</a></span>
interface.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><a name="(dep._((lib._racket/private/class-internal..rkt)._equal~3c~25~3e))"></a><a name="(def._((lib._racket/private/class-internal..rkt)._equal~3c~25~3e))"></a><span title="Provided from: racket/class, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/class-internal..rkt)._equal~3c~25~3e))" class="RktValLink" pltdoc="x">equal&lt;%&gt;</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="objectutils.html#(def._((lib._racket/private/class-internal..rkt)._interface~3f))" class="RktValLink" pltdoc="x">interface?</a></span></td></tr></table></div><div class="SIntrapara">The <span class="RktSym"><a href="#(def._((lib._racket/private/class-internal..rkt)._equal~3c~25~3e))" class="RktValLink" pltdoc="x">equal&lt;%&gt;</a></span> interface includes three methods, which are
analogous to the functions provided for a structure type with
<span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._prop~3aequal+hash))" class="RktValLink" pltdoc="x">prop:equal+hash</a></span>:</div><div class="SIntrapara"><ul><li><p><span class="RktSym">equal-to?</span>  &ndash;  Takes two arguments. The first argument
is an object that is an instance of the same class (or a subclass
that does not re-declare its implementation of <span class="RktSym"><a href="#(def._((lib._racket/private/class-internal..rkt)._equal~3c~25~3e))" class="RktValLink" pltdoc="x">equal&lt;%&gt;</a></span>)
and that is being compared to the target object. The second argument
is a <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span>-like procedure of two arguments that should be
used for recursive equality testing. The result should be a true
value if the object and the first argument of the method are equal,
<span class="RktVal">#f</span> otherwise.</p></li><li><p><span class="RktSym">equal-hash-code-of</span>  &ndash;  Takes one argument, which is a
procedure of one argument that should be used for recursive hash-code
computation. The result should be an exact integer representing the
target object&rsquo;s hash code.</p></li><li><p><span class="RktSym">equal-secondary-hash-code-of</span>  &ndash;  Takes one argument,
which is a procedure of one argument that should be used for
recursive hash-code computation. The result should be an exact
integer representing the target object&rsquo;s secondary hash code.</p></li></ul></div><div class="SIntrapara">The <span class="RktSym"><a href="#(def._((lib._racket/private/class-internal..rkt)._equal~3c~25~3e))" class="RktValLink" pltdoc="x">equal&lt;%&gt;</a></span> interface is unusual in that declaring the
implementation of the interface is different from inheriting the
interface. Two objects can be equal only if they are instances of
classes whose most specific ancestor to explicitly implement
<span class="RktSym"><a href="#(def._((lib._racket/private/class-internal..rkt)._equal~3c~25~3e))" class="RktValLink" pltdoc="x">equal&lt;%&gt;</a></span> is the same ancestor.</div><div class="SIntrapara">See <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._prop~3aequal+hash))" class="RktValLink" pltdoc="x">prop:equal+hash</a></span> for more information on equality
comparisons and hash codes. The <span class="RktSym"><a href="#(def._((lib._racket/private/class-internal..rkt)._equal~3c~25~3e))" class="RktValLink" pltdoc="x">equal&lt;%&gt;</a></span> interface is
implemented with <span class="RktSym"><a href="createinterface.html#(form._((lib._racket/private/class-internal..rkt)._interface*))" class="RktStxLink" pltdoc="x">interface*</a></span> and <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._prop~3aequal+hash))" class="RktValLink" pltdoc="x">prop:equal+hash</a></span>.</div><div class="SIntrapara"><blockquote class="leftindent"></blockquote></div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="Object_and_Class_Contracts.html" title="backward to &quot;5.7 Object and Class Contracts&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="mzlib_class.html" title="up to &quot;5 Classes and Objects&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="objectserialize.html" title="forward to &quot;5.9 Object Serialization&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>