<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>1.1&nbsp;Evaluation Model</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="extras.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">Reference</span>:<span class="mywbr"> </span> Racket</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="model.html" class="tocviewselflink" pltdoc="x">Language Model</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="syntax.html" class="tocviewlink" pltdoc="x">Syntactic Forms</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="data.html" class="tocviewlink" pltdoc="x">Datatypes</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="structures.html" class="tocviewlink" pltdoc="x">Structures</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="mzlib_class.html" class="tocviewlink" pltdoc="x">Classes and Objects</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="mzlib_unit.html" class="tocviewlink" pltdoc="x">Units</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="contracts.html" class="tocviewlink" pltdoc="x">Contracts</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="match.html" class="tocviewlink" pltdoc="x">Pattern Matching</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="control.html" class="tocviewlink" pltdoc="x">Control Flow</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="concurrency.html" class="tocviewlink" pltdoc="x">Concurrency</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Macros.html" class="tocviewlink" pltdoc="x">Macros</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="input-and-output.html" class="tocviewlink" pltdoc="x">Input and Output</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="security.html" class="tocviewlink" pltdoc="x">Reflection and Security</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="os.html" class="tocviewlink" pltdoc="x">Operating System</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="memory.html" class="tocviewlink" pltdoc="x">Memory Management</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="unsafe.html" class="tocviewlink" pltdoc="x">Unsafe Operations</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="running.html" class="tocviewlink" pltdoc="x">Running Racket</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" pltdoc="x">Bibliography</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>1&nbsp;</td><td><a href="model.html" class="tocviewlink" pltdoc="x">Language Model</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Evaluation Model</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="syntax-model.html" class="tocviewlink" pltdoc="x">Syntax Model</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>1.1&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Evaluation Model</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1.1&nbsp;</td><td><a href="#(part._cont-model)" class="tocviewlink" pltdoc="x">Sub-<wbr></wbr>expression Evaluation and Continuations</a></td></tr><tr><td align="right">1.1.2&nbsp;</td><td><a href="#(part._.Tail_.Position)" class="tocviewlink" pltdoc="x">Tail Position</a></td></tr><tr><td align="right">1.1.3&nbsp;</td><td><a href="#(part._values-model)" class="tocviewlink" pltdoc="x">Multiple Return Values</a></td></tr><tr><td align="right">1.1.4&nbsp;</td><td><a href="#(part._.Top-.Level_.Variables)" class="tocviewlink" pltdoc="x">Top-<wbr></wbr>Level Variables</a></td></tr><tr><td align="right">1.1.5&nbsp;</td><td><a href="#(part._.Objects_and_.Imperative_.Update)" class="tocviewlink" pltdoc="x">Objects and Imperative Update</a></td></tr><tr><td align="right">1.1.6&nbsp;</td><td><a href="#(part._model-eq)" class="tocviewlink" pltdoc="x">Object Identity and Comparisons</a></td></tr><tr><td align="right">1.1.7&nbsp;</td><td><a href="#(part._gc-model)" class="tocviewlink" pltdoc="x">Garbage Collection</a></td></tr><tr><td align="right">1.1.8&nbsp;</td><td><a href="#(part._.Procedure_.Applications_and_.Local_.Variables)" class="tocviewlink" pltdoc="x">Procedure Applications and Local Variables</a></td></tr><tr><td align="right">1.1.9&nbsp;</td><td><a href="#(part._.Variables_and_.Locations)" class="tocviewlink" pltdoc="x">Variables and Locations</a></td></tr><tr><td align="right">1.1.10&nbsp;</td><td><a href="#(part._module-eval-model)" class="tocviewlink" pltdoc="x">Modules and Module-<wbr></wbr>Level Variables</a></td></tr><tr><td align="right">1.1.11&nbsp;</td><td><a href="#(part._mark-model)" class="tocviewlink" pltdoc="x">Continuation Frames and Marks</a></td></tr><tr><td align="right">1.1.12&nbsp;</td><td><a href="#(part._prompt-model)" class="tocviewlink" pltdoc="x">Prompts, Delimited Continuations, and Barriers</a></td></tr><tr><td align="right">1.1.13&nbsp;</td><td><a href="#(part._thread-model)" class="tocviewlink" pltdoc="x">Threads</a></td></tr><tr><td align="right">1.1.14&nbsp;</td><td><a href="#(part._parameter-model)" class="tocviewlink" pltdoc="x">Parameters</a></td></tr><tr><td align="right">1.1.15&nbsp;</td><td><a href="#(part._exn-model)" class="tocviewlink" pltdoc="x">Exceptions</a></td></tr><tr><td align="right">1.1.16&nbsp;</td><td><a href="#(part._custodian-model)" class="tocviewlink" pltdoc="x">Custodians</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.1.1<tt>&nbsp;</tt></span><a href="#(part._cont-model)" class="tocsubseclink" pltdoc="x">Sub-<wbr></wbr>expression Evaluation and Continuations</a></td></tr><tr><td><span class="tocsublinknumber">1.1.2<tt>&nbsp;</tt></span><a href="#(part._.Tail_.Position)" class="tocsubseclink" pltdoc="x">Tail Position</a></td></tr><tr><td><span class="tocsublinknumber">1.1.3<tt>&nbsp;</tt></span><a href="#(part._values-model)" class="tocsubseclink" pltdoc="x">Multiple Return Values</a></td></tr><tr><td><span class="tocsublinknumber">1.1.4<tt>&nbsp;</tt></span><a href="#(part._.Top-.Level_.Variables)" class="tocsubseclink" pltdoc="x">Top-<wbr></wbr>Level Variables</a></td></tr><tr><td><span class="tocsublinknumber">1.1.5<tt>&nbsp;</tt></span><a href="#(part._.Objects_and_.Imperative_.Update)" class="tocsubseclink" pltdoc="x">Objects and Imperative Update</a></td></tr><tr><td><span class="tocsublinknumber">1.1.6<tt>&nbsp;</tt></span><a href="#(part._model-eq)" class="tocsubseclink" pltdoc="x">Object Identity and Comparisons</a></td></tr><tr><td><span class="tocsublinknumber">1.1.7<tt>&nbsp;</tt></span><a href="#(part._gc-model)" class="tocsubseclink" pltdoc="x">Garbage Collection</a></td></tr><tr><td><span class="tocsublinknumber">1.1.8<tt>&nbsp;</tt></span><a href="#(part._.Procedure_.Applications_and_.Local_.Variables)" class="tocsubseclink" pltdoc="x">Procedure Applications and Local Variables</a></td></tr><tr><td><span class="tocsublinknumber">1.1.9<tt>&nbsp;</tt></span><a href="#(part._.Variables_and_.Locations)" class="tocsubseclink" pltdoc="x">Variables and Locations</a></td></tr><tr><td><span class="tocsublinknumber">1.1.10<tt>&nbsp;</tt></span><a href="#(part._module-eval-model)" class="tocsubseclink" pltdoc="x">Modules and Module-<wbr></wbr>Level Variables</a></td></tr><tr><td><span class="tocsublinknumber">1.1.10.1<tt>&nbsp;</tt></span><a href="#(part._module-phase)" class="tocsubseclink" pltdoc="x">Phases</a></td></tr><tr><td><span class="tocsublinknumber">1.1.10.2<tt>&nbsp;</tt></span><a href="#(part._module-redeclare)" class="tocsubseclink" pltdoc="x">Module Re-<wbr></wbr>declarations</a></td></tr><tr><td><span class="tocsublinknumber">1.1.11<tt>&nbsp;</tt></span><a href="#(part._mark-model)" class="tocsubseclink" pltdoc="x">Continuation Frames and Marks</a></td></tr><tr><td><span class="tocsublinknumber">1.1.12<tt>&nbsp;</tt></span><a href="#(part._prompt-model)" class="tocsubseclink" pltdoc="x">Prompts, Delimited Continuations, and Barriers</a></td></tr><tr><td><span class="tocsublinknumber">1.1.13<tt>&nbsp;</tt></span><a href="#(part._thread-model)" class="tocsubseclink" pltdoc="x">Threads</a></td></tr><tr><td><span class="tocsublinknumber">1.1.14<tt>&nbsp;</tt></span><a href="#(part._parameter-model)" class="tocsubseclink" pltdoc="x">Parameters</a></td></tr><tr><td><span class="tocsublinknumber">1.1.15<tt>&nbsp;</tt></span><a href="#(part._exn-model)" class="tocsubseclink" pltdoc="x">Exceptions</a></td></tr><tr><td><span class="tocsublinknumber">1.1.16<tt>&nbsp;</tt></span><a href="#(part._custodian-model)" class="tocsubseclink" pltdoc="x">Custodians</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="model.html" title="backward to &quot;1 Language Model&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="model.html" title="up to &quot;1 Language Model&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="syntax-model.html" title="forward to &quot;1.2 Syntax Model&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>1.1<tt>&nbsp;</tt><a name="(part._eval-model)"></a>Evaluation Model</h4><p>Racket evaluation can be viewed as the simplification of expressions
to obtain values. For example, just as an elementary-school student
simplifies</p><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">1 + 1 = 2</span></span></p></td></tr></table></p><p>Racket evaluation simplifies</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktVal">2</span></p><p>The arrow &rarr; above replaces the more traditional <span class="stt">=</span> to
emphasize that evaluation proceeds in a particular direction towards
simpler expressions. In particular, a <a name="(tech._value)"></a><span style="font-style: italic">value</span> is an
expression that evaluation simplifies no further, such as the number
<span class="RktVal">2</span>.</p><h5>1.1.1<tt>&nbsp;</tt><a name="(part._cont-model)"></a>Sub-expression Evaluation and Continuations</h5><p>Some simplifications require more than one step. For example:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x">-</a></span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x">-</a></span><span class="stt"> </span><span class="RktVal">4</span><span class="stt"> </span><span class="RktVal">2</span><span class="RktPn">)</span></span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktVal">2</span></p><p>An expression that is not a <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a> can always be partitioned
into two parts: a <a name="(tech._redex)"></a><span style="font-style: italic">redex</span>, which is the part that changed in a
single-step simplification (highlighted), and the
<a name="(tech._continuation)"></a><span style="font-style: italic">continuation</span>, which is the surrounding expression
context. In <span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x">-</a></span><span class="stt"> </span><span class="RktVal">4</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span>, the redex is <span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span>, and
the continuation is <span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x">-</a></span><span class="stt"> </span><span class="RktVal">4</span><span class="stt"> </span>[]<span class="RktPn">)</span>, where [] takes the
place of the redex. That is, the continuation says how to &ldquo;continue&rdquo;
after the <a href="#(tech._redex)" class="techoutside" pltdoc="x"><span class="techinside">redex</span></a> is reduced to a <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a>.</p><p>Before some things can be evaluated, some sub-expressions must be
evaluated; for example, in the application <span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x">-</a></span><span class="stt"> </span><span class="RktVal">4</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span>, the
application of <span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x">-</a></span> cannot be reduced until the sub-expression
<span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span> is reduced.</p><p>Thus, the specification of each syntactic form specifies how (some of)
its sub-expressions are evaluated, and then how the results are
combined to reduce the form away.</p><p>The <a name="(tech._dynamic._extent)"></a><span style="font-style: italic">dynamic extent</span> of an expression is the sequence of
evaluation steps during which an expression contains the <a href="#(tech._redex)" class="techoutside" pltdoc="x"><span class="techinside">redex</span></a>.</p><h5>1.1.2<tt>&nbsp;</tt><a name="(part._.Tail_.Position)"></a>Tail Position</h5><p>An expression <span class="RktVar">expr1</span> is in <a name="(tech._tail._position)"></a><span style="font-style: italic">tail position</span> with
respect to an enclosing expression <span class="RktVar">expr2</span> if, whenever
<span class="RktVar">expr1</span> becomes a redex, its <a href="#(tech._continuation)" class="techoutside" pltdoc="x"><span class="techinside">continuation</span></a> is the same
as was the enclosing <span class="RktVar">expr2</span>&rsquo;s <a href="#(tech._continuation)" class="techoutside" pltdoc="x"><span class="techinside">continuation</span></a>.</p><p>For example, the <span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span> expression is <span style="font-style: italic">not</span> in <a href="#(tech._tail._position)" class="techoutside" pltdoc="x"><span class="techinside">tail
position</span></a> with respect to <span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x">-</a></span><span class="stt"> </span><span class="RktVal">4</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span>. To illustrate, we use
the notation <span class="RktVar">C</span>[<span class="RktVar">expr</span>] to mean the expression that is produced by
substituting <span class="RktVar">expr</span> in place of [] in the <a href="#(tech._continuation)" class="techoutside" pltdoc="x"><span class="techinside">continuation</span></a>
<span class="RktVar">C</span>:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">C</span>[<span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x">-</a></span><span class="stt"> </span><span class="RktVal">4</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span>]<span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktVar">C</span>[<span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x">-</a></span><span class="stt"> </span><span class="RktVal">4</span><span class="stt"> </span><span class="RktVal">2</span><span class="RktPn">)</span>]</p><p>In this case, the <a href="#(tech._continuation)" class="techoutside" pltdoc="x"><span class="techinside">continuation</span></a> for reducing <span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span> is
<span class="RktVar">C</span>[<span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">4</span><span class="stt"> </span>[]<span class="RktPn">)</span>], not just <span class="RktVar">C</span>.</p><p>In contrast, <span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span> is in <a href="#(tech._tail._position)" class="techoutside" pltdoc="x"><span class="techinside">tail position</span></a> with respect
to <span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._zero~3f))" class="RktValLink" pltdoc="x">zero?</a></span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">3</span><span class="RktPn">)</span>, because, for any continuation
<span class="RktVar">C</span>,</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">C</span>[<span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._zero~3f))" class="RktValLink" pltdoc="x">zero?</a></span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">3</span><span class="RktPn">)</span>]<span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktVar">C</span>[<span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span><span class="stt"> </span><span class="RktVal">#t</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">3</span><span class="RktPn">)</span>]<span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktVar">C</span>[<span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span>]</p><p>The steps in this reduction sequence are driven by the definition of
<span class="RktSym"><a href="if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span>, and they do not depend on the <a href="#(tech._continuation)" class="techoutside" pltdoc="x"><span class="techinside">continuation</span></a>
<span class="RktVar">C</span>. The &ldquo;then&rdquo; branch of an <span class="RktSym"><a href="if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span> form is always in
<a href="#(tech._tail._position)" class="techoutside" pltdoc="x"><span class="techinside">tail position</span></a> with respect to the <span class="RktSym"><a href="if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span> form. Due to a
similar reduction rule for <span class="RktSym"><a href="if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span> and <span class="RktVal">#f</span>, the &ldquo;else&rdquo;
branch of an <span class="RktSym"><a href="if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span> form is also in <a href="#(tech._tail._position)" class="techoutside" pltdoc="x"><span class="techinside">tail position</span></a>.</p><p><a href="#(tech._tail._position)" class="techoutside" pltdoc="x"><span class="techinside">Tail-position</span></a> specifications provide a guarantee about the
asymptotic space consumption of a computation. In general, the
specification of <a href="#(tech._tail._position)" class="techoutside" pltdoc="x"><span class="techinside">tail positions</span></a> goes with each syntactic form,
like <span class="RktSym"><a href="if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span>.</p><h5>1.1.3<tt>&nbsp;</tt><a name="(part._values-model)"></a>Multiple Return Values</h5><p>A Racket expression can evaluate to <a name="(tech._multiple._value)"></a><span style="font-style: italic">multiple values</span>, in the
same way that a procedure can accept multiple arguments.</p><p>Most <a href="#(tech._continuation)" class="techoutside" pltdoc="x"><span class="techinside">continuations</span></a> expect a particular number of result
<a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">values</span></a>.  Indeed, most <a href="#(tech._continuation)" class="techoutside" pltdoc="x"><span class="techinside">continuations</span></a>, such as <span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span>[]<span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span> expect a single <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a>. The <a href="#(tech._continuation)" class="techoutside" pltdoc="x"><span class="techinside">continuation</span></a>
<span class="RktPn">(</span><span class="RktSym"><a href="let.html#(form._((quote._~23~25kernel)._let-values))" class="RktStxLink" pltdoc="x">let-values</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="stt"> </span><span class="RktSym">y</span><span class="RktPn">)</span><span class="stt"> </span>[]<span class="RktPn">]</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">expr</span><span class="RktPn">)</span> expects two result
<a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">values</span></a>; the first result replaces <span class="RktSym">x</span> in the body
<span class="RktVar">expr</span>, and the second replaces <span class="RktSym">y</span> in
<span class="RktVar">expr</span>. The <a href="#(tech._continuation)" class="techoutside" pltdoc="x"><span class="techinside">continuation</span></a> <span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="stt"> </span>[]<span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span> accepts any number of result <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">values</span></a>, because it ignores
the result(s).</p><p>In general, the specification of a syntactic form inidicates the
number of <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">values</span></a> that it produces and the number that it
expects from each of its sub-expression. In addtion, some procedures
(notably <span class="RktSym"><a href="values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span>) produce multiple <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">values</span></a>, and some
procedures (notably <span class="RktSym"><a href="values.html#(def._((quote._~23~25kernel)._call-with-values))" class="RktValLink" pltdoc="x">call-with-values</a></span>) create continuations
internally that accept a certain number of <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">values</span></a>.</p><h5>1.1.4<tt>&nbsp;</tt><a name="(part._.Top-.Level_.Variables)"></a>Top-Level Variables</h5><p>Given</p><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">x = 10</span></span></p></td></tr></table></p><p>then an algebra student simplifies <span class="stt">x + 1</span> as follows:</p><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">x + 1 = 10 + 1 = 11</span></span></p></td></tr></table></p><p>Racket works much the same way, in that a set of <a href="#(tech._top._level._variable)" class="techoutside" pltdoc="x"><span class="techinside">top-level
variables</span></a> are available for substitutions on demand during
evaluation. For example, given</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></p><p>then</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="highlighted"><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktSym">x</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span></span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">10</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span></span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktVal">11</span></p><p>In Racket, the way definitions appear is just as important as the way
that they are used. Racket evaluation thus keeps track of both
definitions and the current expression, and it extends the set of
definitions in response to evaluating forms such as <span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span>.</p><p>Each evaluation step, then, takes the current set of definitions and
program to a new set of definitions and program. Before a
<span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span> can be moved into the set of definitions, its
right-hand expression must be reduced to a <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a>.</p><p><table cellspacing="0"><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">9</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">1</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">x</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">10</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void))" class="RktValLink" pltdoc="x">void</a></span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">x</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">1</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktSym">x</span></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">10</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">1</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktVal">11</span></td></tr></table></p><p>Using <span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span>, a program can change the value associated with an
existing <a href="#(tech._top._level._variable)" class="techoutside" pltdoc="x"><span class="techinside">top-level variable</span></a>:</p><p><table cellspacing="0"><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">x</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">8</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void))" class="RktValLink" pltdoc="x">void</a></span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">x</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="highlighted"><span class="RktSym">x</span></span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktVal">8</span></td></tr></table></p><h5>1.1.5<tt>&nbsp;</tt><a name="(part._.Objects_and_.Imperative_.Update)"></a>Objects and Imperative Update</h5><p>In addition to <span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span> for imperative update of <a href="#(tech._top._level._variable)" class="techoutside" pltdoc="x"><span class="techinside">top-level
variables</span></a>, various procedures enable the modification of elements
within a compound data structure. For example, <span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span>
modifies the content of a vector.</p><p>To allow such modifications to data, we must distinguish between
<a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">values</span></a>, which are the results of expressions, and
<a name="(tech._object)"></a><span style="font-style: italic">objects</span>, which hold the data referenced by a value.</p><p>A few kinds of <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">objects</span></a> can serve directly as values, including
booleans, <span class="RktPn">(</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void))" class="RktValLink" pltdoc="x">void</a></span><span class="RktPn">)</span>, and small exact integers. More generally,
however, a <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a> is a reference to an <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">object</span></a>. For
example, a <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a> can be a reference to a particular vector that
currently holds the value <span class="RktVal">10</span> in its first slot. If an
<a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">object</span></a> is modified, then the modification is visible through
all copies of the <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a> that reference the same <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">object</span></a>.</p><p>In the evaluation model, a set of <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">objects</span></a> must be carried along
with each step in evaluation, just like the definition set. Operations
that create <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">objects</span></a>, such as <span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span>, add to the set of
<a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">objects</span></a>:</p><p><table cellspacing="0"><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">10</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">20</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">x</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">&lt;o1&gt;</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void))" class="RktValLink" pltdoc="x">void</a></span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">y</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">x</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">x</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">0</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">11</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">y</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">0</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktSym">x</span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">y</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">&lt;o1&gt;</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void))" class="RktValLink" pltdoc="x">void</a></span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">x</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">0</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">11</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">y</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">0</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktSym">x</span></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">&lt;o1&gt;</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">0</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">11</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void))" class="RktValLink" pltdoc="x">void</a></span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">y</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">0</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktSym">y</span></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">&lt;o1&gt;</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">0</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktVal">11</span></td></tr></table></p><p>The distinction between a <a href="#(tech._top._level._variable)" class="techoutside" pltdoc="x"><span class="techinside">top-level variable</span></a> and an object
reference is crucial. A <a href="#(tech._top._level._variable)" class="techoutside" pltdoc="x"><span class="techinside">top-level variable</span></a> is not a
<a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a>; each time a <a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variable</span></a> expression is evaluated, the
value is extracted from the current set of definitions. An object
reference, in contrast is a value, and therefore needs no further
evaluation. The model evaluation steps above use angle-bracketed
<span class="RktSym">&lt;o1&gt;</span> for an object reference to distinguish it from a
<a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variable</span></a> name.</p><p>A direct object reference can never appear in a text-based source
program. A program representation created with
<span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._datum-~3esyntax))" class="RktValLink" pltdoc="x">datum-&gt;syntax</a></span>, however, can embed direct references to
existing <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">objects</span></a>.</p><h5>1.1.6<tt>&nbsp;</tt><a name="(part._model-eq)"></a>Object Identity and Comparisons</h5><p>The <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span> operator compares two <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">values</span></a>, returning
<span class="RktVal">#t</span> when the values refer to the same <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">object</span></a>. This form
of equality is suitable for comparing objects that support imperative
update (e.g., to determine that the effect of modifying an object
through one reference is visible through another reference). Also, an
<span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span>  test evaluates quickly, and <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span>-based hashing
is more lightweight than <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span>-based hashing in hash tables.</p><p>In some cases, however, <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span> is unsuitable as a comparison
operator, because the generation of <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">objects</span></a> is not clearly
defined. In particular, two applications of <span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span> to the same two
exact integers may or may not produce results that are <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span>,
although the results are always <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span>. Similarly, evaluation
of a <span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span> form typically generates a new procedure
<a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">object</span></a>, but it may re-use a procedure <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">object</span></a> previously
generated by the same source <span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span> form.</p><p>The behavior of a datatype with respect to <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span> is generally
specified with the datatype and its associated procedures.</p><h5>1.1.7<tt>&nbsp;</tt><a name="(part._gc-model)"></a>Garbage Collection</h5><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="imageleft"><img src="magnify.png" alt="+" /></span>See <a href="memory.html" pltdoc="x">Memory Management</a> for functions related to
garbage collection.</p></blockquote></blockquote></blockquote><p>In the program state</p><p><table cellspacing="0"><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o2&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector))" class="RktValLink" pltdoc="x">vector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;o1&gt;</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr></table></p><p>evaluation cannot depend on <span class="RktSym">&lt;o2&gt;</span>, because it is not part of
the program to evaluate, and it is not referenced by any definition
that is accessible in the program. The <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">object</span></a> <span class="RktSym">&lt;o2&gt;</span> may
therefore be removed from the evaluation by <a name="(tech._garbage._collection)"></a><span style="font-style: italic">garbage
collection</span>.</p><p>A few special compound datatypes hold <a name="(tech._weak._reference)"></a><span style="font-style: italic">weak references</span> to
objects. Such weak references are treated specially by the garbage
collector in determining which <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">objects</span></a> are reachable for the
remainder of the computation. If an <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">object</span></a> is reachable only
via a <a href="#(tech._weak._reference)" class="techoutside" pltdoc="x"><span class="techinside">weak reference</span></a>, then the object can be reclaimed, and the
<a href="#(tech._weak._reference)" class="techoutside" pltdoc="x"><span class="techinside">weak reference</span></a> is replaced by a different <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a>
(typically <span class="RktVal">#f</span>).</p><p>As a special case, a <a href="numbers.html#(tech._fixnum)" class="techoutside" pltdoc="x"><span class="techinside">fixnum</span></a> is always considered reachable by
the garbage collector. Many other values are always reachable due to
the way they are implemented and used: A <a href="characters.html#(tech._character)" class="techoutside" pltdoc="x"><span class="techinside">character</span></a> in the
Latin-1 range is always reachable, because <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span> Latin-1
characters are always <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span>, and all of the Latin-1 characters
are referenced by an internal module. Similarly, <span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._null))" class="RktValLink" pltdoc="x">null</a></span>,
<span class="RktVal">#t</span>, <span class="RktVal">#f</span>, <span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._eof))" class="RktValLink" pltdoc="x">eof</a></span>, and <span class="RktRes">#&lt;void&gt;</span> and are
always reachable. Values produced by <span class="RktSym"><a href="quote.html#(form._((quote._~23~25kernel)._quote))" class="RktStxLink" pltdoc="x">quote</a></span> remain reachable
when the <span class="RktSym"><a href="quote.html#(form._((quote._~23~25kernel)._quote))" class="RktStxLink" pltdoc="x">quote</a></span> expression itself is reachable.</p><h5>1.1.8<tt>&nbsp;</tt><a name="(part._.Procedure_.Applications_and_.Local_.Variables)"></a>Procedure Applications and Local Variables</h5><p>Given</p><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">f(x) = x + 10</span></span></p></td></tr></table></p><p>then an algebra student simplifies <span class="stt">f(7)</span> as follows:</p><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">f(7) = 7 + 10 = 17</span></span></p></td></tr></table></p><p>The key step in this simplification is take the body of the defined
function <span class="stt">f</span>, and then replace each <span class="stt">x</span> with the actual
<a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a> <span class="stt">7</span>.</p><p>Racket procedure application works much the same way. A procedure is
an <a href="#(tech._object)" class="techoutside" pltdoc="x"><span class="techinside">object</span></a>, so evaluating <span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktVal">7</span><span class="RktPn">)</span> starts with a
<a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variable</span></a> lookup:</p><p><table cellspacing="0"><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="highlighted"><span class="RktSym">f</span></span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym">&lt;p1&gt;</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">7</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr></table></p><p>Unlike in algebra, however, the <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a> associated with an
argument can be changed in the body of a procedure by using
<span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span>, as in the example <span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span><span class="stt"> </span><span class="RktSym">x</span><span class="stt"> </span><span class="RktVal">3</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span>. Since the <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a> associated with <span class="RktSym">x</span> can be
changed, an actual value cannot be substituted for <span class="RktSym">x</span> when
the procedure is applied.</p><p>Instead, a new <a name="(tech._location)"></a><span style="font-style: italic">location</span> is created for each <a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variable</span></a>
on each application. The argument <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a> is placed in the
<a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a>, and each instance of the <a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variable</span></a> in the
procedure body is replaced with the new <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a>:</p><p><table cellspacing="0"><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym">&lt;p1&gt;</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">7</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xloc</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktSym">xloc</span></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xloc</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">7</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">10</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xloc</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktVal">17</span></td></tr></table></p><p>A <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a> is the same as a <a href="#(tech._top._level._variable)" class="techoutside" pltdoc="x"><span class="techinside">top-level variable</span></a>, but when
a <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a> is generated, it (conceptually) uses a name that has
not been used before and that cannot not be generated again or
accessed directly.</p><p>Generating a <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a> in this way means that <span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span>
evaluates for <a href="#(tech._local._variable)" class="techoutside" pltdoc="x"><span class="techinside">local variables</span></a> in the same way as for
<a href="#(tech._top._level._variable)" class="techoutside" pltdoc="x"><span class="techinside">top-level variables</span></a>, because the <a href="#(tech._local._variable)" class="techoutside" pltdoc="x"><span class="techinside">local variable</span></a> is
always replaced with a <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a> by the time the <span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span>
form is evaluated:</p><p><table cellspacing="0"><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="highlighted"><span class="RktSym">f</span></span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym">&lt;p1&gt;</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">7</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xloc</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">xloc</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">3</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="hspace">&nbsp;</span><span class="RktSym">xloc</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xloc</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void))" class="RktValLink" pltdoc="x">void</a></span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">xloc</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xloc</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="highlighted"><span class="RktSym">xloc</span></span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p>&rarr;</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>objects:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>defined:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;p1&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xloc</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p>evaluate:</p></td><td valign="baseline"><p> </p></td><td valign="baseline"><span class="RktVal">3</span></td></tr></table></p><p>The substitution and <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a>-generation step of procedure
application requires that the argument is a <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a>. Therefore,
in <span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktSym">x</span><span class="stt"> </span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span>, the <span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">2</span><span class="RktPn">)</span>
sub-expression must be simplified to the <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a> <span class="RktVal">3</span>, and
then <span class="RktVal">3</span> can be placed into a <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a> for
<span class="RktSym">x</span>. In other words, Racket is a <a name="(tech._call._by._value)"></a><span style="font-style: italic">call-by-value</span>
language.</p><p>Evaluation of a local-variable form, such as <span class="RktPn">(</span><span class="RktSym"><a href="let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" class="RktStxLink" pltdoc="x">let</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">expr</span><span class="RktPn">)</span>, is the same as for a procedure call. After <span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">2</span><span class="RktPn">)</span> produces a <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a>, it is stored in a fresh <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a>
that replaces every instance of <span class="RktSym">x</span> in <span class="RktVar">expr</span>.</p><h5>1.1.9<tt>&nbsp;</tt><a name="(part._.Variables_and_.Locations)"></a>Variables and Locations</h5><p>A <a name="(tech._variable)"></a><span style="font-style: italic">variable</span> is a placeholder for a <a href="#(tech._value)" class="techoutside" pltdoc="x"><span class="techinside">value</span></a>, and
expressions in an initial program refer to <a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variables</span></a>. A
<a name="(tech._top._level._variable)"></a><span style="font-style: italic">top-level variable</span> is both a <a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variable</span></a> and a
<a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a>. Any other <a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variable</span></a> is always replaced by a
<a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a> at run-time, so that evaluation of expressions
involves only <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">locations</span></a>. A single <a name="(tech._local._variable)"></a><span style="font-style: italic">local variable</span>
(i.e., a non-top-level, non-module-level <a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variable</span></a>), such as a
procedure argument, can correspond to different <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">locations</span></a>
through different instantiations.</p><p>For example, in the program</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" class="RktStxLink" pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span><span class="RktPn">)</span></p><p>both <span class="RktSym">y</span> and <span class="RktSym">x</span> are <a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variables</span></a>. The <span class="RktSym">y</span>
<a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variable</span></a> is a <a href="#(tech._top._level._variable)" class="techoutside" pltdoc="x"><span class="techinside">top-level variable</span></a>, and the <span class="RktSym">x</span> is
a <a href="#(tech._local._variable)" class="techoutside" pltdoc="x"><span class="techinside">local variable</span></a>. When this code is evaluated, a
<a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a> is created for <span class="RktSym">x</span> to hold the value
<span class="RktVal">5</span>, and a <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a> is also created for <span class="RktSym">y</span> to
hold the value <span class="RktVal">6</span>.</p><p>The replacement of a <a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variable</span></a> with a <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a> during
evaluation implements Racket&rsquo;s <a name="(tech._lexical._scoping)"></a><span style="font-style: italic">lexical scoping</span>. For example,
when a procedure-argument <a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variable</span></a> <span class="RktSym">x</span> is replaced by
the <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a> <span class="RktSym">xloc</span>, then it is replaced throughout the
body of the procedure, including any nested <span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span>
forms. As a result, future references of the <a href="#(tech._variable)" class="techoutside" pltdoc="x"><span class="techinside">variable</span></a> always
access the same <a href="#(tech._location)" class="techoutside" pltdoc="x"><span class="techinside">location</span></a>.</p><h5>1.1.10<tt>&nbsp;</tt><a name="(part._module-eval-model)"></a>Modules and Module-Level Variables</h5><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="imageleft"><img src="magnify.png" alt="+" /></span>See <a href="module.html" pltdoc="x">Modules: <span class="RktSym"><span class="RktStxLink">module</span></span>, ...</a> for the syntax of modules.</p></blockquote></blockquote></blockquote><p>Most definitions in Racket are in modules. In terms of evaluation,
a module is essentially a prefix on a defined name, so that different
modules can define the name. That is, a <a name="(tech._module._level._variable)"></a><span style="font-style: italic">module-level
variable</span> is like a <a href="#(tech._top._level._variable)" class="techoutside" pltdoc="x"><span class="techinside">top-level variable</span></a> from the perspective of
evaluation.</p><p>One difference between a module and a top-level definition is that a
module can be declared without instantiating its module-level
definitions. Evaluation of a <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span> <a name="(tech._instantiate)"></a><span style="font-style: italic">instantiates</span>
(i.e., triggers the <a name="(tech._instantiation)"></a><span style="font-style: italic">instantiation</span> of) a declared module,
which creates variables that correspond to its module-level
definitions.</p><p>For example, given the module declaration</p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="module.html#(form._((quote._~23~25kernel)._module))" class="RktStxLink" pltdoc="x">module</a></span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktSym">racket</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></p><p>the evaluation of <span class="RktPn">(</span><span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktSym">m</span><span class="RktPn">)</span> creates the variable <span class="RktSym">x</span>
and installs <span class="RktVal">10</span> as its value. This <span class="RktSym">x</span> is unrelated to
any top-level definition of <span class="RktSym">x</span>.</p><h5>1.1.10.1<tt>&nbsp;</tt><a name="(part._module-phase)"></a>Phases</h5><p>A module can be <a href="#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d in multiple <a name="(tech._phase)"></a><span style="font-style: italic">phases</span>. A
phase is an integer that, again, is effectively a prefix on the names
of module-level definitions. A top-level <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>
<a href="#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiates</span></a> a module at <a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a> 0, if the module is not
already <a href="#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d at phase 0.  A top-level
<span class="RktPn">(</span><span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._for-syntax))" class="RktStxLink" pltdoc="x">for-syntax</a></span><span class="stt"> </span><span class="RktSym">....</span><span class="RktPn">)</span><span class="RktPn">)</span> <a href="#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiates</span></a> a module at
<a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a> 1 (if it is not already <a href="#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d at that
level); <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._for-syntax))" class="RktStxLink" pltdoc="x">for-syntax</a></span> also has a different binding
effect on further program parsing, as described in
<a href="syntax-model.html#(part._intro-binding)" pltdoc="x">Introducing Bindings</a>.</p><p>Within a module, some definitions are shifted by a phase already; the
<span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define-for-syntax))" class="RktStxLink" pltdoc="x">define-for-syntax</a></span> form is like <span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span>, but it
defines a variable at relative <a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a> 1, instead of relative
<a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a> 0. Thus, if the module is <a href="#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d at phase 1,
the variables for <span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define-for-syntax))" class="RktStxLink" pltdoc="x">define-for-syntax</a></span> are created at phase 2,
and so on. Moreover, this relative phase acts as another layer of
prefixing, so that a <span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span> of <span class="RktSym">x</span> and a
<span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define-for-syntax))" class="RktStxLink" pltdoc="x">define-for-syntax</a></span> of <span class="RktSym">x</span> can co-exist in a module
without colliding. Again, the higher phases are mainly related to
program parsing, instead of normal evaluation.</p><p>If a module <a href="#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d at <a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a> <span style="font-style: italic">n</span>
<span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>s another module, then the <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>d module is
first <a href="#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d at phase <span style="font-style: italic">n</span>, and so on
transitively. (Module <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>s cannot form cycles.) If a
module <a href="#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d at phase <span style="font-style: italic">n</span> <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>s
<span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._for-syntax))" class="RktStxLink" pltdoc="x">for-syntax</a></span> another module, the other module becomes
<a name="(tech._available)"></a><span style="font-style: italic">available</span> at <a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a> <span style="font-style: italic">n+</span>1<span style="font-style: italic"></span>, and it may later be
<a href="#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d at <a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a> <span style="font-style: italic">n+</span>1<span style="font-style: italic"></span>.  If a module that is
<a href="#(tech._available)" class="techoutside" pltdoc="x"><span class="techinside">available</span></a> at phase <span style="font-style: italic">n</span> for <span style="font-style: italic">n&gt;</span>0<span style="font-style: italic"></span> <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>s
<span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._for-template))" class="RktStxLink" pltdoc="x">for-template</a></span> another module, the other module becomes
<a href="#(tech._available)" class="techoutside" pltdoc="x"><span class="techinside">available</span></a> at <a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a> <span style="font-style: italic">n-</span>1<span style="font-style: italic"></span>, and so
on. <a href="#(tech._instantiation)" class="techoutside" pltdoc="x"><span class="techinside">Instantiation</span></a>s of <a href="#(tech._available)" class="techoutside" pltdoc="x"><span class="techinside">available</span></a> modules above
<a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a> 0 are triggered on demand as described in
<a href="syntax-model.html#(part._mod-parse)" pltdoc="x">Module Phases and Visits</a>.</p><p>A final distinction among module <a href="#(tech._instantiation)" class="techoutside" pltdoc="x"><span class="techinside">instantiations</span></a> is that
multiple <a href="#(tech._instantiation)" class="techoutside" pltdoc="x"><span class="techinside">instantiations</span></a> may exist at <a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a> 1 and
higher. These <a href="#(tech._instantiation)" class="techoutside" pltdoc="x"><span class="techinside">instantiations</span></a> are created by the parsing of
module forms (see <a href="syntax-model.html#(part._mod-parse)" pltdoc="x">Module Phases and Visits</a>), and are, again, conceptually
distinguished by prefixes.</p><p>Top-level variables can exist in multiple phases in the same way as
within modules. For example, <span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define-for-syntax))" class="RktStxLink" pltdoc="x">define-for-syntax</a></span> creates a
<a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a> 1 variable. Furthermore, reflective operations like
<span class="RktSym"><a href="Namespaces.html#(def._((lib._racket/private/base..rkt)._make-base-namespace))" class="RktValLink" pltdoc="x">make-base-namespace</a></span> and <span class="RktSym"><a href="eval.html#(def._((quote._~23~25kernel)._eval))" class="RktValLink" pltdoc="x">eval</a></span> provide access to
top-level variables in higher <a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phases</span></a>, while module
<a href="#(tech._instantiation)" class="techoutside" pltdoc="x"><span class="techinside">instantiations</span></a> (triggered by with <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>) relative to such
top-levels are in corresponding higher <a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a>s.</p><h5>1.1.10.2<tt>&nbsp;</tt><a name="(part._module-redeclare)"></a><a name="(idx._(gentag._0._(lib._scribblings/reference/reference..scrbl)))"></a>Module Re-declarations</h5><p>When a module is declared using a name for which a module is already
declared, the new declaration&rsquo;s definitions replace and extend the old
declarations. If a variable in the old declaration has no counterpart
in the new declaration, the old variable continues to exist, but its
binding is not included in the <a href="syntax-model.html#(tech._lexical._information)" class="techoutside" pltdoc="x"><span class="techinside">lexical information</span></a> for the
module body. If a new variable definition has a counterpart in the old
declaration, it effectively assigns to the old variable.</p><p>If a module is <a href="#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d in any <a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a>s before it is
re-declared, each re-declaration of the module is immediately
<a href="#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d in the same <a href="#(tech._phase)" class="techoutside" pltdoc="x"><span class="techinside">phase</span></a>s.</p><h5>1.1.11<tt>&nbsp;</tt><a name="(part._mark-model)"></a>Continuation Frames and Marks</h5><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="imageleft"><img src="magnify.png" alt="+" /></span>See <a href="contmarks.html" pltdoc="x">Continuation Marks</a> for continuation-mark forms and functions.</p></blockquote></blockquote></blockquote><p>Every continuation <span class="RktVar">C</span> can be partitioned into
<a name="(tech._continuation._frame)"></a><span style="font-style: italic">continuation frames</span> <span class="RktVar">C<span style="vertical-align: sub; font-size: 80%">1</span></span>, <span class="RktVar">C<span style="vertical-align: sub; font-size: 80%">2</span></span>, ..., <span class="RktVar">C<span style="vertical-align: sub; font-size: 80%">n</span></span>
such that <span class="RktVar">C</span> = <span class="RktVar">C<span style="vertical-align: sub; font-size: 80%">1</span></span>[<span class="RktVar">C<span style="vertical-align: sub; font-size: 80%">2</span></span>[...[<span class="RktVar">C<span style="vertical-align: sub; font-size: 80%">n</span></span>]]], and no frame <span class="RktVar">C<span style="vertical-align: sub; font-size: 80%">i</span></span> can be itself partitioned
into smaller continuations. Evaluation steps add and remove frames to
the current continuation, typically one at a time.</p><p>Each frame is conceptually annotated with a set of
<a name="(tech._continuation._mark)"></a><span style="font-style: italic">continuation marks</span>. A mark consists of a key and its value;
the key is an arbitrary value, and each frame includes at most one
mark for any key. Various operations set and extract marks from
continuations, so that marks can be used to attach information to a
dynamic extent. For example, marks can be used to record information
for a &ldquo;stack trace&rdquo; to be used when an exception is raised, or
to implement dynamic scope.</p><h5>1.1.12<tt>&nbsp;</tt><a name="(part._prompt-model)"></a>Prompts, Delimited Continuations, and Barriers</h5><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="imageleft"><img src="magnify.png" alt="+" /></span>See <a href="cont.html" pltdoc="x">Continuations</a> for continuation and prompt functions.</p></blockquote></blockquote></blockquote><p>A <a name="(tech._prompt)"></a><span style="font-style: italic">prompt</span> is a special kind of continuation frame that is
annotated with a specific <a name="(tech._prompt._tag)"></a><span style="font-style: italic">prompt tag</span> (essentially a
continuation mark). Various operations allow the capture of frames in
the continuation from the redex position out to the nearest enclosing
prompt with a particular prompt tag; such a continuation is sometimes
called a <a name="(tech._delimited._continuation)"></a><span style="font-style: italic">delimited continuation</span>. Other operations allow the
current continuation to be extended with a captured continuation
(specifically, a <a name="(tech._composable._continuation)"></a><span style="font-style: italic">composable continuation</span>). Yet other
operations abort the computation to the nearest enclosing prompt with
a particular tag, or replace the continuation to the nearest enclosing
prompt with another one. When a delimited continuation is captured,
the marks associated with the relevant frames are also captured.</p><p>A <a name="(tech._continuation._barrier)"></a><span style="font-style: italic">continuation barrier</span> is another kind of continuation frame
that prohibits certain replacements of the current continuation with
another. Specifically, a continuation can be replaced by another only
when the replacement does not introduce any continuation barriers (but
it may remove them). A continuation barrier thus prevents &ldquo;downward
jumps&rdquo; into a continuation that is protected by a barrier. Certain operations
install barriers automatically; in particular, when an exception
handler is called, a continuation barrier prohibits the continuation
of the handler from capturing the continuation past the exception
point.</p><p>A <a name="(tech._escape._continuation)"></a><span style="font-style: italic">escape continuation</span> is essentially a derived concept. It
combines a prompt for escape purposes with a continuation for
mark-gathering purposes. As the name implies, escape continuations are
used only to abort to the point of capture.</p><h5>1.1.13<tt>&nbsp;</tt><a name="(part._thread-model)"></a>Threads</h5><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="imageleft"><img src="magnify.png" alt="+" /></span>See <a href="concurrency.html" pltdoc="x">Concurrency</a> for thread and synchronization functions.</p></blockquote></blockquote></blockquote><p>Racket supports multiple <a name="(tech._thread)"></a><span style="font-style: italic">threads</span> of evaluation.  Threads run
concurrently, in the sense that one thread can preempt another without
its cooperation, but threads currently all run on the same processor
(i.e., the same underlying OS process and thread). See also
<a href="futures.html" pltdoc="x">Futures for Parallelism</a>.</p><p>Threads are created explicitly by functions such as <span class="RktSym"><a href="threads.html#(def._((quote._~23~25kernel)._thread))" class="RktValLink" pltdoc="x">thread</a></span>.
In terms of the evaluation model, each step in evaluation actually consists of multiple concurrent
expressions, up to one per thread, rather than a single expression. The expressions all
share the same objects and top-level variables, so that they can
communicate through shared state. Most evaluation steps involve a
single step in a single expression, but certain synchronization
primitives require multiple threads to progress together in one step.</p><p>In addition to the state that is shared among all threads, each thread
has its own private state that is accessed through <a name="(tech._thread._cell)"></a><span style="font-style: italic">thread
cells</span>. A thread cell is similar to a normal mutable object, but a
change to the value inside a thread cell is seen only when extracting
a value from the cell from the same thread. A thread cell can be
<a name="(tech._preserved)"></a><span style="font-style: italic">preserved</span>; when a new thread is created, the creating
thread&rsquo;s value for a preserved thread cell serves as the initial value
for the cell in the created thread. For a non-preserved thread cell, a
new thread sees the same initial value (specified when the thread cell
is created) as all other threads.</p><h5>1.1.14<tt>&nbsp;</tt><a name="(part._parameter-model)"></a>Parameters</h5><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="imageleft"><img src="magnify.png" alt="+" /></span>See <a href="parameters.html" pltdoc="x">Parameters</a> for parameter forms and functions.</p></blockquote></blockquote></blockquote><p><a name="(tech._parameter)"></a><span style="font-style: italic">Parameters</span> are essentially a derived concept in Racket; they
are defined in terms of <a href="#(tech._continuation._mark)" class="techoutside" pltdoc="x"><span class="techinside">continuation marks</span></a> and <a href="#(tech._thread._cell)" class="techoutside" pltdoc="x"><span class="techinside">thread
cells</span></a>. However, parameters are also built in, in the sense that some
primitive procedures consult parameter values. For example, the
default output stream for primitive output operations is determined by
a parameter.</p><p>A parameter is a setting that is both thread-specific and
continuation-specific. In the empty continuation, each parameter
corresponds to a <a href="#(tech._preserved)" class="techoutside" pltdoc="x"><span class="techinside">preserved</span></a> <a href="#(tech._thread._cell)" class="techoutside" pltdoc="x"><span class="techinside">thread cell</span></a>; a corresponding
<a name="(tech._parameter._procedure)"></a><span style="font-style: italic">parameter procedure</span> accesses and sets the thread cell&rsquo;s
value for the current thread.</p><p>In a non-empty continuation, a parameter&rsquo;s value is determined through
a <a name="(tech._parameterization)"></a><span style="font-style: italic">parameterization</span> that is associated with the nearest
enclosing continuation frame though a continuation mark (whose key is
not directly accessible). A parameterization maps each parameter to a
preserved thread cell, and the combination of thread cell and current
thread yields the parameter&rsquo;s value. A parameter procedure sets or
accesses the relevant thread cell for its parameter.</p><p>Various operations, such as <span class="RktSym"><a href="parameters.html#(form._((lib._racket/private/more-scheme..rkt)._parameterize))" class="RktStxLink" pltdoc="x">parameterize</a></span> or
<span class="RktSym"><a href="parameters.html#(def._((lib._racket/private/more-scheme..rkt)._call-with-parameterization))" class="RktValLink" pltdoc="x">call-with-parameterization</a></span>, install a parameterization into
the current continuation&rsquo;s frame.</p><h5>1.1.15<tt>&nbsp;</tt><a name="(part._exn-model)"></a>Exceptions</h5><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="imageleft"><img src="magnify.png" alt="+" /></span>See <a href="exns.html" pltdoc="x">Exceptions</a> for exception forms, functions, and types.</p></blockquote></blockquote></blockquote><p><a name="(tech._exception)"></a><span style="font-style: italic">Exceptions</span> are essentially a derived concept in Racket; they
are defined in terms of continuations, prompts, and continuation
marks.  However, exceptions are also built in, in the sense that
primitive forms and procedures may raise exceptions.</p><p>An <a name="(tech._exception._handler)"></a><span style="font-style: italic">exception handler</span> to catch exceptions can be associated
with a continuation frame though a <a href="#(tech._continuation._mark)" class="techoutside" pltdoc="x"><span class="techinside">continuation mark</span></a> (whose key
is not directly accessible). When an exception is raised, the current
continuation&rsquo;s marks determine a chain of <a href="#(tech._exception._handler)" class="techoutside" pltdoc="x"><span class="techinside">exception handler</span></a>
procedures that are consulted to handle the exception. A handler for
uncaught exceptions is designated through a built-in <a href="#(tech._parameter)" class="techoutside" pltdoc="x"><span class="techinside">parameter</span></a>.</p><p>One potential action of an <a href="#(tech._exception._handler)" class="techoutside" pltdoc="x"><span class="techinside">exception handler</span></a> is to abort the
current <a href="#(tech._continuation)" class="techoutside" pltdoc="x"><span class="techinside">continuation</span></a> up to an enclosing <a href="#(tech._prompt)" class="techoutside" pltdoc="x"><span class="techinside">prompt</span></a> with a
particular <a href="#(tech._prompt._tag)" class="techoutside" pltdoc="x"><span class="techinside">prompt tag</span></a>.  The default handler for uncaught
exceptions, in particular, aborts to a particular tag for which a
prompt is always present, because the prompt is installed in the
outermost frame of the continuation for any new thread.</p><h5>1.1.16<tt>&nbsp;</tt><a name="(part._custodian-model)"></a>Custodians</h5><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="imageleft"><img src="magnify.png" alt="+" /></span>See <a href="custodians.html" pltdoc="x">Custodians</a> for custodian functions.</p></blockquote></blockquote></blockquote><p>A <a name="(tech._custodian)"></a><span style="font-style: italic">custodian</span> manages a collection of threads,
<a href="file-ports.html#(tech._file._stream._port)" class="techoutside" pltdoc="x"><span class="techinside">file-stream ports</span></a>, TCP ports, <a href="tcp.html#(tech._tcp._listener)" class="techoutside" pltdoc="x"><span class="techinside">TCP listeners</span></a>, <a href="udp.html#(tech._udp._socket)" class="techoutside" pltdoc="x"><span class="techinside">UDP
sockets</span></a>, and <a href="bytestrings.html#(tech._byte._converter)" class="techoutside" pltdoc="x"><span class="techinside">byte converters</span></a>.  Whenever a thread, etc. is
created, it is placed under the management of the <a name="(tech._current._custodian)"></a><span style="font-style: italic">current
custodian</span> as determined by the <span class="RktSym"><a href="custodians.html#(def._((quote._~23~25kernel)._current-custodian))" class="RktValLink" pltdoc="x">current-custodian</a></span>
<a href="#(tech._parameter)" class="techoutside" pltdoc="x"><span class="techinside">parameter</span></a>.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>In GRacket, custodians also manage eventspaces.</p></blockquote></blockquote></blockquote><p>Except for the root custodian, every <a href="#(tech._custodian)" class="techoutside" pltdoc="x"><span class="techinside">custodian</span></a> itself it
managed by a <a href="#(tech._custodian)" class="techoutside" pltdoc="x"><span class="techinside">custodian</span></a>, so that custodians form a hierarchy.
Every object managed by a subordinate custodian is also managed by the
custodian&rsquo;s owner.</p><p>When a <a href="#(tech._custodian)" class="techoutside" pltdoc="x"><span class="techinside">custodian</span></a> is shut down via
<span class="RktSym"><a href="custodians.html#(def._((quote._~23~25kernel)._custodian-shutdown-all))" class="RktValLink" pltdoc="x">custodian-shutdown-all</a></span>, it forcibly and immediately closes
the ports, TCP connections, etc. that it manages, as well as
terminating (or suspending) its threads. A custodian that has been
shut down cannot manage new objects.  If the current custodian is shut
down before a procedure is called to create a managed resource (e.g.,
<span class="RktSym">open-input-port</span>, <span class="RktSym"><a href="threads.html#(def._((quote._~23~25kernel)._thread))" class="RktValLink" pltdoc="x">thread</a></span>), the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p>A thread can have multiple managing custodians, and a suspended thread
created with <span class="RktSym"><a href="threads.html#(def._((quote._~23~25kernel)._thread/suspend-to-kill))" class="RktValLink" pltdoc="x">thread/suspend-to-kill</a></span> can have zero
custodians. Extra custodians become associated with a thread through
<span class="RktSym"><a href="threads.html#(def._((quote._~23~25kernel)._thread-resume))" class="RktValLink" pltdoc="x">thread-resume</a></span> (see <a href="threads.html#(part._threadkill)" pltdoc="x">Suspending, Resuming, and Killing Threads</a>). When a thread
has multiple custodians, it is not necessarily killed by a
<span class="RktSym"><a href="custodians.html#(def._((quote._~23~25kernel)._custodian-shutdown-all))" class="RktValLink" pltdoc="x">custodian-shutdown-all</a></span>, but shut-down custodians are removed
from the thread&rsquo;s managing set, and the thread is killed when its
managing set becomes empty.</p><p>The values managed by a custodian are only weakly held by the
custodian. As a result, a <a href="willexecutor.html#(tech._will)" pltdoc="x">will</a> can be executed for a value that
is managed by a custodian. In addition, a custodian only weakly
references its subordinate custodians; if a subordinate custodian is
unreferenced but has its own subordinates, then the custodian may be
collected, at which point its subordinates become immediately
subordinate to the collected custodian&rsquo;s superordinate custodian.</p><p>In addition to the other entities managed by a custodian, a
<a name="(tech._custodian._box)"></a><span style="font-style: italic">custodian box</span> created with <span class="RktSym"><a href="custodians.html#(def._((quote._~23~25kernel)._make-custodian-box))" class="RktValLink" pltdoc="x">make-custodian-box</a></span>
strongly holds onto a value placed in the box until the box&rsquo;s
custodian is shut down. The custodian only weakly retains the box
itself, however (so the box and its content can be collected if there
are no other references to them).</p><p>When Racket is compiled with support for per-custodian memory
accounting (see <span class="RktSym"><a href="custodians.html#(def._((quote._~23~25kernel)._custodian-memory-accounting-available~3f))" class="RktValLink" pltdoc="x">custodian-memory-accounting-available?</a></span>), the
<span class="RktSym"><a href="garbagecollection.html#(def._((quote._~23~25kernel)._current-memory-use))" class="RktValLink" pltdoc="x">current-memory-use</a></span> procedure can report a custodian-specific
result.  This result determines how much memory is occupied by objects
that are reachable from the custodian&rsquo;s managed values, especially its
threads, and including its sub-custodians&rsquo; managed values. If an
object is reachable from two custodians where neither is an ancestor
of the other, an object is arbitrarily charged to one or the other,
and the choice can change after each collection; objects reachable
from both a custodian and its descendant, however, are reliably
charged to the custodian and not to the descendants, unless the
custodian can reach the objects only through a descendant custodian or
a descendant&rsquo;s thread.  Reachability for per-custodian accounting does
not include weak references, references to threads managed by other
custodians, references to other custodians, or references to custodian
boxes for other custodians.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="model.html" title="backward to &quot;1 Language Model&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="model.html" title="up to &quot;1 Language Model&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="syntax-model.html" title="forward to &quot;1.2 Syntax Model&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>