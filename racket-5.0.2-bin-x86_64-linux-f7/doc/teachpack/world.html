<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>1.2&nbsp;Simulations and Animations: "world.ss"</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Teachpacks</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="htdp.html" class="tocviewselflink" pltdoc="x">Ht<span class="mywbr"> </span>DP Teachpacks</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="2htdp2htdp.html" class="tocviewlink" pltdoc="x">Ht<span class="mywbr"> </span>DP/<span class="mywbr"> </span>2e Teachpacks</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>1&nbsp;</td><td><a href="htdp.html" class="tocviewlink" pltdoc="x">Ht<span class="mywbr"> </span>DP Teachpacks</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="image.html" class="tocviewlink" pltdoc="x">Manipulating Images:<span class="mywbr"> </span> <span class="stt">"image.ss"</span><a name="(idx._(gentag._0._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Simulations and Animations:<span class="mywbr"> </span> <span class="stt">"world.ss"</span><a name="(idx._(gentag._1._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="convert.html" class="tocviewlink" pltdoc="x">Converting Temperatures:<span class="mywbr"> </span> <span class="stt">"convert.ss"</span><a name="(idx._(gentag._2._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.4&nbsp;</td><td><a href="guess.html" class="tocviewlink" pltdoc="x">Guessing Numbers:<span class="mywbr"> </span> <span class="stt">"guess.ss"</span><a name="(idx._(gentag._3._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.5&nbsp;</td><td><a href="master.html" class="tocviewlink" pltdoc="x">Master<span class="mywbr"> </span>Minding:<span class="mywbr"> </span> <span class="stt">"master.ss"</span><a name="(idx._(gentag._4._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.6&nbsp;</td><td><a href="draw.html" class="tocviewlink" pltdoc="x">Simple Drawing:<span class="mywbr"> </span> <span class="stt">"draw.ss"</span><a name="(idx._(gentag._5._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.7&nbsp;</td><td><a href="hangman.html" class="tocviewlink" pltdoc="x">Hangman:<span class="mywbr"> </span> <span class="stt">"hangman.ss"</span><a name="(idx._(gentag._6._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.8&nbsp;</td><td><a href="arrow.html" class="tocviewlink" pltdoc="x">Managing Control Arrows:<span class="mywbr"> </span> <span class="stt">"arrow.ss"</span><a name="(idx._(gentag._7._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.9&nbsp;</td><td><a href="docs.html" class="tocviewlink" pltdoc="x">Manipulating Simple HTML Documents:<span class="mywbr"> </span> <span class="stt">"docs.ss"</span><a name="(idx._(gentag._8._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.10&nbsp;</td><td><a href="dir.html" class="tocviewlink" pltdoc="x">Working with Files and Directories:<span class="mywbr"> </span> <span class="stt">"dir.ss"</span><a name="(idx._(gentag._9._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.11&nbsp;</td><td><a href="graphing.html" class="tocviewlink" pltdoc="x">Graphing Functions:<span class="mywbr"> </span> <span class="stt">"graphing.ss"</span><a name="(idx._(gentag._10._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.12&nbsp;</td><td><a href="gui.html" class="tocviewlink" pltdoc="x">Simple Graphical User Interfaces:<span class="mywbr"> </span> <span class="stt">"gui.ss"</span><a name="(idx._(gentag._11._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.13&nbsp;</td><td><a href="arrow-gui.html" class="tocviewlink" pltdoc="x">An Arrow GUI:<span class="mywbr"> </span> <span class="stt">"arrow-<wbr></wbr>gui.ss"</span><a name="(idx._(gentag._12._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.14&nbsp;</td><td><a href="elevator.html" class="tocviewlink" pltdoc="x">Controlling an Elevator:<span class="mywbr"> </span> <span class="stt">"elevator.ss"</span><a name="(idx._(gentag._13._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.15&nbsp;</td><td><a href="show-queen.html" class="tocviewlink" pltdoc="x">Queens:<span class="mywbr"> </span> <span class="stt">"show-<wbr></wbr>queen.ss"</span><a name="(idx._(gentag._14._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr><tr><td align="right">1.16&nbsp;</td><td><a href="matrix.html" class="tocviewlink" pltdoc="x">Matrix Operations:<span class="mywbr"> </span> <span class="stt">"matrix.ss"</span><a name="(idx._(gentag._15._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>1.2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Simulations and Animations:<span class="mywbr"> </span> <span class="stt">"world.ss"</span><a name="(idx._(gentag._1._(lib._teachpack/teachpack..scrbl)))"></a></a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.2.1&nbsp;</td><td><a href="#(part._simulations)" class="tocviewlink" pltdoc="x">Simple Simulations</a></td></tr><tr><td align="right">1.2.2&nbsp;</td><td><a href="#(part._interactive)" class="tocviewlink" pltdoc="x">Interactions</a></td></tr><tr><td align="right">1.2.3&nbsp;</td><td><a href="#(part._example)" class="tocviewlink" pltdoc="x">A First Example</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.2.1<tt>&nbsp;</tt></span><a href="#(part._simulations)" class="tocsubseclink" pltdoc="x">Simple Simulations</a></td></tr><tr><td><a href="#(def._((lib._htdp/world..rkt)._run-simulation))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: htdp/world"><span class="RktSym"><span class="RktValLink">run-<wbr></wbr>simulation</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.2.2<tt>&nbsp;</tt></span><a href="#(part._interactive)" class="tocsubseclink" pltdoc="x">Interactions</a></td></tr><tr><td><a href="#(def._((lib._htdp/world..rkt)._big-bang))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: htdp/world"><span class="RktSym"><span class="RktValLink">big-<wbr></wbr>bang</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._htdp/world..rkt)._on-tick-event))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: htdp/world"><span class="RktSym"><span class="RktValLink">on-<wbr></wbr>tick-<wbr></wbr>event</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._htdp/world..rkt)._key-event~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: htdp/world"><span class="RktSym"><span class="RktValLink">key-<wbr></wbr>event?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._htdp/world..rkt)._key~3d~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: htdp/world"><span class="RktSym"><span class="RktValLink">key=?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._htdp/world..rkt)._on-key-event))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: htdp/world"><span class="RktSym"><span class="RktValLink">on-<wbr></wbr>key-<wbr></wbr>event</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._htdp/world..rkt)._on-mouse-event))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: htdp/world"><span class="RktSym"><span class="RktValLink">on-<wbr></wbr>mouse-<wbr></wbr>event</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._htdp/world..rkt)._on-redraw))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: htdp/world"><span class="RktSym"><span class="RktValLink">on-<wbr></wbr>redraw</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._htdp/world..rkt)._stop-when))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: htdp/world"><span class="RktSym"><span class="RktValLink">stop-<wbr></wbr>when</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.2.3<tt>&nbsp;</tt></span><a href="#(part._example)" class="tocsubseclink" pltdoc="x">A First Example</a></td></tr><tr><td><span class="tocsublinknumber">1.2.3.1<tt>&nbsp;</tt></span><a href="#(part._.Understanding_a_.Door)" class="tocsubseclink" pltdoc="x">Understanding a Door</a></td></tr><tr><td><span class="tocsublinknumber">1.2.3.2<tt>&nbsp;</tt></span><a href="#(part._.Simulations_of_the_.World)" class="tocsubseclink" pltdoc="x">Simulations of the World</a></td></tr><tr><td><span class="tocsublinknumber">1.2.3.3<tt>&nbsp;</tt></span><a href="#(part._.Simulating_a_.Door__.Data)" class="tocsubseclink" pltdoc="x">Simulating a Door:<span class="mywbr"> </span> Data</a></td></tr><tr><td><span class="tocsublinknumber">1.2.3.4<tt>&nbsp;</tt></span><a href="#(part._.Simulating_a_.Door__.Functions)" class="tocsubseclink" pltdoc="x">Simulating a Door:<span class="mywbr"> </span> Functions</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="image.html" title="backward to &quot;1.1 Manipulating Images: &quot;image.ss&quot;&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="htdp.html" title="up to &quot;1 HtDP Teachpacks&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="convert.html" title="forward to &quot;1.3 Converting Temperatures: &quot;convert.ss&quot;&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>1.2<tt>&nbsp;</tt><a name="(part._world)"></a><a name="(mod-path._htdp/world)"></a>Simulations and Animations: <span class="stt">"world.ss"</span><a name="(idx._(gentag._1._(lib._teachpack/teachpack..scrbl)))"></a></h4><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../htdp-langs/require.html#(form._((lib._lang/htdp-beginner..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" pltdoc="x"><span class="RktSym">htdp/world</span></a><span class="RktPn">)</span></td></tr></table></p><p><table cellspacing="0" align="center" cellspacing="6" height="600" width="70%"><tr><td><p>This teachpack is deprecated. Use <a href="2htdpuniverse.html" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/universe</span></a> instead. See the <a href="2htdphtdp-port.html" pltdoc="x">Porting World Programs to Universe</a> section for information on how to adapt old code to the new teachpack.</p></td></tr></table></p><p><span style="font-style: italic">Note</span>: For a quick and educational introduction to the teachpack, see
<a href="http://www.ccs.neu.edu/home/matthias/HtDP/Prologue/book.html">How
to Design Programs, Second Edition: Prologue</a>. As of August 2008, we also
have a series of projects available as a small booklet on
<a href="http://world.cs.brown.edu/">How to Design Worlds</a>.</p><p>The purpose of this documentation is to give experienced Schemers a concise
overview for using the library and for incorporating it elsewhere. The last
section presents <a href="#(part._example)" pltdoc="x">A First Example</a> for an extremely simple domain and is
suited for a novice who knows how to design conditional functions for
symbols.</p><p>The teachpack provides two sets of tools. The first allows students to
create and display a series of animated scenes, i.e., a simulation. The
second one generalizes the first by adding interactive GUI features.</p><h5>1.2.1<tt>&nbsp;</tt><a name="(part._simulations)"></a>Simple Simulations</h5><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._htdp/world..rkt)._run-simulation))"></a><a name="(def._((lib._htdp/world..rkt)._run-simulation))"></a><span title="Provided from: htdp/world"><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._run-simulation))" class="RktValLink" pltdoc="x">run-simulation</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">w</span><span class="hspace">&nbsp;</span><span class="RktVar">h</span><span class="hspace">&nbsp;</span><span class="RktVar">r</span><span class="hspace">&nbsp;</span><span class="RktVar">create-image</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._true))" class="RktValLink" pltdoc="x">true</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">w</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._natural-number/c))" class="RktValLink" pltdoc="x">natural-number/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">h</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._natural-number/c))" class="RktValLink" pltdoc="x">natural-number/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">r</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" class="RktValLink" pltdoc="x">number?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">create-image</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._natural-number/c))" class="RktValLink" pltdoc="x">natural-number/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym">scene</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">creates and shows a canvas of width <span class="RktVar">w</span> and height <span class="RktVar">h</span> ,
starts a clock, making it tick every <span class="RktVar">r</span> (usually fractional)
seconds. Every time the clock ticks, drscheme applies <span class="RktVar">create-image</span> to
the number of ticks passed since this function call. The results of
these applications are displayed in the canvas.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">create-UFO-scene</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._place-image))" class="RktValLink" pltdoc="x">place-image</a></span><span class="hspace">&nbsp;</span><span class="RktSym">UFO</span><span class="hspace">&nbsp;</span><span class="RktVal">50</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._empty-scene))" class="RktValLink" pltdoc="x">empty-scene</a></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">UFO</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._overlay))" class="RktValLink" pltdoc="x">overlay</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._circle))" class="RktValLink" pltdoc="x">circle</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">solid</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">green</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">rectangle</a></span><span class="hspace">&nbsp;</span><span class="RktVal">40</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">solid</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">green</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._run-simulation))" class="RktValLink" pltdoc="x">run-simulation</a></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._/))" class="RktValLink" pltdoc="x">/</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">28</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">create-UFO-scene</span><span class="RktPn">)</span></td></tr></table></div></p><h5>1.2.2<tt>&nbsp;</tt><a name="(part._interactive)"></a>Interactions</h5><p>An animation starts from a given &ldquo;world&rdquo; and generates new ones in
 response to events on the computer. This teachpack keeps track of the
 &ldquo;current world&rdquo; and recognizes three kinds of events: clock ticks;
 keyboard presses and releases; and mouse movements, mouse clicks,
 etc.</p><p>Your program may deal with such events via the <span style="font-style: italic">installation</span> of
 <span style="font-style: italic">handlers</span>.  The teachpack provides for the installation of three
 event handlers: <span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._on-tick-event))" class="RktValLink" pltdoc="x">on-tick-event</a></span>, <span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._on-key-event))" class="RktValLink" pltdoc="x">on-key-event</a></span>, and
 <span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._on-mouse-event))" class="RktValLink" pltdoc="x">on-mouse-event</a></span>. In addition, it provides for the installation of
 a <span class="RktSym">draw</span> handler, which is called every time your program should
 visualize the current world.</p><p>The following picture provides an intuitive overview of the workings of
 "world".</p><p><img src="world.png" alt="" /></p><p>The <span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._big-bang))" class="RktValLink" pltdoc="x">big-bang</a></span> function installs <span style="font-style: italic">World_0</span> as the initial
 world; the callbacks <span style="font-style: italic">tock</span>, <span style="font-style: italic">react</span>, and <span style="font-style: italic">click</span> transform
 one world into another one; <span style="font-style: italic">done</span> checks each time whether the world
 is final; and <span style="font-style: italic">draw</span> renders each world as a scene.</p><p><a name="(tech._world)"></a><span style="font-style: italic">World</span> <span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></p><p>For animated worlds and games, using the teachpack requires that you
 provide a data definition for <a href="#(tech._world)" class="techoutside" pltdoc="x"><span class="techinside">World</span></a>. In principle, there are no
 constraints on this data definition. You can even keep it implicit, even
 if this violates the Design Recipe.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._htdp/world..rkt)._big-bang))"></a><a name="(def._((lib._htdp/world..rkt)._big-bang))"></a><span title="Provided from: htdp/world"><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._big-bang))" class="RktValLink" pltdoc="x">big-bang</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">width</span><span class="hspace">&nbsp;</span><span class="RktVar">height</span><span class="hspace">&nbsp;</span><span class="RktVar">r</span><span class="hspace">&nbsp;</span><span class="RktVar">world0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._true))" class="RktValLink" pltdoc="x">true</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">width</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._natural-number/c))" class="RktValLink" pltdoc="x">natural-number/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">height</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._natural-number/c))" class="RktValLink" pltdoc="x">natural-number/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">r</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" class="RktValLink" pltdoc="x">number?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">world0</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><a href="#(tech._world)" class="techoutside" pltdoc="x"><span class="techinside">World</span></a></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: htdp/world"><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._big-bang))" class="RktValLink" pltdoc="x">big-bang</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">width</span><span class="hspace">&nbsp;</span><span class="RktVar">height</span><span class="hspace">&nbsp;</span><span class="RktVar">r</span><span class="hspace">&nbsp;</span><span class="RktVar">world0</span><span class="hspace">&nbsp;</span><span class="RktVar">animated-gif?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._true))" class="RktValLink" pltdoc="x">true</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">width</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._natural-number/c))" class="RktValLink" pltdoc="x">natural-number/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">height</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._natural-number/c))" class="RktValLink" pltdoc="x">natural-number/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">r</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" class="RktValLink" pltdoc="x">number?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">world0</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><a href="#(tech._world)" class="techoutside" pltdoc="x"><span class="techinside">World</span></a></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">animated-gif?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr></table></div><div class="SIntrapara">Creates and displays a <span class="RktVar">width</span> x <span class="RktVar">height</span> canvas,
starts the clock,
makes it tick every <span class="RktVar">r</span> seconds,
and makes <span class="RktVar">world0</span> the current world.
If it is called with five instead of four arguments and the last one
(<span class="RktVar">animated-gif?</span>) is <span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._true))" class="RktValLink" pltdoc="x">true</a></span>, the teachpack allows the
generation of images from the animation, including an animated GIF image. </div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._htdp/world..rkt)._on-tick-event))"></a><a name="(def._((lib._htdp/world..rkt)._on-tick-event))"></a><span title="Provided from: htdp/world"><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._on-tick-event))" class="RktValLink" pltdoc="x">on-tick-event</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tock</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._true))" class="RktValLink" pltdoc="x">true</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tock</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><a href="#(tech._world)" class="techoutside" pltdoc="x"><span class="techinside">World</span></a><span class="hspace">&nbsp;</span><a href="#(tech._world)" class="techoutside" pltdoc="x"><span class="techinside">World</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Tell DrRacket to call <span class="RktVar">tock</span> on the current world every time the
clock ticks. The result of the call becomes the current world.</div></p><p><a name="(tech._keyevent)"></a><span style="font-style: italic">KeyEvent</span> <span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="stt"> </span><span class="RktSym"><a href="../reference/characters.html#(def._((quote._~23~25kernel)._char~3f))" class="RktValLink" pltdoc="x">char?</a></span><span class="stt"> </span><span class="RktSym"><a href="../reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span><span class="RktPn">)</span></p><p>A <a href="#(tech._keyevent)" class="techoutside" pltdoc="x"><span class="techinside">KeyEvent</span></a> represents key board events, e.g., keys pressed or
   released, by the computer&rsquo;s user. A <span class="RktSym"><a href="../reference/characters.html#(def._((quote._~23~25kernel)._char~3f))" class="RktValLink" pltdoc="x">char?</a></span> <a href="#(tech._keyevent)" class="techoutside" pltdoc="x"><span class="techinside">KeyEvent</span></a> is
   used to signal that the user has hit an alphanumeric key. Symbols such
   as <span class="RktVal">'</span><span class="RktVal">left</span>, <span class="RktVal">'</span><span class="RktVal">right</span>, <span class="RktVal">'</span><span class="RktVal">up</span>, <span class="RktVal">'</span><span class="RktVal">down</span>,
   <span class="RktVal">'</span><span class="RktVal">release</span> denote arrow keys or special events, such as releasing
   the key on the keypad.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._htdp/world..rkt)._key-event~3f))"></a><a name="(def._((lib._htdp/world..rkt)._key-event~3f))"></a><span title="Provided from: htdp/world"><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._key-event~3f))" class="RktValLink" pltdoc="x">key-event?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">is <span class="RktVar">x</span> a <a href="#(tech._keyevent)" class="techoutside" pltdoc="x"><span class="techinside">KeyEvent</span></a></div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._htdp/world..rkt)._key~3d~3f))"></a><a name="(def._((lib._htdp/world..rkt)._key~3d~3f))"></a><span title="Provided from: htdp/world"><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._key~3d~3f))" class="RktValLink" pltdoc="x">key=?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span><span class="RktVar">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._key-event~3f))" class="RktValLink" pltdoc="x">key-event?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">y</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._key-event~3f))" class="RktValLink" pltdoc="x">key-event?</a></span></td></tr></table></div><div class="SIntrapara">compares two <a href="#(tech._keyevent)" class="techoutside" pltdoc="x"><span class="techinside">KeyEvent</span></a> for equality</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._htdp/world..rkt)._on-key-event))"></a><a name="(def._((lib._htdp/world..rkt)._on-key-event))"></a><span title="Provided from: htdp/world"><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._on-key-event))" class="RktValLink" pltdoc="x">on-key-event</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">change</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._true))" class="RktValLink" pltdoc="x">true</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">change</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><a href="#(tech._world)" class="techoutside" pltdoc="x"><span class="techinside">World</span></a><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._key-event~3f))" class="RktValLink" pltdoc="x">key-event?</a></span><span class="hspace">&nbsp;</span><a href="#(tech._world)" class="techoutside" pltdoc="x"><span class="techinside">World</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Tell DrRacket to call <span class="RktVar">change</span> on the current world and a
   <a href="#(tech._keyevent)" class="techoutside" pltdoc="x"><span class="techinside">KeyEvent</span></a> for every keystroke the user of the computer makes. The result
   of the call becomes the current world.</div></p><p><div class="SIntrapara">Here is a typical key-event handler:
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">change</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._key~3d~3f))" class="RktValLink" pltdoc="x">key=?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">left</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-go</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">-DELTA</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._key~3d~3f))" class="RktValLink" pltdoc="x">key=?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">right</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-go</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">+DELTA</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/characters.html#(def._((quote._~23~25kernel)._char~3f))" class="RktValLink" pltdoc="x">char?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">to demonstrate order-free checking </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._key~3d~3f))" class="RktValLink" pltdoc="x">key=?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">up</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-go</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">-DELTA</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._key~3d~3f))" class="RktValLink" pltdoc="x">key=?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a-key-event</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">down</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-go</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">+DELTA</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div></p><p><a name="(tech._mouseevent)"></a><span style="font-style: italic">MouseEvent</span> <span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._one-of/c))" class="RktValLink" pltdoc="x">one-of/c</a></span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">button-down</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">button-up</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">drag</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">move</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">enter</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">leave</span><span class="RktPn">)</span></p><p>A <a href="#(tech._mouseevent)" class="techoutside" pltdoc="x"><span class="techinside">MouseEvent</span></a> represents mouse events, e.g., mouse movements or mouse clicks, by the
   computer&rsquo;s user.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._htdp/world..rkt)._on-mouse-event))"></a><a name="(def._((lib._htdp/world..rkt)._on-mouse-event))"></a><span title="Provided from: htdp/world"><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._on-mouse-event))" class="RktValLink" pltdoc="x">on-mouse-event</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">clack</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._true))" class="RktValLink" pltdoc="x">true</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">clack</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><a href="#(tech._world)" class="techoutside" pltdoc="x"><span class="techinside">World</span></a><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._natural-number/c))" class="RktValLink" pltdoc="x">natural-number/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._natural-number/c))" class="RktValLink" pltdoc="x">natural-number/c</a></span><span class="hspace">&nbsp;</span><a href="#(tech._mouseevent)" class="techoutside" pltdoc="x"><span class="techinside">MouseEvent</span></a><span class="hspace">&nbsp;</span><a href="#(tech._world)" class="techoutside" pltdoc="x"><span class="techinside">World</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Tell DrRacket to call <span class="RktVar">clack</span> on the current world, the current
<span class="RktSym">x</span> and <span class="RktSym">y</span> coordinates of the mouse, and a
<a href="#(tech._mouseevent)" class="techoutside" pltdoc="x"><span class="techinside">MouseEvent</span></a> for every action of the mouse by the user of the
computer. The result of the call becomes the current world.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._htdp/world..rkt)._on-redraw))"></a><a name="(def._((lib._htdp/world..rkt)._on-redraw))"></a><span title="Provided from: htdp/world"><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._on-redraw))" class="RktValLink" pltdoc="x">on-redraw</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">to-scene</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._true))" class="RktValLink" pltdoc="x">true</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">to-scene</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><a href="#(tech._world)" class="techoutside" pltdoc="x"><span class="techinside">World</span></a><span class="hspace">&nbsp;</span><a href="image.html#(tech._scene)" class="techoutside" pltdoc="x"><span class="techinside">Scene</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara"> Tell DrRacket to call <span class="RktVar">to-scene</span>
whenever the canvas must be redrawn. The canvas is usually re-drawn after a tick event, a keyboard
event, or a mouse event has occurred.  The generated scene is  displayed in the world&rsquo;s canvas.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._htdp/world..rkt)._stop-when))"></a><a name="(def._((lib._htdp/world..rkt)._stop-when))"></a><span title="Provided from: htdp/world"><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._stop-when))" class="RktValLink" pltdoc="x">stop-when</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">last-world?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._true))" class="RktValLink" pltdoc="x">true</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">last-world?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><a href="#(tech._world)" class="techoutside" pltdoc="x"><span class="techinside">World</span></a><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Tell DrRacket to call <span class="RktVar">last-world?</span> whenever the canvas is
drawn. If this call produces <span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._true))" class="RktValLink" pltdoc="x">true</a></span>, the clock is stopped; no more
tick events, <a href="#(tech._keyevent)" class="techoutside" pltdoc="x"><span class="techinside">KeyEvent</span></a>s, or <a href="#(tech._mouseevent)" class="techoutside" pltdoc="x"><span class="techinside">MouseEvent</span></a>s are forwarded to
the respective handlers. As a result, the canvas isn&rsquo;t updated either.</div></p><p><div class="SIntrapara">Example: The following examples shows that <span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._run-simulation))" class="RktValLink" pltdoc="x">run-simulation</a></span><span class="stt"> </span><span class="RktVal">100</span><span class="stt"> </span><span class="RktVal">100</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._/))" class="RktValLink" pltdoc="x">/</a></span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">28</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">create-UFO-scene</span><span class="RktPn">)</span> is a short-hand for three lines of code:
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">create-UFO-scene</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._place-image))" class="RktValLink" pltdoc="x">place-image</a></span><span class="hspace">&nbsp;</span><span class="RktSym">UFO</span><span class="hspace">&nbsp;</span><span class="RktVal">50</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._empty-scene))" class="RktValLink" pltdoc="x">empty-scene</a></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">UFO</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._overlay))" class="RktValLink" pltdoc="x">overlay</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._circle))" class="RktValLink" pltdoc="x">circle</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">solid</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">green</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._rectangle))" class="RktValLink" pltdoc="x">rectangle</a></span><span class="hspace">&nbsp;</span><span class="RktVal">40</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">solid</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">green</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._big-bang))" class="RktValLink" pltdoc="x">big-bang</a></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">/1</span><span class="hspace">&nbsp;</span><span class="RktVal">28</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._on-tick-event))" class="RktValLink" pltdoc="x">on-tick-event</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._add1))" class="RktValLink" pltdoc="x">add1</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._on-redraw))" class="RktValLink" pltdoc="x">on-redraw</a></span><span class="hspace">&nbsp;</span><span class="RktSym">create-UFO-scene</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Exercise: Add a condition for stopping the flight of the UFO when it
reaches the bottom.</div></p><h5>1.2.3<tt>&nbsp;</tt><a name="(part._example)"></a>A First Example</h5><h5>1.2.3.1<tt>&nbsp;</tt><a name="(part._.Understanding_a_.Door)"></a>Understanding a Door</h5><p>Say we want to represent a door with an automatic door closer. If this kind
 of door is locked, you can unlock it. While this doesn&rsquo;t open the door per
 se, it is now possible to do so. That is, an unlocked door is closed and
 pushing at the door opens it. Once you have passed through the door and
 you let go, the automatic door closer takes over and closes the door
 again. Of course, at this point you could lock it again.</p><p>Here is a picture that translates our words into a graphical
 representation:</p><p><img src="door-real.png" alt="" /></p><p>The picture displays a so-called "state machine". The three circled words
 are the states that our informal description of the door identified:
 locked, closed (and unlocked), and open. The arrows specify how the door
 can go from one state into another. For example, when the door is open,
 the automatic door closer shuts the door as time passes. This transition
 is indicated by the arrow labeled "time passes." The other arrows
 represent transitions in a similar manner:</p><ul><li><p>"push" means a person pushes the door open (and let&rsquo;s go);</p></li><li><p>"lock" refers to the act of inserting a key into the lock and turning
it to the locked position; and</p></li><li><p>"unlock" is the opposite of "lock".</p></li></ul><h5>1.2.3.2<tt>&nbsp;</tt><a name="(part._.Simulations_of_the_.World)"></a>Simulations of the World</h5><p>Simulating any dynamic behavior via a program demands two different
 activities. First, we must tease out those portions of our "world" that
 change over time or in reaction to actions, and we must develop a data
 representation <a name="(tech._d)"></a><span style="font-style: italic">D</span> for this information.  Keep in mind that a good data
 definition makes it easy for readers to map data to information in the
 real world and vice versa. For all others aspects of the world, we use
 global constants, including graphical or visual constants that are used in
 conjunction with the rendering operations.</p><p>Second, we must translate the "world" actions &ndash; the arrows in the above
 diagram &ndash; into interactions with the computer that the world teachpack can
 deal with. Once we have decided to use the passing of time for one aspect
 and mouse movements for another, we must develop functions that map the
 current state of the world &ndash; represented as data &ndash; into the next state of
 the world. Since the data definition <a href="#(tech._d)" class="techoutside" pltdoc="x"><span class="techinside">D</span></a> describes the class of data
 that represents the world, these functions have the following general
 contract and purpose statements:</p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">tick : </span><a href="#(tech._d)" class="techoutside" pltdoc="x"><span class="techinside">D</span></a><span class="RktCmt"> -&gt; </span><a href="#(tech._d)" class="techoutside" pltdoc="x"><span class="techinside">D</span></a></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">deal with the passing of time </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tick</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">click : </span><a href="#(tech._d)" class="techoutside" pltdoc="x"><span class="techinside">D</span></a><span class="RktCmt"> </span><span class="RktSym">Number</span><span class="RktCmt"> </span><span class="RktSym">Number</span><span class="RktCmt"> </span><a href="#(tech._mouseevent)" class="techoutside" pltdoc="x"><span class="techinside">MouseEvent</span></a><span class="RktCmt"> -&gt; </span><a href="#(tech._d)" class="techoutside" pltdoc="x"><span class="techinside">D</span></a></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">deal with a mouse click at (x,y) of kind </span><span class="RktSym">me</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">in the current world </span><span class="RktSym">w</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">click</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">me</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">control : </span><a href="#(tech._d)" class="techoutside" pltdoc="x"><span class="techinside">D</span></a><span class="RktCmt"> </span><a href="#(tech._keyevent)" class="techoutside" pltdoc="x"><span class="techinside">KeyEvent</span></a><span class="RktCmt"> -&gt; </span><a href="#(tech._d)" class="techoutside" pltdoc="x"><span class="techinside">D</span></a></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">deal with a key event (symbol, char) </span><span class="RktSym">ke</span><span class="RktCmt"> </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">in the current world </span><span class="RktSym">w</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">control</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">ke</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></p><p>That is, the contracts of the various hooks dictate what the contracts of
these functions are once we have defined how to represent the world in
data.</p><p>A typical program does not use all three of these actions and functions but
 often just one or two. Furthermore, the design of these functions provides
 only the top-level, initial design goal. It often demands the design of
 many auxiliary functions.</p><h5>1.2.3.3<tt>&nbsp;</tt><a name="(part._.Simulating_a_.Door__.Data)"></a>Simulating a Door: Data</h5><p>Our first and immediate goal is to represent the world as data. In this
 specific example, the world consists of our door and what changes about
 the door is whether it is locked, unlocked but closed, or open. We use
 three symbols to represent the three states:</p><p><a name="(tech._sd)"></a><span style="font-style: italic">SD</span></p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">DATA DEF.</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The state of the door (SD) is one of: </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktVal">'</span><span class="RktVal">locked</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktVal">'</span><span class="RktVal">closed</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> </span><span class="RktVal">'</span><span class="RktVal">open</span></td></tr></table></p><p>Symbols are particularly well-suited here because they directly express
 the state of the door.</p><p>Now that we have a data definition, we must also decide which computer
 actions and interactions should model the various actions on the door.
 Our pictorial representation of the door&rsquo;s states and transitions,
 specifically the arrow from "open" to "closed" suggests the use of a
 function that simulates time. For the other three arrows, we could use
 either keyboard events or mouse clicks or both. Our solution uses three
 keystrokes:
<span class="RktVal">#\u</span> for unlocking the door,
<span class="RktVal">#\l</span> for locking it, and
<span class="RktVal">#\space</span> for pushing it open.
 We can express these choices graphically by translating the above "state
 machine" from the world of information into the world of data:</p><p><img src="door-sim.png" alt="" /></p><h5>1.2.3.4<tt>&nbsp;</tt><a name="(part._.Simulating_a_.Door__.Functions)"></a>Simulating a Door: Functions</h5><p>Our analysis and data definition leaves us with three functions to design:</p><ul><li><p><span class="RktSym">automatic-closer</span>, which closes the time during one tick;</p></li><li><p><span class="RktSym">door-actions</span>, which manipulates the time in response to
pressing a key; and</p></li><li><p><span class="RktSym">render</span>, which translates the current state of the door into
a visible scene.</p></li></ul><p>Let&rsquo;s start with <span class="RktSym">automatic-closer</span>. We know its contract and it is
easy to refine the purpose statement, too:</p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">automatic-closer : SD -&gt; SD</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">closes an open door over the period of one tick </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">automatic-closer</span><span class="hspace">&nbsp;</span><span class="RktSym">state-of-door</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></p><p>Making up examples is trivial when the world can only be in one of three
 states:</p><blockquote><table cellspacing="0" class="boxed" cellspacing="6"><tr><td><p> given state </p></td><td><p> desired state </p></td></tr><tr><td><p> &rsquo;locked </p></td><td><p> &rsquo;locked </p></td></tr><tr><td><p> &rsquo;closed </p></td><td><p> &rsquo;closed </p></td></tr><tr><td><p> &rsquo;open </p></td><td><p> &rsquo;closed </p></td></tr></table></blockquote><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">automatic-closer : SD -&gt; SD</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">closes an open door over the period of one tick </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">automatic-closer</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">locked</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">locked</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">automatic-closer</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">automatic-closer</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">open</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">automatic-closer</span><span class="hspace">&nbsp;</span><span class="RktSym">state-of-door</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></p><p>The template step demands a conditional with three clauses:</p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">automatic-closer</span><span class="hspace">&nbsp;</span><span class="RktSym">state-of-door</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._symbol~3d~3f))" class="RktValLink" pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">locked</span><span class="hspace">&nbsp;</span><span class="RktSym">state-of-door</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._symbol~3d~3f))" class="RktValLink" pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="hspace">&nbsp;</span><span class="RktSym">state-of-door</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._symbol~3d~3f))" class="RktValLink" pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">open</span><span class="hspace">&nbsp;</span><span class="RktSym">state-of-door</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></p><p>The examples basically dictate what the outcomes of the three cases must
 be:</p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">automatic-closer</span><span class="hspace">&nbsp;</span><span class="RktSym">state-of-door</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._symbol~3d~3f))" class="RktValLink" pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">locked</span><span class="hspace">&nbsp;</span><span class="RktSym">state-of-door</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">locked</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._symbol~3d~3f))" class="RktValLink" pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="hspace">&nbsp;</span><span class="RktSym">state-of-door</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._symbol~3d~3f))" class="RktValLink" pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">open</span><span class="hspace">&nbsp;</span><span class="RktSym">state-of-door</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></p><p>Don&rsquo;t forget to run the example-tests.</p><p>For the remaining three arrows of the diagram, we design a function that
 reacts to the three chosen keyboard events. As mentioned, functions that
 deal with keyboard events consume both a world and a keyevent:</p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">door-actions : SD Keyevent -&gt; SD</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">key events simulate actions on the door </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">door-actions</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></p><blockquote><table cellspacing="0" class="boxed" cellspacing="6"><tr><td><p> given state </p></td><td><p> given keyevent </p></td><td><p> desired state </p></td></tr><tr><td><p>  &rsquo;locked </p></td><td><p> #\u    </p></td><td><p> &rsquo;closed</p></td></tr><tr><td><p>  &rsquo;closed </p></td><td><p> #\l    </p></td><td><p> &rsquo;locked</p></td></tr><tr><td><p>  &rsquo;closed </p></td><td><p> #\space</p></td><td><p> &rsquo;open </p></td></tr><tr><td><p>  &rsquo;open   </p></td><td><p>  &ndash;  </p></td><td><p> &rsquo;open </p></td></tr></table></blockquote><p>The examples combine what the above picture shows and the choices we made
 about mapping actions to keyboard events.</p><p>From here, it is straightforward to turn this into a complete design:</p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">door-actions</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._and))" class="RktStxLink" pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._symbol~3d~3f))" class="RktValLink" pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">locked</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._key~3d~3f))" class="RktValLink" pltdoc="x">key=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#\u</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._and))" class="RktStxLink" pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._symbol~3d~3f))" class="RktValLink" pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._key~3d~3f))" class="RktValLink" pltdoc="x">key=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#\l</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">locked</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._and))" class="RktStxLink" pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((lib._racket/bool..rkt)._symbol~3d~3f))" class="RktValLink" pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._key~3d~3f))" class="RktValLink" pltdoc="x">key=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#\space</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">open</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">door-actions</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">locked</span><span class="hspace">&nbsp;</span><span class="RktVal">#\u</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">door-actions</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="hspace">&nbsp;</span><span class="RktVal">#\l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">locked</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">door-actions</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="hspace">&nbsp;</span><span class="RktVal">#\space</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">open</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">door-actions</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">open</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">any</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">open</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">door-actions</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">any</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="RktPn">)</span></td></tr></table></p><p>Last but not least we need a function that renders the current state of the
world as a scene. For simplicity, let&rsquo;s just use a large enough text for
this purpose:</p><p><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render : </span><a href="#(tech._sd)" class="techoutside" pltdoc="x"><span class="techinside">SD</span></a><span class="RktCmt"> -&gt; </span><span class="RktSym">Scene</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">translate the current state of the door into a large text </span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._text))" class="RktValLink" pltdoc="x">text</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/symbols.html#(def._((quote._~23~25kernel)._symbol-~3estring))" class="RktValLink" pltdoc="x">symbol-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">40</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym">check-expecy</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">closed</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._text))" class="RktValLink" pltdoc="x">text</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"closed"</span><span class="hspace">&nbsp;</span><span class="RktVal">40</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">The function <span class="RktSym"><a href="../reference/symbols.html#(def._((quote._~23~25kernel)._symbol-~3estring))" class="RktValLink" pltdoc="x">symbol-&gt;string</a></span> translates a symbol into a string,
 which is needed because <span class="RktSym"><a href="image.html#(def._((lib._htdp/image..rkt)._text))" class="RktValLink" pltdoc="x">text</a></span> can deal only with the latter, not
 the former. A look into the language documentation revealed that this
 conversion function exists, and so we use it.</div></p><p>Once everything is properly designed, it is time to <span style="font-style: italic">run</span> the
program. In the case of the world teachpack, this means we must specify
which function takes care of tick events, key events, and redraws:</p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._big-bang))" class="RktValLink" pltdoc="x">big-bang</a></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">locked</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._on-tick-event))" class="RktValLink" pltdoc="x">on-tick-event</a></span><span class="hspace">&nbsp;</span><span class="RktSym">automatic-closer</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._on-key-event))" class="RktValLink" pltdoc="x">on-key-event</a></span><span class="hspace">&nbsp;</span><span class="RktSym">door-actions</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._htdp/world..rkt)._on-redraw))" class="RktValLink" pltdoc="x">on-redraw</a></span><span class="hspace">&nbsp;</span><span class="RktSym">render</span><span class="RktPn">)</span></td></tr></table></p><p>Now it&rsquo;s time for you to collect the pieces and run them in DrRacket to see
whether it all works.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="image.html" title="backward to &quot;1.1 Manipulating Images: &quot;image.ss&quot;&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="htdp.html" title="up to &quot;1 HtDP Teachpacks&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="convert.html" title="forward to &quot;1.3 Converting Temperatures: &quot;convert.ss&quot;&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>