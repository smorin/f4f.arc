<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>6&nbsp;Developing Packages for PLaneT</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">PLane<span class="mywbr"> </span>T</span>:<span class="mywbr"> </span> Automatic Package Distribution</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Using_PLaneT.html" class="tocviewlink" pltdoc="x">Using PLane<span class="mywbr"> </span>T</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="search-order.html" class="tocviewlink" pltdoc="x">The PLane<span class="mywbr"> </span>T Search Order</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="cmdline.html" class="tocviewlink" pltdoc="x">The <span class="stt">raco planet</span> Command-<wbr></wbr>Line Tool</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="hash-lang-planet.html" class="tocviewlink" pltdoc="x">The <span class="RktModLink"><span class="RktSym"><span class="RktStxLink">planet</span></span></span> Language</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Utility_Libraries.html" class="tocviewlink" pltdoc="x">Utility Libraries</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Developing Packages for PLane<span class="mywbr"> </span>T</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>6&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Developing Packages for PLane<span class="mywbr"> </span>T</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">6.1&nbsp;</td><td><a href="#(part._.Write_.Your_.Package)" class="tocviewlink" pltdoc="x">Write Your Package</a></td></tr><tr><td align="right">6.2&nbsp;</td><td><a href="#(part._.Prepare_.Your_.Distribution)" class="tocviewlink" pltdoc="x">Prepare Your Distribution</a></td></tr><tr><td align="right">6.3&nbsp;</td><td><a href="#(part._.Build_a_.Distribution_.Archive)" class="tocviewlink" pltdoc="x">Build a Distribution Archive</a></td></tr><tr><td align="right">6.4&nbsp;</td><td><a href="#(part._backwards-compatibility)" class="tocviewlink" pltdoc="x">Determine Your Package&rsquo;s Backwards-<wbr></wbr>Compatibility</a></td></tr><tr><td align="right">6.5&nbsp;</td><td><a href="#(part._.Submit_.Your_.Package)" class="tocviewlink" pltdoc="x">Submit Your Package</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">6.1<tt>&nbsp;</tt></span><a href="#(part._.Write_.Your_.Package)" class="tocsubseclink" pltdoc="x">Write Your Package</a></td></tr><tr><td><span class="tocsublinknumber">6.1.1<tt>&nbsp;</tt></span><a href="#(part._devlinks)" class="tocsubseclink" pltdoc="x">Development Links</a></td></tr><tr><td><span class="tocsublinknumber">6.2<tt>&nbsp;</tt></span><a href="#(part._.Prepare_.Your_.Distribution)" class="tocsubseclink" pltdoc="x">Prepare Your Distribution</a></td></tr><tr><td><span class="tocsublinknumber">6.2.1<tt>&nbsp;</tt></span><a href="#(part._.Arrange_.Files_.Into_a_.Directory)" class="tocsubseclink" pltdoc="x">Arrange Files Into a Directory</a></td></tr><tr><td><span class="tocsublinknumber">6.2.2<tt>&nbsp;</tt></span><a href="#(part._.Create_.Documentation__.Optional_)" class="tocsubseclink" pltdoc="x">Create Documentation [Optional]</a></td></tr><tr><td><span class="tocsublinknumber">6.2.3<tt>&nbsp;</tt></span><a href="#(part._.Create_an__info_rkt__.File__.Optional_)" class="tocsubseclink" pltdoc="x">Create an <span class="stt">"info.rkt"</span> File [Optional]</a></td></tr><tr><td><span class="tocsublinknumber">6.3<tt>&nbsp;</tt></span><a href="#(part._.Build_a_.Distribution_.Archive)" class="tocsubseclink" pltdoc="x">Build a Distribution Archive</a></td></tr><tr><td><span class="tocsublinknumber">6.4<tt>&nbsp;</tt></span><a href="#(part._backwards-compatibility)" class="tocsubseclink" pltdoc="x">Determine Your Package&rsquo;s Backwards-<wbr></wbr>Compatibility</a></td></tr><tr><td><span class="tocsublinknumber">6.5<tt>&nbsp;</tt></span><a href="#(part._.Submit_.Your_.Package)" class="tocsubseclink" pltdoc="x">Submit Your Package</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="Utility_Libraries.html" title="backward to &quot;5 Utility Libraries&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;PLaneT: Automatic Package Distribution&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3>6<tt>&nbsp;</tt><a name="(part._.Developing_.Packages_for_.P.Lane.T)"></a>Developing Packages for PLaneT</h3><p>To put a package on PLaneT, or release an upgrade to an
already-existing package:</p><h4>6.1<tt>&nbsp;</tt><a name="(part._.Write_.Your_.Package)"></a>Write Your Package</h4><p><div class="SIntrapara">PLaneT can distribute whatever programs you write, but keep
these guidelines in mind as you write:
</div><div class="SIntrapara"><ul><li><p>Organize your code into modules. Since the PLaneT client is
integrated into the <span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span> form, it works best if your code
is arranged into modules.</p></li><li><p>When one module in your program depends on another, it is best
to require it using the relative-file-name form rather than the
planet require form. For instance, if your program contains files
primary.rkt and helper.rkt where primary.rkt requires helper, use the form</p><p><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktVal">"helper.rkt"</span><span class="RktPn">)</span></p><p>instead of</p><p><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._planet))" class="RktStxLink" pltdoc="x">planet</a></span><span class="stt"> </span><span class="RktVal">"helper.rkt"</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVal">"username"</span><span class="stt"> </span><span class="RktVal">"packagename.plt"</span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></p><p>in files that will also be a part of the package.</p></li></ul></div></p><h5>6.1.1<tt>&nbsp;</tt><a name="(part._devlinks)"></a>Development Links</h5><p>To aid development, PLaneT allows users to establish direct
associations between a particular planet package
with an arbitrary directory on the filesystem, for instance connecting the package named by the require line</p><p><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._planet))" class="RktStxLink" pltdoc="x">planet</a></span><span class="stt"> </span><span class="RktVal">"file.rkt"</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVal">"my"</span><span class="stt"> </span><span class="RktVal">"mypackage.plt"</span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></p><p>to the directory <span class="stt">"/home/myname/svn/mypackages/devel/"</span>.</p><p>These associations are intended to allow developers to use their own
directory structures, version control systems, and so on while still
being able to use the packages they create as though they were
distributed directly by PLaneT. Development links are local to a
particular user and repository (but not to a particular Racket minor
revision).</p><p>To establish a development link, use the <span class="stt">raco planet</span> command-line tool:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco planet link myname mypackage.plt 1 0 ~/svn/mypackages/devel</span></p><p>Once you are finished developing a package, you should remove any
development links you have established for it, again using the planet
command-line tool:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco planet unlink myname mypackage.plt 1 0</span></p><p>You may alternately use the functions <span class="RktSym"><a href="Utility_Libraries.html#(def._((lib._planet/util..rkt)._add-hard-link))" class="RktValLink" pltdoc="x">add-hard-link</a></span> and <span class="RktSym"><a href="Utility_Libraries.html#(def._((lib._planet/util..rkt)._remove-hard-link))" class="RktValLink" pltdoc="x">remove-hard-link</a></span>.</p><h4>6.2<tt>&nbsp;</tt><a name="(part._.Prepare_.Your_.Distribution)"></a>Prepare Your Distribution</h4><h5>6.2.1<tt>&nbsp;</tt><a name="(part._.Arrange_.Files_.Into_a_.Directory)"></a>Arrange Files Into a Directory</h5><p>Make sure that all source files, documentation, etc. that you want to
be a part of the package are in a single directory and its
subdirectories. Furthermore make sure that nothing else, <span style="font-style: italic">e.g.</span>
unneeded backup files, is in that directory (with the exception that
the meta-subdirectories and files Git/Subversion/CVS uses are
automatically skipped by the packaging tool).</p><h5>6.2.2<tt>&nbsp;</tt><a name="(part._.Create_.Documentation__.Optional_)"></a>Create Documentation [Optional]</h5><p>Use Scribble to write documentation for your package. See
<a href="../scribble/index.html" pltdoc="x"><span style="font-weight: bold">Scribble</span>: Racket Documentation Tool</a>
for instructions on how to write Scribble documentation.</p><h5>6.2.3<tt>&nbsp;</tt><a name="(part._.Create_an__info_rkt__.File__.Optional_)"></a>Create an <span class="stt">"info.rkt"</span> File [Optional]</h5><p>If you put a file named <span class="stt">"info.rkt"</span> in your package&rsquo;s root directory, the
PLaneT system (as well as the rest of the Racket tool suite) will
look in it for descriptive metadata about your package. The PLaneT
system looks for certain names in that file:</p><ul><li><p>The <a name="(idx._(gentag._2._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">blurb</span> field: If present, the blurb field
should contain a list of XHTML fragments encoded as x-expressions (see
the xml collection for details) that PLaneT will use as a short
description of your project.</p></li><li><p>The <a name="(idx._(gentag._3._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">release-notes</span> field: If present, the
release-notes field should contain a list of XHTML fragments encoded
as x-expressions (see the xml collection for details) that PLaneT will
use as a short description of what&rsquo;s new in this release of your
package.</p></li><li><p>The <a name="(idx._(gentag._4._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">categories</span> field: If present, the categories
field should be a list of symbols corresponding to the categories
under which this package should be listed.</p><p>The valid categories are:</p><ul><li><p><a name="(idx._(gentag._5._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">devtools</span>:         Development Tools</p></li><li><p><a name="(idx._(gentag._6._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">net</span>:              Networking and Protocols</p></li><li><p><a name="(idx._(gentag._7._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">media</span>:            Graphics and Audio</p></li><li><p><a name="(idx._(gentag._8._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">xml</span>:              XML-Related</p></li><li><p><a name="(idx._(gentag._9._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">datastructures</span>:   Data Structures and Algorithms</p></li><li><p><a name="(idx._(gentag._10._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">io</span>:               Input/Output and Filesystem</p></li><li><p><a name="(idx._(gentag._11._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">scientific</span>:       Mathematical and Scientific</p></li><li><p><a name="(idx._(gentag._12._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">system</span>:           Hardware/Operating System-Specific Tools</p></li><li><p><a name="(idx._(gentag._13._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">ui</span>:               Textual and Graphical User Interface</p></li><li><p><a name="(idx._(gentag._14._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">metaprogramming</span>:  Metaprogramming Tools</p></li><li><p><a name="(idx._(gentag._15._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">planet</span>:           PLaneT-Related</p></li><li><p><a name="(idx._(gentag._16._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">misc</span>:             Miscellaneous</p></li></ul><p>If you put symbols other than these the categories field, they will be
ignored. If you put no legal symbols in the categories field or do not
include this field in your info.rkt file, your package will be
categorized as "Miscellaneous."</p></li><li><p>The <a name="(idx._(gentag._17._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">can-be-loaded-with</span> field:
If present, the can-be-loaded-with field should be a quoted datum of
one of the following forms:</p><p><table cellspacing="0"><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">can-be-loaded-with</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">quote</span><span class="RktVar">all</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">quote</span><span class="RktVar">none</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">quote</span><span class="RktVar">all-except</span><span class="RktPn">)</span><span class="RktVar">VER-SPEC</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">quote</span><span class="RktVar">only</span><span class="RktPn">)</span><span class="RktVar">VER-SPEC</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr></table></p><p>where VER-SPEC is a PLaneT package version specification.</p><p>Depending on your package&rsquo;s behavior, it may or may not be okay for
multiple versions of the same package to be loaded at one time on the
entire system  &ndash;  for instance, if your package relies on writing to a
particular file and assumes that nothing else writes to that same
file, then multiple versions of the same package being loaded
simultaneously may be a problem. This field allows you to specify
whether your package can be loaded simultaneously with older versions
of itself. If its value is <a name="(idx._(gentag._18._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">all</span>, then the package may be
loaded with any older version. If it is <a name="(idx._(gentag._19._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">none</span>, then it
may not be loaded with older versions at all. If it is <span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._list))" class="RktValLink" pltdoc="x">list</a></span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">all-except</span><span class="stt"> </span><span class="RktSym">VER-SPEC</span><span class="stt"> </span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span> then any package except those that match
one of the given VER-SPEC forms may be loaded with this package; if it
is <span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._list))" class="RktValLink" pltdoc="x">list</a></span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">only</span><span class="stt"> </span><span class="RktSym">VER-SPEC</span><span class="stt"> </span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span>  then only packages that match
one of the given VER-SPEC forms may be loaded with this package.</p><p>When checking to see if a package may be loaded, PLaneT compares it to
all other currently-loaded instances of the same package with any
version: for each comparison, it checks to see if the newer package&rsquo;s
can-be-loaded-with field allows the older package to be loaded. If all
such comparisons succeed then the new package may be loaded; otherwise
PLaneT signals an error.</p><p>The default for this field is <a name="(idx._(gentag._20._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">none</span> as a conservative
protection measure. For many packages it is safe to set this field to
<a name="(idx._(gentag._21._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">any</span>.</p></li><li><p>The <a name="(idx._(gentag._22._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">homepage</span> field:
If present, the URL field should be a string corresponding to a URL
for the package. PLaneT provides this link with the description of your
package on the main PLaneT web page.</p></li><li><p>The <a name="(idx._(gentag._23._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">primary-file</span> field:
If present, the primary-file field should be a either a string
corresponding to the name (without path) of the main Racket source
file of your package, or a list of such strings. The PLaneT web page
corresponding to this package will present all files listed here as
interface files for your package; it will give direct links to each
package and a listing of all names provided by the package along with
their contracts (if present).</p><p>If you include only a single string, it will be used as the require
line printed on your package&rsquo;s page. If you include a list of strings,
then the first legal file string in the list will be used.</p></li><li><p>The <a name="(idx._(gentag._24._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">required-core-version</span> field: If present, the
required-core-version field should be a string with the same syntax as
the output of the <span class="RktSym"><a href="../reference/runtime.html#(def._((quote._~23~25kernel)._version))" class="RktValLink" pltdoc="x">version</a></span> function. Defining this field
indicates that PLaneT should only allow users of a version of Racket
equal to or more recent than the version specified by this field. This
allows you finer-grained control of your package&rsquo;s core-language
requirements than its inclusion in a particular repository; for
instance, setting this field to <span class="RktVal">"300.2"</span> would cause the PLaneT server
not to serve it to Racket v300.1 or older clients.</p></li><li><p>The <a name="(idx._(gentag._25._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">version</span> field:
If present, the version field should be a string that describes the
version number of this code that should be presented to users (e.g.,
<span class="RktVal">"0.15 alpha"</span>). This field does not override or in any way interact
with your package&rsquo;s package version number, which is assigned by
PLaneT, but may be useful to users.</p></li><li><p>The <a name="(idx._(gentag._26._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">repositories</span> field: If present, the repositories
field should be a list consisting of some subset of the strings
<span class="RktVal">"4.x"</span> and <span class="RktVal">"3xx"</span>. The string <span class="RktVal">"4.x"</span> indicates
that this package should be included in the v4.x repository (which
contains packages that are intended to run in Racket and PLT Scheme versions at
or above version 4.0), and the string <span class="RktVal">"3xx"</span> indicates that
the package should be included in the v3xx repository (containing
packages intended to run in PLT Scheme versions in the 3xx series). A
single package (and a single version of a package) may be included in
multiple repositories with the same PLaneT version number.</p></li></ul><p>In addition, PLaneT uses the setup-plt installer to install packages
on client machines, so most fields it looks for can be included with
their usual effects. In particular, adding a <a name="(idx._(gentag._27._(lib._planet/planet..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">name</span>
field indicates that the Racket files in the package should be
compiled during installation; it is a good idea to add it.</p><p>An example info.rkt file looks like this:</p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="../raco/info_rkt.html" class="RktModLink" pltdoc="x"><span class="RktSym">setup/infotab</span></a></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Application"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">blurb</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"My application runs 60% faster on 20% less peanut "</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"butter. It even shows a fancy graphic!"</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">primary-file</span><span class="hspace">&nbsp;</span><span class="RktVal">"my-app.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">categories</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">system</span><span class="hspace">&nbsp;</span><span class="RktVal">xml</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></p><p>See <a href="../raco/info_rkt.html" pltdoc="x"><span class="stt">"info.rkt"</span> File Format</a>
for more information on <span class="stt">"info.rkt"</span> files.</p><h4>6.3<tt>&nbsp;</tt><a name="(part._.Build_a_.Distribution_.Archive)"></a>Build a Distribution Archive</h4><p>Use the planet command-line tool in its archive-creation mode to
create a planet archive:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco planet create /home/jacob/my-app/</span></p><p>This will create a planet archive named <span class="stt">"my-app.plt"</span> in the current
directory whose contents are the contents of <span class="stt">"/home/jacobm/my-app"</span> and
all its subdirectories.</p><p>Alternately, you can run <span class="RktSym"><a href="Utility_Libraries.html#(def._((lib._planet/util..rkt)._make-planet-archive))" class="RktValLink" pltdoc="x">make-planet-archive</a></span> with the name of the directory
you&rsquo;ve prepared as its argument:</p><p><span class="RktPn">(</span><span class="RktSym"><a href="Utility_Libraries.html#(def._((lib._planet/util..rkt)._make-planet-archive))" class="RktValLink" pltdoc="x">make-planet-archive</a></span><span class="stt"> </span><span class="RktVal">"/home/jacob/my-app/"</span><span class="RktPn">)</span></p><p>This function will build a packaged version of your directory and
return the path to that package. The path will always be a file named
<span class="stt">"X.plt"</span>, where <span class="stt">"X"</span> is the name of the directory you
gave to <span class="RktSym"><a href="Utility_Libraries.html#(def._((lib._planet/util..rkt)._make-planet-archive))" class="RktValLink" pltdoc="x">make-planet-archive</a></span>, located in that same directory.</p><p><div class="SIntrapara">You can now test that your archive file works as intended using the
planet command-line tool in its install mode:
</div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco planet fileinject &lt;owner&gt; &lt;path to your .plt file&gt; &lt;maj&gt; &lt;min&gt;</span></div><div class="SIntrapara">installs the specified file into your local PLaneT cache as
though it had been downloaded from the PLaneT server with the given
owner name and major and minor versions. After you run this command,
you can require your package on your local machine using</div></p><p><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._planet))" class="RktStxLink" pltdoc="x">planet</a></span><span class="stt"> </span><span class="RktSym">&lt;file&gt;</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">&lt;owner&gt;</span><span class="stt"> </span><span class="RktSym">&lt;.plt</span><span class="stt"> </span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._file))" class="RktStxLink" pltdoc="x">file</a></span><span class="stt"> </span><span class="RktSym">name</span><span class="stt"> </span><span class="RktSym">without</span><span class="stt"> </span><span class="RktSym">path&gt;</span><span class="stt"> </span><span class="RktSym">&lt;maj&gt;</span><span class="stt"> </span><span class="RktSym">&lt;min&gt;</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></p><p><div class="SIntrapara">to verify everything works. After you do so, you can use
</div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco planet remove &lt;owner&gt; &lt;.plt file name without path&gt; &lt;maj&gt; &lt;min&gt;</span></div><div class="SIntrapara">to remove the test package from your local cache. (Not removing it is
safe as long as you use the same name and version numbers the package
will have on the PLaneT server; otherwise you may experience
problems.)</div></p><h4>6.4<tt>&nbsp;</tt><a name="(part._backwards-compatibility)"></a>Determine Your Package&rsquo;s Backwards-Compatibility</h4><p><div class="SIntrapara">If you are updating a previously-released package, you must decide
whether your package is a backwards-compatible change or not. A rule
of thumb is to remember that modules written to work with the
previously-released version of your package should unmodified with the
new package. This means that at a minimum, a backwards compatible
update should:
</div><div class="SIntrapara"><ul><li><p>Contain all the same Racket source files in that the previous
version contained in directories intended for public access</p></li><li><p>In each public file, provide at least all the bindings that the
previous version provided</p></li><li><p>For each name provided with a contract (see <a href="../guide/contracts.html" pltdoc="x">Contracts</a>), provide it
with a contract that is at least as permissive as the previous
contract</p></li></ul></div><div class="SIntrapara">A backwards-compatible upgrade may, however:
</div><div class="SIntrapara"><ul><li><p>Change any behavior that
reasonable consumers of your package would not consider guaranteed
(<span style="font-style: italic">e.g.</span>, by fixing bugs or improving the efficiency of
operations).</p></li><li><p>Remove files in clearly-marked private
sections. By convention, the contents of any directory called
<span class="stt">"private"</span> are considered private and should not be relied
upon by external users of your package.</p></li><li><p>Extend the set of names exported by a module.</p></li></ul></div><div class="SIntrapara">Currently these rules are guidelines only, but in the future some or
all of them may be enforced programmatically. Ultimately, though, no
technical device can precisely capture what it means for a package to
be backwards-compatible with a previous version, so you should use your
best judgment.</div></p><h4>6.5<tt>&nbsp;</tt><a name="(part._.Submit_.Your_.Package)"></a>Submit Your Package</h4><p>Go to <a href="http://planet.racket-lang.org/">the central PLaneT
package repository web page</a> and click on the link marked "contribute
a package / log in" in the upper-right-hand corner. If you have not
yet created an account, then do so on that page by providing your
name, a user name, an email address, and a password and then
responding to the confirmation message delivered to the email address
you provide.</p><p>Once you have an account, then if this is a new package then upload it
using the "Contribute a package" section in your user account page. If
this is a package update then click "update this package" next to its
name in the "Manage your packages" section of your user account page,
then upload the .plt file and indicate on the form whether your update
is backwards-compatible with the prior version or not.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="Utility_Libraries.html" title="backward to &quot;5 Utility Libraries&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;PLaneT: Automatic Package Distribution&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>