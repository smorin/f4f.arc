<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>13.5&nbsp;Proxies and Chaperones</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="extras.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">Reference</span>:<span class="mywbr"> </span> Racket</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="model.html" class="tocviewlink" pltdoc="x">Language Model</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="syntax.html" class="tocviewlink" pltdoc="x">Syntactic Forms</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="data.html" class="tocviewlink" pltdoc="x">Datatypes</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="structures.html" class="tocviewlink" pltdoc="x">Structures</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="mzlib_class.html" class="tocviewlink" pltdoc="x">Classes and Objects</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="mzlib_unit.html" class="tocviewlink" pltdoc="x">Units</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="contracts.html" class="tocviewlink" pltdoc="x">Contracts</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="match.html" class="tocviewlink" pltdoc="x">Pattern Matching</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="control.html" class="tocviewlink" pltdoc="x">Control Flow</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="concurrency.html" class="tocviewlink" pltdoc="x">Concurrency</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Macros.html" class="tocviewlink" pltdoc="x">Macros</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="input-and-output.html" class="tocviewlink" pltdoc="x">Input and Output</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="security.html" class="tocviewselflink" pltdoc="x">Reflection and Security</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="os.html" class="tocviewlink" pltdoc="x">Operating System</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="memory.html" class="tocviewlink" pltdoc="x">Memory Management</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="unsafe.html" class="tocviewlink" pltdoc="x">Unsafe Operations</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="running.html" class="tocviewlink" pltdoc="x">Running Racket</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" pltdoc="x">Bibliography</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>13&nbsp;</td><td><a href="security.html" class="tocviewlink" pltdoc="x">Reflection and Security</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">13.1&nbsp;</td><td><a href="Namespaces.html" class="tocviewlink" pltdoc="x">Namespaces</a></td></tr><tr><td align="right">13.2&nbsp;</td><td><a href="eval.html" class="tocviewlink" pltdoc="x">Evaluation and Compilation</a></td></tr><tr><td align="right">13.3&nbsp;</td><td><a href="load-lang.html" class="tocviewlink" pltdoc="x">The <span class="RktModLink"><span class="RktSym">racket/<span class="mywbr"> </span>load</span></span> Language</a></td></tr><tr><td align="right">13.4&nbsp;</td><td><a href="Module_Names_and_Loading.html" class="tocviewlink" pltdoc="x">Module Names and Loading</a></td></tr><tr><td align="right">13.5&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Proxies and Chaperones</a></td></tr><tr><td align="right">13.6&nbsp;</td><td><a href="securityguards.html" class="tocviewlink" pltdoc="x">Security Guards</a></td></tr><tr><td align="right">13.7&nbsp;</td><td><a href="custodians.html" class="tocviewlink" pltdoc="x">Custodians</a></td></tr><tr><td align="right">13.8&nbsp;</td><td><a href="threadgroups.html" class="tocviewlink" pltdoc="x">Thread Groups</a></td></tr><tr><td align="right">13.9&nbsp;</td><td><a href="inspectors.html" class="tocviewlink" pltdoc="x">Structure Inspectors</a></td></tr><tr><td align="right">13.10&nbsp;</td><td><a href="modprotect.html" class="tocviewlink" pltdoc="x">Code Inspectors</a></td></tr><tr><td align="right">13.11&nbsp;</td><td><a href="Sandboxed_Evaluation.html" class="tocviewlink" pltdoc="x">Sandboxed Evaluation</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>13.5&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Proxies and Chaperones</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">13.5.1&nbsp;</td><td><a href="#(part._.Proxy_.Constructors)" class="tocviewlink" pltdoc="x">Proxy Constructors</a></td></tr><tr><td align="right">13.5.2&nbsp;</td><td><a href="#(part._.Chaperone_.Constructors)" class="tocviewlink" pltdoc="x">Chaperone Constructors</a></td></tr><tr><td align="right">13.5.3&nbsp;</td><td><a href="#(part._.Proxy_.Properties)" class="tocviewlink" pltdoc="x">Proxy Properties</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#(def._((quote._~23~25kernel)._proxy~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">proxy?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._chaperone~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">chaperone?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._proxy-of~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">proxy-<wbr></wbr>of?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._chaperone-of~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">chaperone-<wbr></wbr>of?</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">13.5.1<tt>&nbsp;</tt></span><a href="#(part._.Proxy_.Constructors)" class="tocsubseclink" pltdoc="x">Proxy Constructors</a></td></tr><tr><td><a href="#(def._((lib._racket/private/base..rkt)._proxy-procedure))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">proxy-<wbr></wbr>procedure</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._proxy-struct))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">proxy-<wbr></wbr>struct</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._proxy-vector))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">proxy-<wbr></wbr>vector</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._proxy-box))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">proxy-<wbr></wbr>box</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._proxy-hash))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">proxy-<wbr></wbr>hash</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._prop~3aproxy-of))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">prop:<span class="mywbr"> </span>proxy-<wbr></wbr>of</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">13.5.2<tt>&nbsp;</tt></span><a href="#(part._.Chaperone_.Constructors)" class="tocsubseclink" pltdoc="x">Chaperone Constructors</a></td></tr><tr><td><a href="#(def._((lib._racket/private/base..rkt)._chaperone-procedure))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">chaperone-<wbr></wbr>procedure</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._chaperone-struct))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">chaperone-<wbr></wbr>struct</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._chaperone-vector))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">chaperone-<wbr></wbr>vector</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._chaperone-box))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">chaperone-<wbr></wbr>box</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._chaperone-hash))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">chaperone-<wbr></wbr>hash</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._chaperone-struct-type))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">chaperone-<wbr></wbr>struct-<wbr></wbr>type</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._chaperone-evt))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">chaperone-<wbr></wbr>evt</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">13.5.3<tt>&nbsp;</tt></span><a href="#(part._.Proxy_.Properties)" class="tocsubseclink" pltdoc="x">Proxy Properties</a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._make-proxy-property))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>proxy-<wbr></wbr>property</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">proxy-<wbr></wbr>property?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._proxy-property-accessor-procedure~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">proxy-<wbr></wbr>property-<wbr></wbr>accessor-<wbr></wbr>procedure?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._proxy-prop~3aapplication-mark))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">proxy-<wbr></wbr>prop:<span class="mywbr"> </span>application-<wbr></wbr>mark</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="Module_Names_and_Loading.html" title="backward to &quot;13.4 Module Names and Loading&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="security.html" title="up to &quot;13 Reflection and Security&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="securityguards.html" title="forward to &quot;13.6 Security Guards&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>13.5<tt>&nbsp;</tt><a name="(part._chaperones)"></a>Proxies and Chaperones</h4><p>A <a name="(tech._proxy)"></a><span style="font-style: italic">proxy</span> is a wrapper for a value where the wrapper
redirects certain of the value&rsquo;s operations. Proxies apply only to procedures,
<a href="structures.html#(tech._structure)" class="techoutside" pltdoc="x"><span class="techinside">structures</span></a> for which an accessor or mutator is available,
<a href="structures.html#(tech._structure._type)" class="techoutside" pltdoc="x"><span class="techinside">structure types</span></a>, <a href="hashtables.html#(tech._hash._table)" class="techoutside" pltdoc="x"><span class="techinside">hash tables</span></a>, <a href="vectors.html#(tech._vector)" class="techoutside" pltdoc="x"><span class="techinside">vectors</span></a>,
and <a href="boxes.html#(tech._box)" class="techoutside" pltdoc="x"><span class="techinside">box</span></a>es. A proxied value is <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span> to the original
value, but not <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span> to the original value.</p><p>A <a name="(tech._chaperone)"></a><span style="font-style: italic">chaperone</span> is a kind of proxy whose refinement of a value&rsquo;s
operation is restricted to side effects (including, in particular,
raising an exception) or chaperoning values supplied to or produced by
the operation. For example, a vector chaperone can redirect
<span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span> to raise an exception if the accessed vector slot
contains a string, or it can cause the result of <span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span>
to be a chaperoned variant of the value that is in the accessed vector
slot, but it cannot redirect <span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span> to produce a value
that is arbitrarily different from the value in the vector slot.</p><p>A non-<a href="#(tech._chaperone)" class="techoutside" pltdoc="x"><span class="techinside">chaperone</span></a> <a href="#(tech._proxy)" class="techoutside" pltdoc="x"><span class="techinside">proxy</span></a>, in contrast, can refine an operation to swap one
value for any another. A proxy cannot be applied to an immutable value
or refine the access to an immutable field in an instance of a <a href="structures.html#(tech._structure._type)" class="techoutside" pltdoc="x"><span class="techinside">structure
type</span></a>, since arbitrary replacement of an operation&rsquo;s value amounts to
mutation of the proxied value.</p><p>Beware that each of the following operations can be redirected to
arbitrary procedure through proxies on the operation&rsquo;s
argument &ndash; assuming that the operation is available to the creator of
the proxy:</p><ul><li><p>a structure-field accesor</p></li><li><p>a structure-field mutator</p></li><li><p>a structure type property accessor</p></li><li><p>application of a procedure</p></li><li><p><span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._unbox))" class="RktValLink" pltdoc="x">unbox</a></span></p></li><li><p><span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._set-box!))" class="RktValLink" pltdoc="x">set-box!</a></span></p></li><li><p><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span></p></li><li><p><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span></p></li><li><p><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-ref))" class="RktValLink" pltdoc="x">hash-ref</a></span></p></li><li><p><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-set))" class="RktValLink" pltdoc="x">hash-set</a></span></p></li><li><p><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-set!))" class="RktValLink" pltdoc="x">hash-set!</a></span></p></li><li><p><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-remove))" class="RktValLink" pltdoc="x">hash-remove</a></span></p></li><li><p><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-remove!))" class="RktValLink" pltdoc="x">hash-remove!</a></span></p></li></ul><p>Derived operations, such as printing a value, can be redirected
through proxies due to their use of accessor functions. The
<span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span>, <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._equal-hash-code))" class="RktValLink" pltdoc="x">equal-hash-code</a></span>, and
<span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._equal-secondary-hash-code))" class="RktValLink" pltdoc="x">equal-secondary-hash-code</a></span> operations, in contrast, may bypass
proxies (but they are not obliged to).</p><p>In addition to redirecting operations that work on a value, a
proxy can include <a name="(tech._proxy._property)"></a><span style="font-style: italic">proxy properties</span> for a proxied
value. A <a href="#(tech._proxy._property)" class="techoutside" pltdoc="x"><span class="techinside">proxy property</span></a> is similar to a <a href="structprops.html#(tech._structure._type._property)" class="techoutside" pltdoc="x"><span class="techinside">structure
type property</span></a>, but it applies to chaperones instead of structure
types and their instances.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._proxy~3f))"></a><a name="(def._((quote._~23~25kernel)._proxy~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy~3f))" class="RktValLink" pltdoc="x">proxy?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a proxy, <span class="RktVal">#f</span> otherwise.</div></p><p>Programs and libraries generally should avoid <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy~3f))" class="RktValLink" pltdoc="x">proxy?</a></span> and
treat proxies the same as unproxied values. In rare cases,
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy~3f))" class="RktValLink" pltdoc="x">proxy?</a></span> may be needed to guard against redirection by a
proxy of an operation to an arbitrary procedure.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._chaperone~3f))"></a><a name="(def._((quote._~23~25kernel)._chaperone~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone~3f))" class="RktValLink" pltdoc="x">chaperone?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a chaperone, <span class="RktVal">#f</span> otherwise.</div></p><p>Programs and libraries generally should avoid <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone~3f))" class="RktValLink" pltdoc="x">chaperone?</a></span> for
the same reason that they should avoid <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy~3f))" class="RktValLink" pltdoc="x">proxy?</a></span>.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._proxy-of~3f))"></a><a name="(def._((quote._~23~25kernel)._proxy-of~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-of~3f))" class="RktValLink" pltdoc="x">proxy-of?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v1</span><span class="hspace">&nbsp;</span><span class="RktVar">v2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></div><div class="SIntrapara">Indicates whether <span class="RktVar">v1</span> can be considered equivalent modulo
proxies to <span class="RktVar">v2</span>.</div></p><p>For values that include no proxies, <span class="RktVar">v1</span> and <span class="RktVar">v2</span> can
be considered proxies of each other if they are <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span>.</p><p>Otherwise, all proxies of <span class="RktVar">v2</span> must be intact in <span class="RktVar">v1</span>,
in the sense that parts of <span class="RktVar">v2</span> must be derived from
<span class="RktVar">v1</span> through one of the proxy constructors (e.g.,
<span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._proxy-procedure))" class="RktValLink" pltdoc="x">proxy-procedure</a></span> or <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._chaperone-procedure))" class="RktValLink" pltdoc="x">chaperone-procedure</a></span>).</p><p>See also <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aproxy-of))" class="RktValLink" pltdoc="x">prop:proxy-of</a></span>.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._chaperone-of~3f))"></a><a name="(def._((quote._~23~25kernel)._chaperone-of~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone-of~3f))" class="RktValLink" pltdoc="x">chaperone-of?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v1</span><span class="hspace">&nbsp;</span><span class="RktVar">v2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></div><div class="SIntrapara">Indicates whether <span class="RktVar">v1</span> can be considered equivalent modulo
chaperones to <span class="RktVar">v2</span>.</div></p><p>For values that include no chaperones, <span class="RktVar">v1</span> and <span class="RktVar">v2</span> can
be considered chaperones of each other if they are <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span>,
except that the mutability of vectors and boxes with <span class="RktVar">v1</span> and
<span class="RktVar">v2</span> must be the same.</p><p>Otherwise, all chaperones of <span class="RktVar">v2</span> must be intact in
<span class="RktVar">v1</span>, in the sense that parts of <span class="RktVar">v2</span> must be derived
from <span class="RktVar">v1</span> through one of the chaperone constructors (e.g.,
<span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._chaperone-procedure))" class="RktValLink" pltdoc="x">chaperone-procedure</a></span>).</p><h5>13.5.1<tt>&nbsp;</tt><a name="(part._.Proxy_.Constructors)"></a>Proxy Constructors</h5><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._racket/private/base..rkt)._proxy-procedure))"></a><a name="(def._((lib._racket/private/base..rkt)._proxy-procedure))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._proxy-procedure))" class="RktValLink" pltdoc="x">proxy-procedure</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">wrapper-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy~3f))" class="RktValLink" pltdoc="x">proxy?</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">wrapper-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">Returns a proxied procedure that has the same arity, name, and
other attributes as <span class="RktVar">proc</span>. When the proxied procedure is
applied, the arguments are first passed to <span class="RktVar">wrapper-proc</span>, and
then the results from <span class="RktVar">wrapper-proc</span> are passed to
<span class="RktVar">proc</span>. The <span class="RktVar">wrapper-proc</span> can also supply a procedure
that processes the results of <span class="RktVar">proc</span>.</div></p><p>The arity of <span class="RktVar">wrapper-proc</span> must include the arity of
<span class="RktVar">proc</span>. The allowed keyword arguments of <span class="RktVar">wrapper-proc</span>
must be a superset of the allowed keywords of <span class="RktVar">proc</span>. The
required keyword arguments of <span class="RktVar">wrapper-proc</span> must be a subset
of the required keywords of <span class="RktVar">proc</span>.</p><p>For applications without keywords, the result of <span class="RktVar">wrapper-proc</span>
must be either the same number of values as supplied to it or one more
than the number of supplied values, where an extra result is supplied
before the others. The additional result, if any, must be a procedure
that accepts as many results as produced by <span class="RktVar">proc</span>; it must
return the same number of results.  If <span class="RktVar">wrapper-proc</span> returns
the same number of values as it is given (i.e., it does not return a
procedure to proxy <span class="RktVar">proc</span>&rsquo;s result), then <span class="RktVar">proc</span> is
called in <a href="eval-model.html#(tech._tail._position)" class="techoutside" pltdoc="x"><span class="techinside">tail position</span></a> with respect to the call to the proxy.</p><p>For applications that include keyword arguments, <span class="RktVar">wrapper-proc</span>
must return an additional value before any other values but after the
result-proxying procedure (if any). The additional value must be a
list of proxys of the keyword arguments that were supplied to the
proxied procedure (i.e., not counting optional arguments that were
not supplied). The arguments must be ordered according to the sorted
order of the supplied arguments&rsquo; keywords.</p><p>Pairs of <span class="RktVar">prop</span> and <span class="RktVar">prop-val</span> (the number of arguments
to <span class="RktSym">procedure-proxy</span> must be even) add proxy properties
or override proxy-property values of <span class="RktVar">proc</span>.</p><p>If any <span class="RktVar">prop</span> is <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-prop~3aapplication-mark))" class="RktValLink" pltdoc="x">proxy-prop:application-mark</a></span> and if the
associated <span class="RktVar">prop-val</span> is a pair, then the call to <span class="RktVar">proc</span>
is wrapped with <span class="RktSym"><a href="wcm.html#(form._((quote._~23~25kernel)._with-continuation-mark))" class="RktStxLink" pltdoc="x">with-continuation-mark</a></span> using <span class="RktPn">(</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._car))" class="RktValLink" pltdoc="x">car</a></span><span class="stt"> </span><span class="RktVar">prop-val</span><span class="RktPn">)</span> as the mark key and <span class="RktPn">(</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._cdr))" class="RktValLink" pltdoc="x">cdr</a></span><span class="stt"> </span><span class="RktVar">prop-val</span><span class="RktPn">)</span> as the mark
value. In addition, if <span class="RktSym"><a href="contmarks.html#(def._((quote._~23~25kernel)._continuation-mark-set-first))" class="RktValLink" pltdoc="x">continuation-mark-set-first</a></span> with
<span class="RktPn">(</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._car))" class="RktValLink" pltdoc="x">car</a></span><span class="stt"> </span><span class="RktVar">prop-val</span><span class="RktPn">)</span> produces a value for the immediate
continuation frame of the call to the proxied procedure, the value is
also installed as an immediate value for <span class="RktPn">(</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._car))" class="RktValLink" pltdoc="x">car</a></span><span class="stt"> </span><span class="RktVar">prop-val</span><span class="RktPn">)</span> as a
mark during the call to <span class="RktVar">wrapper-proc</span> (which allows tail-calls
of proxies with respect to wrapping proxies to be detected within
<span class="RktVar">wrapper-proc</span>).</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._proxy-struct))"></a><a name="(def._((quote._~23~25kernel)._proxy-struct))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-struct))" class="RktValLink" pltdoc="x">proxy-struct</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">v</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">orig-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">redirect-proc</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">orig-proc</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="structutils.html#(def._((quote._~23~25kernel)._struct-accessor-procedure~3f))" class="RktValLink" pltdoc="x">struct-accessor-procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="structutils.html#(def._((quote._~23~25kernel)._struct-mutator-procedure~3f))" class="RktValLink" pltdoc="x">struct-mutator-procedure?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">redirect-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">Returns a proxied value like <span class="RktVar">v</span>, but with certain
operations on the proxied redirected. The <span class="RktVar">orig-proc</span>s
indicate the operations to redirect, and the corresponding
<span class="RktVar">redirect-proc</span>s supply the redirections.</div></p><p>The protocol for a <span class="RktVar">redirect-proc</span> depends on the corresponding
<span class="RktVar">orig-proc</span>:</p><ul><li><p>A structure-field: <span class="RktVar">redirect-proc</span>
must accept two arguments, <span class="RktVar">v</span> and the value
<span class="RktVar">field-v</span> that <span class="RktVar">orig-proc</span> produces for
<span class="RktVar">v</span>; it must return a replacement for
<span class="RktVar">field-v</span>. The corresponding field must not be
immutable.</p></li><li><p>A structure field mutator: <span class="RktVar">redirect-proc</span> must accept
two arguments, <span class="RktVar">v</span> and the value <span class="RktVar">field-v</span>
supplied to the mutator; it must return a replacement for
<span class="RktVar">field-v</span> to be propagated to <span class="RktVar">orig-proc</span> and
<span class="RktVar">v</span>.</p></li></ul><p>Pairs of <span class="RktVar">prop</span> and <span class="RktVar">prop-val</span> (the number of arguments
to <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._proxy-procedure))" class="RktValLink" pltdoc="x">proxy-procedure</a></span> must be odd) add proxy properties
or override proxy-property values of <span class="RktVar">v</span>.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._proxy-vector))"></a><a name="(def._((quote._~23~25kernel)._proxy-vector))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-vector))" class="RktValLink" pltdoc="x">proxy-vector</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">vec</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">ref-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">set-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector~3f))" class="RktValLink" pltdoc="x">vector?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy~3f))" class="RktValLink" pltdoc="x">proxy?</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">vec</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector~3f))" class="RktValLink" pltdoc="x">vector?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._not/c))" class="RktValLink" pltdoc="x">not/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._immutable~3f))" class="RktValLink" pltdoc="x">immutable?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ref-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector~3f))" class="RktValLink" pltdoc="x">vector?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">set-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector~3f))" class="RktValLink" pltdoc="x">vector?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">Returns a proxied value like <span class="RktVar">vec</span>, but with
<span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span> and <span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span> operations on the
proxied vector redirected.</div></p><p>The <span class="RktVar">ref-proc</span> must accept <span class="RktVar">vec</span>, an index passed to
<span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span>, and the value that <span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span> on
<span class="RktVar">vec</span> produces for the given index; it must produce a
replacement for the value, which is the result of <span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-ref))" class="RktValLink" pltdoc="x">vector-ref</a></span>
on the proxy.</p><p>The <span class="RktVar">set-proc</span> must accept <span class="RktVar">vec</span>, an index passed to
<span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span>, and the value passed to <span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span>; it
must produce a replacement for the value, which is used
with <span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span> on the original <span class="RktVar">vec</span> to install the
value.</p><p>Pairs of <span class="RktVar">prop</span> and <span class="RktVar">prop-val</span> (the number of arguments
to <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-vector))" class="RktValLink" pltdoc="x">proxy-vector</a></span> must be odd) add proxy properties
or override proxy-property values of <span class="RktVar">vec</span>.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._proxy-box))"></a><a name="(def._((quote._~23~25kernel)._proxy-box))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-box))" class="RktValLink" pltdoc="x">proxy-box</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">box</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">unbox-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">set-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._box~3f))" class="RktValLink" pltdoc="x">box?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy~3f))" class="RktValLink" pltdoc="x">proxy?</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">box</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._box~3f))" class="RktValLink" pltdoc="x">box?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._not/c))" class="RktValLink" pltdoc="x">not/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._immutable~3f))" class="RktValLink" pltdoc="x">immutable?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">unbox-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._box~3f))" class="RktValLink" pltdoc="x">box?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">set-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._box~3f))" class="RktValLink" pltdoc="x">box?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">Returns a proxied value like <span class="RktSym">bx</span>, but with
<span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._unbox))" class="RktValLink" pltdoc="x">unbox</a></span> and <span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._set-box!))" class="RktValLink" pltdoc="x">set-box!</a></span> operations on the
proxied box redirected.</div></p><p>The <span class="RktVar">unbox-proc</span> must accept <span class="RktSym">bx</span> and the value that
<span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._unbox))" class="RktValLink" pltdoc="x">unbox</a></span> on <span class="RktSym">bx</span> produces index; it must produce a replacement
value, which is the result of
<span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._unbox))" class="RktValLink" pltdoc="x">unbox</a></span> on the proxy.</p><p>The <span class="RktVar">set-proc</span> must accept <span class="RktSym">bx</span> and the value passed to
<span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._set-box!))" class="RktValLink" pltdoc="x">set-box!</a></span>; it must produce a replacement
value, which is used with <span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._set-box!))" class="RktValLink" pltdoc="x">set-box!</a></span> on the original
<span class="RktSym">bx</span> to install the value.</p><p>Pairs of <span class="RktVar">prop</span> and <span class="RktVar">prop-val</span> (the number of arguments
to <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-box))" class="RktValLink" pltdoc="x">proxy-box</a></span> must be odd) add proxy properties
or override proxy-property values of <span class="RktSym">bx</span>.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._proxy-hash))"></a><a name="(def._((quote._~23~25kernel)._proxy-hash))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-hash))" class="RktValLink" pltdoc="x">proxy-hash</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">hash</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">ref-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">set-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">remove-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">key-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy~3f))" class="RktValLink" pltdoc="x">proxy?</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">hash</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._not/c))" class="RktValLink" pltdoc="x">not/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._immutable~3f))" class="RktValLink" pltdoc="x">immutable?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">ref-proc</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">set-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">remove-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">key-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">Returns a proxied value like <span class="RktVar">hash</span>, but with
<span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-ref))" class="RktValLink" pltdoc="x">hash-ref</a></span>, <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-set!))" class="RktValLink" pltdoc="x">hash-set!</a></span> or <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-set))" class="RktValLink" pltdoc="x">hash-set</a></span> (as
applicable) and <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-remove))" class="RktValLink" pltdoc="x">hash-remove</a></span> or <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-remove!))" class="RktValLink" pltdoc="x">hash-remove!</a></span> (as
application) operations on the proxied hash table redirected. When
<span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-set))" class="RktValLink" pltdoc="x">hash-set</a></span> or <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-remove))" class="RktValLink" pltdoc="x">hash-remove</a></span> is used on a proxied hash
table, the resulting hash table is given all of the proxys of the
given hash table. In addition, operations like
<span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-iterate-key))" class="RktValLink" pltdoc="x">hash-iterate-key</a></span> or <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-map))" class="RktValLink" pltdoc="x">hash-map</a></span>, which extract
keys from the table, use <span class="RktVar">key-proc</span> to filter keys extracted
from the table. Operations like <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-iterate-value))" class="RktValLink" pltdoc="x">hash-iterate-value</a></span> or
<span class="RktSym">hash-iterate-map</span> implicitly use <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-ref))" class="RktValLink" pltdoc="x">hash-ref</a></span> and
therefore redirect through <span class="RktVar">ref-proc</span>.</div></p><p>The <span class="RktVar">ref-proc</span> must accept <span class="RktVar">hash</span> and a key passed
<span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-ref))" class="RktValLink" pltdoc="x">hash-ref</a></span>. It must return a replacement key
as well as a procedure. The returned procedure is called only if the
returned key is found in <span class="RktVar">hash</span> via <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-ref))" class="RktValLink" pltdoc="x">hash-ref</a></span>, in which
case the procedure is called with <span class="RktVar">hash</span>, the previously
returned key, and the found value. The returned procedure must itself
return a replecement for the found value.</p><p>The <span class="RktVar">set-proc</span> must accept <span class="RktVar">hash</span>, a key passed to
<span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-set!))" class="RktValLink" pltdoc="x">hash-set!</a></span> or <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-set))" class="RktValLink" pltdoc="x">hash-set</a></span>, and the value passed to
<span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-set!))" class="RktValLink" pltdoc="x">hash-set!</a></span> or <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-set))" class="RktValLink" pltdoc="x">hash-set</a></span>; it must produce two values: a
replacement for the key and a replacement for the value. The returned
key and value are used with <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-set!))" class="RktValLink" pltdoc="x">hash-set!</a></span> or <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-set))" class="RktValLink" pltdoc="x">hash-set</a></span> on
the original <span class="RktVar">hash</span> to install the value.</p><p>The <span class="RktVar">remove-proc</span> must accept <span class="RktVar">hash</span> and a key passed to
<span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-remove!))" class="RktValLink" pltdoc="x">hash-remove!</a></span> or <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-remove))" class="RktValLink" pltdoc="x">hash-remove</a></span>; it must produce the a
replacement for the key, which is used with <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-remove!))" class="RktValLink" pltdoc="x">hash-remove!</a></span> or
<span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-remove))" class="RktValLink" pltdoc="x">hash-remove</a></span> on the original <span class="RktVar">hash</span> to remove any
mapping using the (proxy-replaced) key.</p><p>The <span class="RktVar">key-proc</span> must accept <span class="RktVar">hash</span> and a key that has
been extracted from <span class="RktVar">hash</span> (by <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-iterate-key))" class="RktValLink" pltdoc="x">hash-iterate-key</a></span> or
other operations that use <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-iterate-key))" class="RktValLink" pltdoc="x">hash-iterate-key</a></span> internally); it
must produce a replacement for the key, which is then reported as a
key extracted from the table.</p><p>The <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-iterate-value))" class="RktValLink" pltdoc="x">hash-iterate-value</a></span>, <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-map))" class="RktValLink" pltdoc="x">hash-map</a></span>, or
<span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-for-each))" class="RktValLink" pltdoc="x">hash-for-each</a></span> functions use a combination of
<span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-iterate-key))" class="RktValLink" pltdoc="x">hash-iterate-key</a></span> and <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-ref))" class="RktValLink" pltdoc="x">hash-ref</a></span>. If a key
produced by <span class="RktVar">key-proc</span> does not yield a value through
<span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-ref))" class="RktValLink" pltdoc="x">hash-ref</a></span>, then the <span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p>Pairs of <span class="RktVar">prop</span> and <span class="RktVar">prop-val</span> (the number of arguments
to <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-hash))" class="RktValLink" pltdoc="x">proxy-hash</a></span> must be odd) add proxy properties
or override proxy-property values of <span class="RktVar">hash</span>.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><a name="(dep._((quote._~23~25kernel)._prop~3aproxy-of))"></a><a name="(def._((quote._~23~25kernel)._prop~3aproxy-of))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aproxy-of))" class="RktValLink" pltdoc="x">prop:proxy-of</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="structprops.html#(def._((quote._~23~25kernel)._struct-type-property~3f))" class="RktValLink" pltdoc="x">struct-type-property?</a></span></td></tr></table></div><div class="SIntrapara">A <a href="structprops.html#(tech._structure._type._property)" class="techoutside" pltdoc="x"><span class="techinside">structure type property</span></a> (see <a href="structprops.html" pltdoc="x">Structure Type Properties</a>) that
supplies a procedure for extracting a proxied value from a structure
that represents a proxy. The property is used for <span class="RktSym">proxy-of</span>
as well as <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span>.</div></p><p>The property value must be a procedure of one argument, which is a
structure whose structure type has the property. The result can be
<span class="RktVal">#f</span> to indicate the structure does not represent a proxy,
otherwise the result is a value for which the original structure is a
proxy (so the original structure is a <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-of~3f))" class="RktValLink" pltdoc="x">proxy-of?</a></span> and it is
<span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span> to the result value). The result value must have the
same <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aproxy-of))" class="RktValLink" pltdoc="x">prop:proxy-of</a></span> and <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._prop~3aequal+hash))" class="RktValLink" pltdoc="x">prop:equal+hash</a></span> property
values as the original structure, and the property values must be
inherited from the same structure type (which ensures some consistency
between <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-of~3f))" class="RktValLink" pltdoc="x">proxy-of?</a></span> and <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span>).</p><h5>13.5.2<tt>&nbsp;</tt><a name="(part._.Chaperone_.Constructors)"></a>Chaperone Constructors</h5><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._racket/private/base..rkt)._chaperone-procedure))"></a><a name="(def._((lib._racket/private/base..rkt)._chaperone-procedure))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._chaperone-procedure))" class="RktValLink" pltdoc="x">chaperone-procedure</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">proc</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">wrapper-proc</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone~3f))" class="RktValLink" pltdoc="x">chaperone?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">wrapper-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._proxy-procedure))" class="RktValLink" pltdoc="x">proxy-procedure</a></span>, but for each value supplied to
<span class="RktVar">wrapper-proc</span>, the corresponding result must be the same or a
chaperone of (in the sense of <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone-of~3f))" class="RktValLink" pltdoc="x">chaperone-of?</a></span>)  the supplied
value. The additional result, if any, that precedes the chaperoned
values must be a procedure that accepts as many results as produced by
<span class="RktVar">proc</span>; it must return the same number of results, each of
which is the same or a chaperone of the corresponding original result.</div></p><p>For applications that include keyword arguments, <span class="RktVar">wrapper-proc</span>
must return an additional value before any other values but after the
result-chaperoning procedure (if any). The additional value must be a
list of chaperones of the keyword arguments that were supplied to the
chaperoned procedure (i.e., not counting optional arguments that were
not supplied). The arguments must be ordered according to the sorted
order of the supplied arguments&rsquo; keywords.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._chaperone-struct))"></a><a name="(def._((quote._~23~25kernel)._chaperone-struct))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone-struct))" class="RktValLink" pltdoc="x">chaperone-struct</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">v</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">orig-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">redirect-proc</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">orig-proc</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="structutils.html#(def._((quote._~23~25kernel)._struct-accessor-procedure~3f))" class="RktValLink" pltdoc="x">struct-accessor-procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="structutils.html#(def._((quote._~23~25kernel)._struct-mutator-procedure~3f))" class="RktValLink" pltdoc="x">struct-mutator-procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="structprops.html#(def._((quote._~23~25kernel)._struct-type-property-accessor-procedure~3f))" class="RktValLink" pltdoc="x">struct-type-property-accessor-procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._one-of/c))" class="RktValLink" pltdoc="x">one-of/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="inspectors.html#(def._((quote._~23~25kernel)._struct-info))" class="RktValLink" pltdoc="x">struct-info</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">redirect-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-struct))" class="RktValLink" pltdoc="x">proxy-struct</a></span>, but with the following refinements:</div></p><ul><li><p>With a structure-field accessor as <span class="RktVar">orig-proc</span>,
<span class="RktVar">redirect-proc</span> must accept two arguments, <span class="RktVar">v</span> and
the value <span class="RktVar">field-v</span> that <span class="RktVar">orig-proc</span> produces for
<span class="RktVar">v</span>; it must return chaperone of <span class="RktVar">field-v</span>. The
corresponding field may be immutable.</p></li><li><p>A property accessor can be supplied as <span class="RktVar">orig-proc</span>.  The
corresponding <span class="RktVar">redirect-proc</span> uses the same protocol as
for a structure-field selector.</p></li><li><p>With structure-field mutator as <span class="RktVar">orig-proc</span>,
<span class="RktVar">redirect-proc</span> must accept two arguments, <span class="RktVar">v</span> and
the value <span class="RktVar">field-v</span> supplied to the mutator; it must
return chaperone of <span class="RktVar">field-v</span> to be propagated to
<span class="RktVar">orig-proc</span> and <span class="RktVar">v</span>.</p></li><li><p>With <span class="RktSym"><a href="inspectors.html#(def._((quote._~23~25kernel)._struct-info))" class="RktValLink" pltdoc="x">struct-info</a></span> as <span class="RktVar">orig-proc</span>, the
corresponding <span class="RktVar">redirect-proc</span> must accept two values,
which are the results of <span class="RktSym"><a href="inspectors.html#(def._((quote._~23~25kernel)._struct-info))" class="RktValLink" pltdoc="x">struct-info</a></span> on <span class="RktVar">v</span>; it
must return each values or a chaperone of each value. The
<span class="RktVar">redirect-proc</span> is not called if <span class="RktSym"><a href="inspectors.html#(def._((quote._~23~25kernel)._struct-info))" class="RktValLink" pltdoc="x">struct-info</a></span> would
return <span class="RktVal">#f</span> as its first argument.</p></li></ul><p>An <span class="RktVar">orig-proc</span> can be <span class="RktSym"><a href="inspectors.html#(def._((quote._~23~25kernel)._struct-info))" class="RktValLink" pltdoc="x">struct-info</a></span> only if some other
<span class="RktVar">orig-proc</span> is supplied, and each <span class="RktVar">orig-proc</span> must
indicate a distinct operation. If no <span class="RktVar">orig-proc</span>s are supplied,
then no <span class="RktVar">prop</span>s must be supplied, and <span class="RktVar">v</span> is returned
unchaperoned.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._chaperone-vector))"></a><a name="(def._((quote._~23~25kernel)._chaperone-vector))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone-vector))" class="RktValLink" pltdoc="x">chaperone-vector</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">vec</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">ref-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">set-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector~3f))" class="RktValLink" pltdoc="x">vector?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone~3f))" class="RktValLink" pltdoc="x">chaperone?</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">vec</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector~3f))" class="RktValLink" pltdoc="x">vector?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ref-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector~3f))" class="RktValLink" pltdoc="x">vector?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">set-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector~3f))" class="RktValLink" pltdoc="x">vector?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-vector))" class="RktValLink" pltdoc="x">proxy-vector</a></span>, but with support for mutable vectors. The
<span class="RktVar">ref-proc</span> procedure must produce the same value or a chaperone
of the original value, and <span class="RktVar">set-proc</span> must produce the value
that is given or a chaperone of the value. The <span class="RktVar">set-proc</span> will
not be used if <span class="RktVar">vec</span> is immutable.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._chaperone-box))"></a><a name="(def._((quote._~23~25kernel)._chaperone-box))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone-box))" class="RktValLink" pltdoc="x">chaperone-box</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">bx</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">unbox-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">set-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._box~3f))" class="RktValLink" pltdoc="x">box?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone~3f))" class="RktValLink" pltdoc="x">chaperone?</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._box~3f))" class="RktValLink" pltdoc="x">box?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">unbox-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._box~3f))" class="RktValLink" pltdoc="x">box?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">set-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="boxes.html#(def._((quote._~23~25kernel)._box~3f))" class="RktValLink" pltdoc="x">box?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">Like <span class="RktSym">prox-box</span>, but with support for immutable boxes. The
<span class="RktVar">unbox-proc</span> procedure must produce the same value or a
chaperone of the original value, and <span class="RktVar">set-proc</span> must produce
the same value or a chaperone of the value that it is given.  The
<span class="RktVar">set-proc</span> will not be used if <span class="RktVar">bx</span> is immutable.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._chaperone-hash))"></a><a name="(def._((quote._~23~25kernel)._chaperone-hash))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone-hash))" class="RktValLink" pltdoc="x">chaperone-hash</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">hash</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">ref-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">set-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">remove-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">key-proc</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone~3f))" class="RktValLink" pltdoc="x">chaperone?</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">hash</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">ref-proc</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">set-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">remove-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">key-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-hash))" class="RktValLink" pltdoc="x">proxy-hash</a></span>, but with constraints on the given functions
and support for immutable hashes. The <span class="RktVar">ref-proc</span> procedure must
return a found value or a chaperone of the value. The
<span class="RktVar">set-proc</span> procedure must produce two values: the key that it
is given or a chaperone of the key and the value that it is given or a
chaperone of the value. The <span class="RktVar">remove-proc</span> and <span class="RktVar">key-proc</span>
procedures must produce the given key or a chaperone of the key.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._chaperone-struct-type))"></a><a name="(def._((quote._~23~25kernel)._chaperone-struct-type))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone-struct-type))" class="RktValLink" pltdoc="x">chaperone-struct-type</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">struct-type</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">struct-info-proc</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">make-constructor-proc</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">guard-proc</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="structutils.html#(def._((quote._~23~25kernel)._struct-type~3f))" class="RktValLink" pltdoc="x">struct-type?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone~3f))" class="RktValLink" pltdoc="x">chaperone?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">struct-type</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="structutils.html#(def._((quote._~23~25kernel)._struct-type~3f))" class="RktValLink" pltdoc="x">struct-type?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">struct-info-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">make-constructor-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">guard-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">Returns a chaperoned value like <span class="RktVar">struct-type</span>, but with
<span class="RktSym"><a href="inspectors.html#(def._((quote._~23~25kernel)._struct-type-info))" class="RktValLink" pltdoc="x">struct-type-info</a></span> and <span class="RktSym"><a href="inspectors.html#(def._((quote._~23~25kernel)._struct-type-make-constructor))" class="RktValLink" pltdoc="x">struct-type-make-constructor</a></span>
operations on the chaperoned structure type redirected. In addition,
when a new structure type is created as a subtype of the chaperoned
structure type, <span class="RktVar">guard-proc</span> is interposed as an extra guard on
creation of instances of the subtype.</div></p><p>The <span class="RktVar">struct-info-proc</span> must accept 8 arguments &ndash; the result of
<span class="RktSym"><a href="inspectors.html#(def._((quote._~23~25kernel)._struct-type-info))" class="RktValLink" pltdoc="x">struct-type-info</a></span> on <span class="RktVar">struct-type</span>. It must return 8
values, where each is the same or a chaperone of the corresponding
argument. The 8 values are used as the results of
<span class="RktSym"><a href="inspectors.html#(def._((quote._~23~25kernel)._struct-type-info))" class="RktValLink" pltdoc="x">struct-type-info</a></span> for the chaperoned structure type.</p><p>The <span class="RktVar">make-constructor-proc</span> must accept a single procedure
argument, which is a constructor produced by
<span class="RktSym"><a href="inspectors.html#(def._((quote._~23~25kernel)._struct-type-make-constructor))" class="RktValLink" pltdoc="x">struct-type-make-constructor</a></span> on <span class="RktVar">struct-type</span>. It must
return the same or a chaperone of the procedure, which is used as the
result of <span class="RktSym"><a href="inspectors.html#(def._((quote._~23~25kernel)._struct-type-make-constructor))" class="RktValLink" pltdoc="x">struct-type-make-constructor</a></span> on the chaperoned
structure type.</p><p>The <span class="RktVar">guard-proc</span> must accept as many argument as a constructor
for <span class="RktVar">struct-type</span>; it must return the same number of arguments,
each the same or a chaperone of the corresponding argument. The
<span class="RktVar">guard-proc</span> is added as a constructor guard when a subtype is
created of the chaperoned structure type.</p><p>Pairs of <span class="RktVar">prop</span> and <span class="RktVar">prop-val</span> (the number of arguments
to <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone-struct-type))" class="RktValLink" pltdoc="x">chaperone-struct-type</a></span> must be even) add proxy properties
or override proxy-property values of <span class="RktVar">struct-type</span>.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._chaperone-evt))"></a><a name="(def._((quote._~23~25kernel)._chaperone-evt))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone-evt))" class="RktValLink" pltdoc="x">chaperone-evt</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">evt</span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sync.html#(def._((quote._~23~25kernel)._evt~3f))" class="RktValLink" pltdoc="x">evt?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone~3f))" class="RktValLink" pltdoc="x">chaperone?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">evt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="sync.html#(def._((quote._~23~25kernel)._evt~3f))" class="RktValLink" pltdoc="x">evt?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sync.html#(def._((quote._~23~25kernel)._evt~3f))" class="RktValLink" pltdoc="x">evt?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sync.html#(def._((quote._~23~25kernel)._evt~3f))" class="RktValLink" pltdoc="x">evt?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-val</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></div><div class="SIntrapara">Returns a chaperoned value like <span class="RktVar">evt</span>, but with <span class="RktVar">proc</span>
as an event generator when the result is synchronized with functions
like <span class="RktSym"><a href="sync.html#(def._((quote._~23~25kernel)._sync))" class="RktValLink" pltdoc="x">sync</a></span>.</div></p><p>The <span class="RktVar">proc</span> generator is called on synchronization, much like
the procedure passed to <span class="RktSym"><a href="sync.html#(def._((lib._racket/private/misc..rkt)._guard-evt))" class="RktValLink" pltdoc="x">guard-evt</a></span>, except that <span class="RktVar">proc</span>
is given <span class="RktVar">evt</span>. The <span class="RktVar">proc</span> must return two values: a
<a href="sync.html#(tech._synchronizable._event)" class="techoutside" pltdoc="x"><span class="techinside">synchronizable event</span></a> that is a chaperone of <span class="RktVar">evt</span>, and a
procedure that is used to check the event&rsquo;s result if it is chosen in
a selection. The latter procedure accepts the result of <span class="RktVar">evt</span>,
and it must return a chaperone of that value.</p><p>Pairs of <span class="RktVar">prop</span> and <span class="RktVar">prop-val</span> (the number of arguments
to <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone-struct-type))" class="RktValLink" pltdoc="x">chaperone-struct-type</a></span> must be even) add proxy properties
or override proxy-property values of <span class="RktVar">evt</span>.</p><h5>13.5.3<tt>&nbsp;</tt><a name="(part._.Proxy_.Properties)"></a>Proxy Properties</h5><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._make-proxy-property))"></a><a name="(def._((quote._~23~25kernel)._make-proxy-property))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-proxy-property))" class="RktValLink" pltdoc="x">make-proxy-property</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0"><tr><td><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone~3f))" class="RktValLink" pltdoc="x">chaperone?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span></td></tr></table></div><div class="SIntrapara">Creates a new <a href="#(tech._proxy._property)" class="techoutside" pltdoc="x"><span class="techinside">proxy property</span></a> and returns three values:</div></p><ul><li><p>a <a name="(tech._proxy._property._descriptor)"></a><span style="font-style: italic">proxy property descriptor</span>, for use with
<span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._chaperone-procedure))" class="RktValLink" pltdoc="x">chaperone-procedure</a></span>, <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._chaperone-struct))" class="RktValLink" pltdoc="x">chaperone-struct</a></span>, and
other chaperone constructors;</p></li><li><p>a <a name="(tech._proxy._property._predicate)"></a><span style="font-style: italic">proxy property predicate</span> procedure, which takes
an arbitrary value and returns <span class="RktVal">#t</span> if the value is a
chaperone with a value for the property, <span class="RktVal">#f</span>
otherwise;</p></li><li><p>an <a name="(tech._proxy._property._accessor)"></a><span style="font-style: italic">proxy property accessor</span> procedure, which
returns the value associated with a chaperone for the property;
if a value given to the accessor is not a chaperone or does not
have a value for the property (ie if the corresponding chaperone
property predicate returns <span class="RktVal">#f</span>), the accessor raises
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p></li></ul><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._proxy-property~3f))"></a><a name="(def._((quote._~23~25kernel)._proxy-property~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a <a href="#(tech._proxy._property._descriptor)" class="techoutside" pltdoc="x"><span class="techinside">proxy property
descriptor</span></a> value, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((quote._~23~25kernel)._proxy-property-accessor-procedure~3f))"></a><a name="(def._((quote._~23~25kernel)._proxy-property-accessor-procedure~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property-accessor-procedure~3f))" class="RktValLink" pltdoc="x">proxy-property-accessor-procedure?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is an accessor procedure produced
by <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-proxy-property))" class="RktValLink" pltdoc="x">make-proxy-property</a></span>, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><a name="(dep._((quote._~23~25kernel)._proxy-prop~3aapplication-mark))"></a><a name="(def._((quote._~23~25kernel)._proxy-prop~3aapplication-mark))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-prop~3aapplication-mark))" class="RktValLink" pltdoc="x">proxy-prop:application-mark</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._proxy-property~3f))" class="RktValLink" pltdoc="x">proxy-property?</a></span></td></tr></table></div><div class="SIntrapara">A <a href="#(tech._proxy._property)" class="techoutside" pltdoc="x"><span class="techinside">proxy property</span></a> that is recognized by <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._proxy-procedure))" class="RktValLink" pltdoc="x">proxy-procedure</a></span>
and <span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._chaperone-procedure))" class="RktValLink" pltdoc="x">chaperone-procedure</a></span>.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="Module_Names_and_Loading.html" title="backward to &quot;13.4 Module Names and Loading&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="security.html" title="up to &quot;13 Reflection and Security&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="securityguards.html" title="forward to &quot;13.6 Security Guards&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>