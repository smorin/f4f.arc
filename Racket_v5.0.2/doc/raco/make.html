<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>1&nbsp;raco make: Compiling Source to Bytecode</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span class="stt">raco</span>:<span class="mywbr"> </span> Racket Command-<wbr></wbr>Line Tools</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x"><span class="stt">raco make</span>:<span class="mywbr"> </span> Compiling Source to Bytecode</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="exe.html" class="tocviewlink" pltdoc="x"><span class="stt">raco exe</span>:<span class="mywbr"> </span> Creating Stand-<wbr></wbr>Alone Executables</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="exe-dist.html" class="tocviewlink" pltdoc="x"><span class="stt">raco distribute</span>:<span class="mywbr"> </span> Sharing Stand-<wbr></wbr>Alone Executables</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="plt.html" class="tocviewlink" pltdoc="x"><span class="stt">raco pack</span>:<span class="mywbr"> </span> Packaging Library Collections</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="planet.html" class="tocviewlink" pltdoc="x"><span class="stt">raco planet</span>:<span class="mywbr"> </span> Automatic Package Distribution</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="setup.html" class="tocviewlink" pltdoc="x"><span class="stt">raco setup</span>:<span class="mywbr"> </span> Installation Management</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="decompile.html" class="tocviewlink" pltdoc="x"><span class="stt">raco decompile</span>:<span class="mywbr"> </span> Decompiling Bytecode</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="ctool.html" class="tocviewlink" pltdoc="x"><span class="stt">raco ctool</span>:<span class="mywbr"> </span> Working with C Code</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="command.html" class="tocviewlink" pltdoc="x">Adding a <span class="stt">raco</span> Command</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>1&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x"><span class="stt">raco make</span>:<span class="mywbr"> </span> Compiling Source to Bytecode</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="#(part._.Bytecode_.Files)" class="tocviewlink" pltdoc="x">Bytecode Files</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="#(part._.Dependency_.Files)" class="tocviewlink" pltdoc="x">Dependency Files</a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="#(part._.A.P.I_for_.Making_.Bytecode)" class="tocviewlink" pltdoc="x">API for Making Bytecode</a></td></tr><tr><td align="right">1.4&nbsp;</td><td><a href="#(part._.Compilation_.Manager_.Hook_for_.Syntax_.Transformers)" class="tocviewlink" pltdoc="x">Compilation Manager Hook for Syntax Transformers</a></td></tr><tr><td align="right">1.5&nbsp;</td><td><a href="#(part._zo)" class="tocviewlink" pltdoc="x">Compiling to Raw Bytecode</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#(part._.Bytecode_.Files)" class="tocsubseclink" pltdoc="x">Bytecode Files</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#(part._.Dependency_.Files)" class="tocsubseclink" pltdoc="x">Dependency Files</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#(part._.A.P.I_for_.Making_.Bytecode)" class="tocsubseclink" pltdoc="x">API for Making Bytecode</a></td></tr><tr><td><a href="#(def._((lib._compiler/cm..rkt)._make-compilation-manager-load/use-compiled-handler))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>compilation-<wbr></wbr>manager-<wbr></wbr>load/<span class="mywbr"> </span>use-<wbr></wbr>compiled-<wbr></wbr>handler</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._compiler/cm..rkt)._managed-compile-zo))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm"><span class="RktSym"><span class="RktValLink">managed-<wbr></wbr>compile-<wbr></wbr>zo</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._compiler/cm..rkt)._trust-existing-zos))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm"><span class="RktSym"><span class="RktValLink">trust-<wbr></wbr>existing-<wbr></wbr>zos</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._compiler/cm..rkt)._make-caching-managed-compile-zo))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>caching-<wbr></wbr>managed-<wbr></wbr>compile-<wbr></wbr>zo</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._compiler/cm..rkt)._manager-compile-notify-handler))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm"><span class="RktSym"><span class="RktValLink">manager-<wbr></wbr>compile-<wbr></wbr>notify-<wbr></wbr>handler</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._compiler/cm..rkt)._manager-trace-handler))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm"><span class="RktSym"><span class="RktValLink">manager-<wbr></wbr>trace-<wbr></wbr>handler</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._compiler/cm..rkt)._manager-skip-file-handler))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm"><span class="RktSym"><span class="RktValLink">manager-<wbr></wbr>skip-<wbr></wbr>file-<wbr></wbr>handler</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._compiler/cm..rkt)._file-stamp-in-collection))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm"><span class="RktSym"><span class="RktValLink">file-<wbr></wbr>stamp-<wbr></wbr>in-<wbr></wbr>collection</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._compiler/cm..rkt)._file-stamp-in-paths))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm"><span class="RktSym"><span class="RktValLink">file-<wbr></wbr>stamp-<wbr></wbr>in-<wbr></wbr>paths</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._compiler/cm..rkt)._get-file-sha1))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm"><span class="RktSym"><span class="RktValLink">get-<wbr></wbr>file-<wbr></wbr>sha1</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._compiler/cm..rkt)._get-compiled-file-sha1))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm"><span class="RktSym"><span class="RktValLink">get-<wbr></wbr>compiled-<wbr></wbr>file-<wbr></wbr>sha1</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._compiler/cm..rkt)._with-compile-output))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm"><span class="RktSym"><span class="RktValLink">with-<wbr></wbr>compile-<wbr></wbr>output</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#(part._.Compilation_.Manager_.Hook_for_.Syntax_.Transformers)" class="tocsubseclink" pltdoc="x">Compilation Manager Hook for Syntax Transformers</a></td></tr><tr><td><a href="#(def._((lib._compiler/cm-accomplice..rkt)._register-external-file))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: compiler/cm-accomplice"><span class="RktSym"><span class="RktValLink">register-<wbr></wbr>external-<wbr></wbr>file</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.5<tt>&nbsp;</tt></span><a href="#(part._zo)" class="tocsubseclink" pltdoc="x">Compiling to Raw Bytecode</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="index.html" title="backward to &quot;raco: Racket Command-Line Tools&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;raco: Racket Command-Line Tools&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="exe.html" title="forward to &quot;2 raco exe: Creating Stand-Alone Executables&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>1<tt>&nbsp;</tt><a name="(part._make)"></a><span class="stt">raco make</span>: Compiling Source to Bytecode</h3><p>The <span class="stt">raco make</span> command accept filenames for Racket modules to be
compiled to bytecode format. Modules are re-compiled only if the
source Racket file is newer than the bytecode file and has a different
SHA-1 hash, or if any imported module is recompiled or has a different
SHA-1 hash for its compiled form plus dependencies.</p><h4>1.1<tt>&nbsp;</tt><a name="(part._.Bytecode_.Files)"></a>Bytecode Files</h4><p>A file <span class="stt">"&#8249;<span style="font-style: italic">name</span>&#8250;.&#8249;<span style="font-style: italic">ext</span>&#8250;"</span> is compiled to bytecode
that is saved as <span class="stt">"compiled/&#8249;<span style="font-style: italic">name</span>&#8250;_&#8249;<span style="font-style: italic">ext</span>&#8250;.zo"</span>
relative to the file. As a result, the bytecode file is normally used
automatically when <span class="stt">"&#8249;<span style="font-style: italic">name</span>&#8250;.&#8249;<span style="font-style: italic">ext</span>&#8250;"</span> is required
as a module, since the underlying <span class="RktSym"><a href="../reference/eval.html#(def._((lib._racket/private/misc..rkt)._load/use-compiled))" class="RktValLink" pltdoc="x">load/use-compiled</a></span> operation
detects such a bytecode file.</p><p>For example, in a directory that contains the following files:</p><ul><li><p><span class="stt">"a.rkt"</span>:</p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="../reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"b.rkt"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span></td></tr></table></li><li><p><span class="stt">"b.rkt"</span>:</p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="../reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr></table></li><li><p><span class="stt">"c.rkt"</span>:</p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="../reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr></table></li></ul><p>then</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco make a.rkt</span></p><p>triggers the creation of <span class="stt">"compiled/a_rkt.zo"</span>,
<span class="stt">"compiled/b_rkt.zo"</span>, and <span class="stt">"compiled/c_rkt.zo"</span>.
A subsequent</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">racket a.rkt</span></p><p>loads bytecode from the generated <span class="stt">".zo"</span> files, paying
attention to the <span class="stt">".rkt"</span> sources only to confirm that each
<span class="stt">".zo"</span> file has a later timestamp.</p><p>In contrast,</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">racket b.rkt c.rkt</span></p><p>would create only <span class="stt">"compiled/b_rkt.zo"</span> and
<span class="stt">"compiled/c_rkt.zo"</span>, since neither <span class="stt">"b.rkt"</span> nor
<span class="stt">"c.rkt"</span> imports <span class="stt">"a.rkt"</span>.</p><h4>1.2<tt>&nbsp;</tt><a name="(part._.Dependency_.Files)"></a>Dependency Files</h4><p>In addition to a bytecode file, <span class="stt">raco make</span> creates a file
<span class="stt">"compiled/&#8249;<span style="font-style: italic">name</span>&#8250;_&#8249;<span style="font-style: italic">ext</span>&#8250;.dep"</span> that records
dependencies of the compiled module on other module files and the
source file&rsquo;s SHA-1 hash.  Using this dependency information, a
re-compilation request via <span class="stt">raco make</span> can consult both the
source file&rsquo;s timestamp/hash and the timestamps/hashes for the
bytecode of imported modules.  Furthermore, imported modules are
themselves compiled as necessary, including updating the bytecode and
dependency files for the imported modules, transitively.</p><p>Continuing the <span class="stt">raco make a.rkt</span> example from the previous
section, the <span class="stt">raco make</span> command creates
<span class="stt">"compiled/a_rkt.dep"</span>, <span class="stt">"compiled/b_rkt.dep"</span>, and
<span class="stt">"compiled/c_rkt.dep"</span> at the same time as the <span class="stt">".zo"</span>
files. The <span class="stt">"compiled/a_rkt.dep"</span> file records the dependency
of <span class="stt">"a.rkt"</span> on <span class="stt">"b.rkt"</span>, <span class="stt">"c.rkt"</span> and the
<a href="../reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a> library. If the <span class="stt">"b.rkt"</span> file is
modified (so that its timestamp and SHA-1 hash changes), then running</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco make a.rkt</span></p><p>again rebuilds <span class="stt">"compiled/a_rkt.zo"</span> and
<span class="stt">"compiled/b_rkt.zo"</span>.</p><p>For module files that are within library collections, <span class="stt">raco
setup</span> uses the same <span class="stt">".zo"</span> and <span class="stt">".dep"</span> conventions
and files as <span class="stt">raco make</span>, so the two tools can be used together.</p><h4>1.3<tt>&nbsp;</tt><a name="(part._.A.P.I_for_.Making_.Bytecode)"></a><a name="(mod-path._compiler/cm)"></a>API for Making Bytecode</h4><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._compiler/cm)" class="RktModLink" pltdoc="x"><span class="RktSym">compiler/cm</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">The <a href="#(mod-path._compiler/cm)" class="RktModLink" pltdoc="x"><span class="RktSym">compiler/cm</span></a> module
implements the compilation and dependency management used by
<span class="stt">raco make</span> and <span class="stt">raco setup</span>.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm..rkt)._make-compilation-manager-load/use-compiled-handler))"></a><a name="(def._((lib._compiler/cm..rkt)._make-compilation-manager-load/use-compiled-handler))"></a><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._make-compilation-manager-load/use-compiled-handler))" class="RktValLink" pltdoc="x">make-compilation-manager-load/use-compiled-handler</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._false/c))" class="RktValLink" pltdoc="x">false/c</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Returns a procedure suitable as a value for the
<span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._current-load/use-compiled))" class="RktValLink" pltdoc="x">current-load/use-compiled</a></span> parameter. The returned procedure
passes it arguments on to the <span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._current-load/use-compiled))" class="RktValLink" pltdoc="x">current-load/use-compiled</a></span>
procedure that is installed when
<span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._make-compilation-manager-load/use-compiled-handler))" class="RktValLink" pltdoc="x">make-compilation-manager-load/use-compiled-handler</a></span> is called,
but first it automatically compiles a source file to a <span class="stt">".zo"</span>
file if</div></p><ul><li><p>the file is expected to contain a module (i.e., the second
argument to the handler is a symbol);</p></li><li><p>the value of each of <span class="RktPn">(</span><span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._current-eval))" class="RktValLink" pltdoc="x">current-eval</a></span><span class="RktPn">)</span>,
<span class="RktPn">(</span><span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._current-load))" class="RktValLink" pltdoc="x">current-load</a></span><span class="RktPn">)</span>, and <span class="RktPn">(</span><span class="RktSym"><a href="../reference/Namespaces.html#(def._((quote._~23~25kernel)._namespace-module-registry))" class="RktValLink" pltdoc="x">namespace-module-registry</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Namespaces.html#(def._((quote._~23~25kernel)._current-namespace))" class="RktValLink" pltdoc="x">current-namespace</a></span><span class="RktPn">)</span><span class="RktPn">)</span> is the same as when
<span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._make-compilation-manager-load/use-compiled-handler))" class="RktValLink" pltdoc="x">make-compilation-manager-load/use-compiled-handler</a></span> was
called;</p></li><li><p>the value of <span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._use-compiled-file-paths))" class="RktValLink" pltdoc="x">use-compiled-file-paths</a></span> contains the
first path that was present when
<span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._make-compilation-manager-load/use-compiled-handler))" class="RktValLink" pltdoc="x">make-compilation-manager-load/use-compiled-handler</a></span> was
called;</p></li><li><p>the value of <span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._current-load/use-compiled))" class="RktValLink" pltdoc="x">current-load/use-compiled</a></span> is the result
of this procedure; and</p></li><li><p>one of the following holds:</p><ul><li><p>the source file is newer than the <span class="stt">".zo"</span> file in the
first sub-directory listed in <span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._use-compiled-file-paths))" class="RktValLink" pltdoc="x">use-compiled-file-paths</a></span>
(at the time that
<span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._make-compilation-manager-load/use-compiled-handler))" class="RktValLink" pltdoc="x">make-compilation-manager-load/use-compiled-handler</a></span>
was called), and either no <span class="stt">".dep"</span> file exists or it
records a source-file SHA-1 hash that differs from the current
version and source-file SHA-1 hash;</p></li><li><p>no <span class="stt">".dep"</span> file exists next to the <span class="stt">".zo"</span>
file;</p></li><li><p>the version recorded in the <span class="stt">".dep"</span> file does not
match the result of <span class="RktPn">(</span><span class="RktSym"><a href="../reference/runtime.html#(def._((quote._~23~25kernel)._version))" class="RktValLink" pltdoc="x">version</a></span><span class="RktPn">)</span>;</p></li><li><p>one of the files listed in the <span class="stt">".dep"</span> file has a
<span class="stt">".zo"</span> timestamp newer than the target <span class="stt">".zo"</span>,
and the combined hashes of the dependencies recorded in the
<span class="stt">".dep"</span> file does not match the combined hash recorded
in the <span class="stt">".dep"</span> file.</p></li></ul></li></ul><p>If SHA-1 hashes override a timestamp-based decision to recompile the
file, then the target <span class="stt">".zo"</span> file&rsquo;s timestamp is updated to
the current time.</p><p>After the handler procedure compiles a <span class="stt">".zo"</span> file, it creates
a corresponding <span class="stt">".dep"</span> file that lists the current version
and the identification of every file that is directly
<span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>d by the module in the compiled file. Additional
dependencies can be installed during compilation via
<a href="#(mod-path._compiler/cm-accomplice)" class="RktModLink" pltdoc="x"><span class="RktSym">compiler/cm-accomplice</span></a>. The <span class="stt">".dep"</span> file also
records the SHA-1 hash of the module&rsquo;s source, and it records a
combined SHA-1 hash of all of the dependencies that includes their
recursive dependencies.</p><p>The handler caches timestamps when it checks <span class="stt">".dep"</span> files,
and the cache is maintained across calls to the same handler. The
cache is not consulted to compare the immediate source file to its
<span class="stt">".zo"</span> file, which means that the caching behavior is
consistent with the caching of the default module name resolver (see
<span class="RktSym"><a href="../reference/Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._current-module-name-resolver))" class="RktValLink" pltdoc="x">current-module-name-resolver</a></span>).</p><p>If <span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._use-compiled-file-paths))" class="RktValLink" pltdoc="x">use-compiled-file-paths</a></span> contains an empty list when
<span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._make-compilation-manager-load/use-compiled-handler))" class="RktValLink" pltdoc="x">make-compilation-manager-load/use-compiled-handler</a></span> is called,
then <span class="RktSym"><a href="../reference/exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><span style="font-style: italic">Do not</span> install the result of
<span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._make-compilation-manager-load/use-compiled-handler))" class="RktValLink" pltdoc="x">make-compilation-manager-load/use-compiled-handler</a></span> when the
current namespace contains already-loaded versions of modules that may
need to be recompiled &ndash; unless the already-loaded modules are never
referenced by not-yet-loaded modules. References to already-loaded
modules may produce compiled files with inconsistent timestamps and/or
<span class="stt">".dep"</span> files with incorrect information.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm..rkt)._managed-compile-zo))"></a><a name="(def._((lib._compiler/cm..rkt)._managed-compile-zo))"></a><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._managed-compile-zo))" class="RktValLink" pltdoc="x">managed-compile-zo</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span>[<span class="RktVar">read-src-syntax</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">read-src-syntax</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="RktValLink" pltdoc="x">read-syntax</a></span></td></tr></table></td></tr></table></div><div class="SIntrapara">Compiles the given module source file to a <span class="stt">".zo"</span>, installing
a compilation-manager handler while the file is compiled (so that
required modules are also compiled), and creating a <span class="stt">".dep"</span> file
to record the timestamps of immediate files used to compile the source
(i.e., files <span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>d in the source).</div></p><p>If <span class="RktVar">file</span> is compiled from source, then
<span class="RktVar">read-src-syntax</span> is used in the same way as
<span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="RktValLink" pltdoc="x">read-syntax</a></span> to read the source module. The normal
<span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="RktValLink" pltdoc="x">read-syntax</a></span> is used for any required files, however.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm..rkt)._trust-existing-zos))"></a><a name="(def._((lib._compiler/cm..rkt)._trust-existing-zos))"></a><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._trust-existing-zos))" class="RktValLink" pltdoc="x">trust-existing-zos</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._trust-existing-zos))" class="RktValLink" pltdoc="x">trust-existing-zos</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">trust?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">trust?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr></table></div><div class="SIntrapara">A parameter that is intended for use by <span class="stt">setup-plt</span> when
installing with pre-built <span class="stt">".zo"</span> files. It causes a
compilation-manager <span class="RktSym"><a href="../reference/eval.html#(def._((lib._racket/private/misc..rkt)._load/use-compiled))" class="RktValLink" pltdoc="x">load/use-compiled</a></span> handler to &ldquo;touch&rdquo;
out-of-date <span class="stt">".zo"</span> files instead of re-compiling from source.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm..rkt)._make-caching-managed-compile-zo))"></a><a name="(def._((lib._compiler/cm..rkt)._make-caching-managed-compile-zo))"></a><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._make-caching-managed-compile-zo))" class="RktValLink" pltdoc="x">make-caching-managed-compile-zo</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">read-src-syntax</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">read-src-syntax</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/guts..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Returns a procedure that behaves like <span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._managed-compile-zo))" class="RktValLink" pltdoc="x">managed-compile-zo</a></span>
(providing the same <span class="RktVar">read-src-syntax</span> each time), but a cache
of timestamp information is preserved across calls to the procedure.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm..rkt)._manager-compile-notify-handler))"></a><a name="(def._((lib._compiler/cm..rkt)._manager-compile-notify-handler))"></a><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._manager-compile-notify-handler))" class="RktValLink" pltdoc="x">manager-compile-notify-handler</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._manager-compile-notify-handler))" class="RktValLink" pltdoc="x">manager-compile-notify-handler</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">notify</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">notify</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">A parameter for a procedure of one argument that is called whenever a
compilation starts. The argument to the procedure is the file&rsquo;s path.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm..rkt)._manager-trace-handler))"></a><a name="(def._((lib._compiler/cm..rkt)._manager-trace-handler))"></a><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._manager-trace-handler))" class="RktValLink" pltdoc="x">manager-trace-handler</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._manager-trace-handler))" class="RktValLink" pltdoc="x">manager-trace-handler</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">notify</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">notify</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">A parameter for a procedure of one argument that is called to report
 compilation-manager actions, such as checking a file. The argument to
 the procedure is a string.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm..rkt)._manager-skip-file-handler))"></a><a name="(def._((lib._compiler/cm..rkt)._manager-skip-file-handler))"></a><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._manager-skip-file-handler))" class="RktValLink" pltdoc="x">manager-skip-file-handler</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._cons/c))" class="RktValLink" pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" class="RktValLink" pltdoc="x">number?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">promise?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._manager-skip-file-handler))" class="RktValLink" pltdoc="x">manager-skip-file-handler</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._cons/c))" class="RktValLink" pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" class="RktValLink" pltdoc="x">number?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">promise?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">A parameter whose value is called for each file that is loaded and
 needs recompilation. If the procedure returns a pair, then the file
 is skipped (i.e., not compiled); the number in the pair is used as
 the timestamp for the file&rsquo;s bytecode, and the promise may be
 <span class="RktSym">force</span>d to obtain a string that is used as hash of the
 compiled file plus its dependencies. If the procedure returns
 <span class="RktVal">#f</span>, then the file is compiled as usual. The default is
 <span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">#f</span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm..rkt)._file-stamp-in-collection))"></a><a name="(def._((lib._compiler/cm..rkt)._file-stamp-in-collection))"></a><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._file-stamp-in-collection))" class="RktValLink" pltdoc="x">file-stamp-in-collection</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">p</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._cons/c))" class="RktValLink" pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" class="RktValLink" pltdoc="x">number?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">promise?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span></td></tr></table></div><div class="SIntrapara">Calls <span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._file-stamp-in-paths))" class="RktValLink" pltdoc="x">file-stamp-in-paths</a></span> with <span class="RktVar">p</span> and
<span class="RktPn">(</span><span class="RktSym"><a href="../reference/collects.html#(def._((quote._~23~25kernel)._current-library-collection-paths))" class="RktValLink" pltdoc="x">current-library-collection-paths</a></span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm..rkt)._file-stamp-in-paths))"></a><a name="(def._((lib._compiler/cm..rkt)._file-stamp-in-paths))"></a><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._file-stamp-in-paths))" class="RktValLink" pltdoc="x">file-stamp-in-paths</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span><span class="RktVar">paths</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._cons/c))" class="RktValLink" pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/number-types.html#(def._((quote._~23~25kernel)._number~3f))" class="RktValLink" pltdoc="x">number?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">promise?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">paths</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Returns the file-modification date and <span class="RktSym">delay</span>ed hash of
 <span class="RktVar">p</span>or its bytecode form (i.e., <span class="stt">".zo"</span> file), whichever
 exists and is newer, if <span class="RktVar">p</span> is an extension of any path in
 <span class="RktVar">paths</span> (i.e., exists in the directory, a subdirectory,
 etc.). Otherwise, the result is <span class="RktVal">#f</span>.</div></p><p>This function is intended for use with <span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._manager-skip-file-handler))" class="RktValLink" pltdoc="x">manager-skip-file-handler</a></span>.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm..rkt)._get-file-sha1))"></a><a name="(def._((lib._compiler/cm..rkt)._get-file-sha1))"></a><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._get-file-sha1))" class="RktValLink" pltdoc="x">get-file-sha1</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span></td></tr></table></div><div class="SIntrapara">Computes a SHA-1 hash for the file <span class="RktVar">p</span>; the result is
<span class="RktVal">#f</span> if <span class="RktVar">p</span> cannot be opened.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm..rkt)._get-compiled-file-sha1))"></a><a name="(def._((lib._compiler/cm..rkt)._get-compiled-file-sha1))"></a><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._get-compiled-file-sha1))" class="RktValLink" pltdoc="x">get-compiled-file-sha1</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span></td></tr></table></div><div class="SIntrapara">Computes a SHA-1 hash for the bytecode file <span class="RktVar">p</span>, appending any
dependency-describing hash available from a <span class="stt">".dep"</span> file when
available (i.e., the suffix on <span class="RktVar">p</span> is replaced by
<span class="stt">".dep"</span> to locate dependency information). The result is
<span class="RktVal">#f</span> if <span class="RktVar">p</span> cannot be opened.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm..rkt)._with-compile-output))"></a><a name="(def._((lib._compiler/cm..rkt)._with-compile-output))"></a><span title="Provided from: compiler/cm"><span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._with-compile-output))" class="RktValLink" pltdoc="x">with-compile-output</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((lib._racket/private/misc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">port</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">tmp-path</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="../reference/Function_Contracts.html#(form._((lib._racket/contract..rkt)._-~3e))" class="RktStxLink" pltdoc="x">-&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Data-structure_Contracts.html#(form._((lib._racket/contract/private/guts..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Opens a temporary path for writing and calls <span class="RktVar">proc</span> passing the
resulting <span class="RktSym">port</span> and <span class="RktSym">tmp-path</span>.  Once <span class="RktVar">proc</span>
returns, <span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._with-compile-output))" class="RktValLink" pltdoc="x">with-compile-output</a></span> renames <span class="RktSym">tmp-path</span> to
<span class="RktVar">p</span> and arranges to delete <span class="RktSym">temp-path</span> if there&rsquo;s an
exception.  Breaks are managed so that the <span class="RktSym">port</span> is reliably
closed and the <span class="RktSym">tmp-path</span> file is reliably deleted if there&rsquo;s a
break. The result of <span class="RktVar">proc</span> is the result of the
<span class="RktSym"><a href="#(def._((lib._compiler/cm..rkt)._with-compile-output))" class="RktValLink" pltdoc="x">with-compile-output</a></span> call.</div></p><h4>1.4<tt>&nbsp;</tt><a name="(part._.Compilation_.Manager_.Hook_for_.Syntax_.Transformers)"></a><a name="(mod-path._compiler/cm-accomplice)"></a>Compilation Manager Hook for Syntax Transformers</h4><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._compiler/cm-accomplice)" class="RktModLink" pltdoc="x"><span class="RktSym">compiler/cm-accomplice</span></a><span class="RktPn">)</span></td></tr></table></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><a name="(dep._((lib._compiler/cm-accomplice..rkt)._register-external-file))"></a><a name="(def._((lib._compiler/cm-accomplice..rkt)._register-external-file))"></a><span title="Provided from: compiler/cm-accomplice"><span class="RktSym"><a href="#(def._((lib._compiler/cm-accomplice..rkt)._register-external-file))" class="RktValLink" pltdoc="x">register-external-file</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">file</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._and))" class="RktStxLink" pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Manipulating_Paths.html#(def._((quote._~23~25kernel)._complete-path~3f))" class="RktValLink" pltdoc="x">complete-path?</a></span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">Logs a message (see <span class="RktSym"><a href="../reference/logging.html#(def._((quote._~23~25kernel)._log-message))" class="RktValLink" pltdoc="x">log-message</a></span>) at level <span class="RktVal">'</span><span class="RktVal">info</span>. The
message data is a <span class="RktSym">file-dependency</span> prefab structure type
with one field whose value is <span class="RktVar">file</span>.</div></p><p>A compilation manager implemented by <a href="#(mod-path._compiler/cm)" class="RktModLink" pltdoc="x"><span class="RktSym">compiler/cm</span></a> looks
for such messages to register an external dependency. The compilation
manager records (in a <span class="stt">".dep"</span> file) the path as contributing
to the implementation of the module currently being
compiled. Afterward, if the registered file is modified, the
compilation manager will know to recompile the module.</p><p>The <span class="RktSym"><a href="../reference/include.html#(form._((lib._racket/include..rkt)._include))" class="RktStxLink" pltdoc="x">include</a></span> macro, for example, calls this procedure with the
path of an included file as it expands an <span class="RktSym"><a href="../reference/include.html#(form._((lib._racket/include..rkt)._include))" class="RktStxLink" pltdoc="x">include</a></span> form.</p><h4>1.5<tt>&nbsp;</tt><a name="(part._zo)"></a>Compiling to Raw Bytecode</h4><p>The <span class="nobreak"><span class="stt">--no-deps</span></span> mode for <span class="stt">raco make</span> is an improverished
form of the compilation, because it does not track import
dependencies. It does, however, support compilation of non-module
source in an namespace that iniitially imports <a href="../scheme/scheme.html" class="RktModLink" pltdoc="x"><span class="RktSym">scheme</span></a>.</p><p>Outside of a module, top-level <span class="RktSym"><a href="../reference/define.html#(form._((quote._~23~25kernel)._define-syntaxes))" class="RktStxLink" pltdoc="x">define-syntaxes</a></span>,
<span class="RktSym"><a href="../reference/module.html#(form._((quote._~23~25kernel)._module))" class="RktStxLink" pltdoc="x">module</a></span>, <span class="RktSym"><a href="../reference/require.html#(form._((quote._~23~25kernel)._~23~25require))" class="RktStxLink" pltdoc="x">#%require</a></span>,
<span class="RktSym"><a href="../reference/define.html#(form._((quote._~23~25kernel)._define-values-for-syntax))" class="RktStxLink" pltdoc="x">define-values-for-syntax</a></span>, and <span class="RktSym"><a href="../reference/begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span> expressions
are handled specially by <span class="stt">raco make --no-deps</span>: the compile-time
portion of the expression is evaluated, because it might affect later
expressions.</p><p>For example, when compiling the file containing</p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">racket/class</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class%</span><span class="hspace">&nbsp;</span><span class="RktSym">object%</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">super-new</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></p><p>the <span class="RktSym">class</span> form from the <a href="../reference/mzlib_class.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket/class</span></a> library
must be bound in the compilation namespace at compile time. Thus, the
<span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span> expression is both compiled (to appear in the output
code) and evaluated (for further computation).</p><p>Many definition forms expand to <span class="RktSym"><a href="../reference/define.html#(form._((quote._~23~25kernel)._define-syntaxes))" class="RktStxLink" pltdoc="x">define-syntaxes</a></span>. For example,
<span class="RktSym">define-signature</span> expands to <span class="RktSym"><a href="../reference/define.html#(form._((quote._~23~25kernel)._define-syntaxes))" class="RktStxLink" pltdoc="x">define-syntaxes</a></span>. In
<span class="nobreak"><span class="stt">--no-deps</span></span> mode, <span class="stt">raco make --no-deps</span> detects
<span class="RktSym"><a href="../reference/define.html#(form._((quote._~23~25kernel)._define-syntaxes))" class="RktStxLink" pltdoc="x">define-syntaxes</a></span> and other expressions after expansion, so
top-level <span class="RktSym">define-signature</span> expressions affect the compilation
of later expressions, as a programmer would expect.</p><p>In contrast, a <span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._load))" class="RktValLink" pltdoc="x">load</a></span> or <span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._eval))" class="RktValLink" pltdoc="x">eval</a></span> expression in a source
file is compiled &ndash; but <span style="font-style: italic">not evaluated!</span> &ndash; as the source file is
compiled.  Even if the <span class="RktSym"><a href="../reference/eval.html#(def._((quote._~23~25kernel)._load))" class="RktValLink" pltdoc="x">load</a></span> expression loads syntax or
signature definitions, these will not be loaded as the file is
compiled. The same is true of application expressions that affect the
reader, such as <span class="RktPn">(</span><span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read-case-sensitive))" class="RktValLink" pltdoc="x">read-case-sensitive</a></span><span class="stt"> </span><span class="RktVal">#t</span><span class="RktPn">)</span>. The <span class="nobreak"><span class="stt">-p</span></span> or
<span class="nobreak"><span class="stt">--prefix</span></span> flag for <span class="stt">raco make</span> takes a file and loads it before
compiling the source files specified on the command line.</p><p>In general, a better solution is to put all code to compile into a
module and use <span class="stt">raco make</span> in its default mode.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.0.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.0.2&quot;);">top</a></span><span class="navright"><a href="index.html" title="backward to &quot;raco: Racket Command-Line Tools&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;raco: Racket Command-Line Tools&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="exe.html" title="forward to &quot;2 raco exe: Creating Stand-Alone Executables&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>